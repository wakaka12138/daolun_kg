<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Reline::LineEditor - Documentation for Ruby 3.3</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
  var index_rel_prefix = "../";
</script>

<script src="../js/navigation.js" defer></script>
<script src="../js/search.js" defer></script>
<script src="../js/search_index.js" defer></script>
<script src="../js/searcher.js" defer></script>
<script src="../js/darkfish.js" defer></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">


<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search (/) for a class, method, ..." spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    
<div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  <p class="link"><a href="../Object.html">Object</a>
</div>

    
    
    
<!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    <li ><a href="#method-c-new">::new</a>
    <li ><a href="#method-i-add_dialog_proc">#add_dialog_proc</a>
    <li ><a href="#method-i-argumentable-3F">#argumentable?</a>
    <li ><a href="#method-i-backward_char">#backward_char</a>
    <li ><a href="#method-i-backward_delete_char">#backward_delete_char</a>
    <li ><a href="#method-i-backward_kill_word">#backward_kill_word</a>
    <li ><a href="#method-i-backward_word">#backward_word</a>
    <li ><a href="#method-i-beginning_of_line">#beginning_of_line</a>
    <li ><a href="#method-i-byte_pointer-3D">#byte_pointer=</a>
    <li ><a href="#method-i-byteinsert">#byteinsert</a>
    <li ><a href="#method-i-byteslice-21">#byteslice!</a>
    <li ><a href="#method-i-calculate_nearest_cursor">#calculate_nearest_cursor</a>
    <li ><a href="#method-i-calculate_overlay_levels">#calculate_overlay_levels</a>
    <li ><a href="#method-i-calculate_width">#calculate_width</a>
    <li ><a href="#method-i-call_completion_proc">#call_completion_proc</a>
    <li ><a href="#method-i-call_completion_proc_with_checking_args">#call_completion_proc_with_checking_args</a>
    <li ><a href="#method-i-capitalize_word">#capitalize_word</a>
    <li ><a href="#method-i-check_mode_string">#check_mode_string</a>
    <li ><a href="#method-i-check_multiline_prompt">#check_multiline_prompt</a>
    <li ><a href="#method-i-cleanup_waiting">#cleanup_waiting</a>
    <li ><a href="#method-i-clear_dialogs">#clear_dialogs</a>
    <li ><a href="#method-i-clear_rendered_lines">#clear_rendered_lines</a>
    <li ><a href="#method-i-clear_screen">#clear_screen</a>
    <li ><a href="#method-i-complete">#complete</a>
    <li ><a href="#method-i-complete_internal_proc">#complete_internal_proc</a>
    <li ><a href="#method-i-completion_journey_move">#completion_journey_move</a>
    <li ><a href="#method-i-completion_journey_up">#completion_journey_up</a>
    <li ><a href="#method-i-confirm_multiline_termination">#confirm_multiline_termination</a>
    <li ><a href="#method-i-copy_for_vi">#copy_for_vi</a>
    <li ><a href="#method-i-current_byte_pointer_cursor">#current_byte_pointer_cursor</a>
    <li ><a href="#method-i-current_line">#current_line</a>
    <li ><a href="#method-i-delete_char">#delete_char</a>
    <li ><a href="#method-i-delete_char_or_list">#delete_char_or_list</a>
    <li ><a href="#method-i-delete_text">#delete_text</a>
    <li ><a href="#method-i-dialog_proc_scope_completion_journey_data">#dialog_proc_scope_completion_journey_data</a>
    <li ><a href="#method-i-dialog_range">#dialog_range</a>
    <li ><a href="#method-i-downcase_word">#downcase_word</a>
    <li ><a href="#method-i-ed_argument_digit">#ed_argument_digit</a>
    <li ><a href="#method-i-ed_clear_screen">#ed_clear_screen</a>
    <li ><a href="#method-i-ed_delete_next_char">#ed_delete_next_char</a>
    <li ><a href="#method-i-ed_delete_prev_char">#ed_delete_prev_char</a>
    <li ><a href="#method-i-ed_delete_prev_word">#ed_delete_prev_word</a>
    <li ><a href="#method-i-ed_digit">#ed_digit</a>
    <li ><a href="#method-i-ed_insert">#ed_insert</a>
    <li ><a href="#method-i-ed_kill_line">#ed_kill_line</a>
    <li ><a href="#method-i-ed_move_to_beg">#ed_move_to_beg</a>
    <li ><a href="#method-i-ed_move_to_end">#ed_move_to_end</a>
    <li ><a href="#method-i-ed_newline">#ed_newline</a>
    <li ><a href="#method-i-ed_next_char">#ed_next_char</a>
    <li ><a href="#method-i-ed_next_history">#ed_next_history</a>
    <li ><a href="#method-i-ed_prev_char">#ed_prev_char</a>
    <li ><a href="#method-i-ed_prev_history">#ed_prev_history</a>
    <li ><a href="#method-i-ed_prev_word">#ed_prev_word</a>
    <li ><a href="#method-i-ed_quoted_insert">#ed_quoted_insert</a>
    <li ><a href="#method-i-ed_search_next_history">#ed_search_next_history</a>
    <li ><a href="#method-i-ed_search_prev_history">#ed_search_prev_history</a>
    <li ><a href="#method-i-ed_transpose_chars">#ed_transpose_chars</a>
    <li ><a href="#method-i-ed_transpose_words">#ed_transpose_words</a>
    <li ><a href="#method-i-ed_unassigned">#ed_unassigned</a>
    <li ><a href="#method-i-editing_mode">#editing_mode</a>
    <li ><a href="#method-i-em_capitol_case">#em_capitol_case</a>
    <li ><a href="#method-i-em_delete">#em_delete</a>
    <li ><a href="#method-i-em_delete_next_word">#em_delete_next_word</a>
    <li ><a href="#method-i-em_delete_or_list">#em_delete_or_list</a>
    <li ><a href="#method-i-em_delete_prev_char">#em_delete_prev_char</a>
    <li ><a href="#method-i-em_exchange_mark">#em_exchange_mark</a>
    <li ><a href="#method-i-em_kill_line">#em_kill_line</a>
    <li ><a href="#method-i-em_kill_region">#em_kill_region</a>
    <li ><a href="#method-i-em_lower_case">#em_lower_case</a>
    <li ><a href="#method-i-em_next_word">#em_next_word</a>
    <li ><a href="#method-i-em_set_mark">#em_set_mark</a>
    <li ><a href="#method-i-em_upper_case">#em_upper_case</a>
    <li ><a href="#method-i-em_yank">#em_yank</a>
    <li ><a href="#method-i-em_yank_pop">#em_yank_pop</a>
    <li ><a href="#method-i-emacs_editing_mode">#emacs_editing_mode</a>
    <li ><a href="#method-i-end_of_line">#end_of_line</a>
    <li ><a href="#method-i-eof-3F">#eof?</a>
    <li ><a href="#method-i-exchange_point_and_mark">#exchange_point_and_mark</a>
    <li ><a href="#method-i-finalize">#finalize</a>
    <li ><a href="#method-i-finish">#finish</a>
    <li ><a href="#method-i-finished-3F">#finished?</a>
    <li ><a href="#method-i-forward_char">#forward_char</a>
    <li ><a href="#method-i-forward_search_history">#forward_search_history</a>
    <li ><a href="#method-i-forward_word">#forward_word</a>
    <li ><a href="#method-i-generate_searcher">#generate_searcher</a>
    <li ><a href="#method-i-handle_interrupted">#handle_interrupted</a>
    <li ><a href="#method-i-handle_resized">#handle_resized</a>
    <li ><a href="#method-i-handle_signal">#handle_signal</a>
    <li ><a href="#method-i-history_search_backward">#history_search_backward</a>
    <li ><a href="#method-i-history_search_forward">#history_search_forward</a>
    <li ><a href="#method-i-inclusive-3F">#inclusive?</a>
    <li ><a href="#method-i-incremental_search_history">#incremental_search_history</a>
    <li ><a href="#method-i-input_key">#input_key</a>
    <li ><a href="#method-i-insert_new_line">#insert_new_line</a>
    <li ><a href="#method-i-insert_pasted_text">#insert_pasted_text</a>
    <li ><a href="#method-i-insert_text">#insert_text</a>
    <li ><a href="#method-i-io_gate">#io_gate</a>
    <li ><a href="#method-i-key_delete">#key_delete</a>
    <li ><a href="#method-i-key_newline">#key_newline</a>
    <li ><a href="#method-i-kill_line">#kill_line</a>
    <li ><a href="#method-i-kill_whole_line">#kill_whole_line</a>
    <li ><a href="#method-i-kill_word">#kill_word</a>
    <li ><a href="#method-i-line">#line</a>
    <li ><a href="#method-i-menu">#menu</a>
    <li ><a href="#method-i-menu_complete">#menu_complete</a>
    <li ><a href="#method-i-menu_complete_backward">#menu_complete_backward</a>
    <li ><a href="#method-i-modified_lines">#modified_lines</a>
    <li ><a href="#method-i-modify_lines">#modify_lines</a>
    <li ><a href="#method-i-move_completed_list">#move_completed_list</a>
    <li ><a href="#method-i-move_history">#move_history</a>
    <li ><a href="#method-i-multiline_off">#multiline_off</a>
    <li ><a href="#method-i-multiline_on">#multiline_on</a>
    <li ><a href="#method-i-next_history">#next_history</a>
    <li ><a href="#method-i-normal_char">#normal_char</a>
    <li ><a href="#method-i-perform_completion">#perform_completion</a>
    <li ><a href="#method-i-previous_history">#previous_history</a>
    <li ><a href="#method-i-print_nomultiline_prompt">#print_nomultiline_prompt</a>
    <li ><a href="#method-i-process_auto_indent">#process_auto_indent</a>
    <li ><a href="#method-i-process_insert">#process_insert</a>
    <li ><a href="#method-i-process_key">#process_key</a>
    <li ><a href="#method-i-prompt_list">#prompt_list</a>
    <li ><a href="#method-i-push_past_lines">#push_past_lines</a>
    <li ><a href="#method-i-quoted_insert">#quoted_insert</a>
    <li ><a href="#method-i-render_differential">#render_differential</a>
    <li ><a href="#method-i-render_finished">#render_finished</a>
    <li ><a href="#method-i-render_full_content">#render_full_content</a>
    <li ><a href="#method-i-render_line_differential">#render_line_differential</a>
    <li ><a href="#method-i-rerender">#rerender</a>
    <li ><a href="#method-i-reset">#reset</a>
    <li ><a href="#method-i-reset_line">#reset_line</a>
    <li ><a href="#method-i-reset_variables">#reset_variables</a>
    <li ><a href="#method-i-rest_height">#rest_height</a>
    <li ><a href="#method-i-retrieve_completion_block">#retrieve_completion_block</a>
    <li ><a href="#method-i-retrieve_completion_journey_state">#retrieve_completion_journey_state</a>
    <li ><a href="#method-i-reverse_search_history">#reverse_search_history</a>
    <li ><a href="#method-i-run_for_operators">#run_for_operators</a>
    <li ><a href="#method-i-save_old_buffer">#save_old_buffer</a>
    <li ><a href="#method-i-screen_height">#screen_height</a>
    <li ><a href="#method-i-screen_scroll_top">#screen_scroll_top</a>
    <li ><a href="#method-i-screen_width">#screen_width</a>
    <li ><a href="#method-i-scroll_into_view">#scroll_into_view</a>
    <li ><a href="#method-i-search_history">#search_history</a>
    <li ><a href="#method-i-search_next_char">#search_next_char</a>
    <li ><a href="#method-i-search_prev_char">#search_prev_char</a>
    <li ><a href="#method-i-self_insert">#self_insert</a>
    <li ><a href="#method-i-set_current_line">#set_current_line</a>
    <li ><a href="#method-i-set_current_lines">#set_current_lines</a>
    <li ><a href="#method-i-set_mark">#set_mark</a>
    <li ><a href="#method-i-set_pasting_state">#set_pasting_state</a>
    <li ><a href="#method-i-set_signal_handlers">#set_signal_handlers</a>
    <li ><a href="#method-i-split_by_width">#split_by_width</a>
    <li ><a href="#method-i-transpose_chars">#transpose_chars</a>
    <li ><a href="#method-i-transpose_words">#transpose_words</a>
    <li ><a href="#method-i-trim_past_lines">#trim_past_lines</a>
    <li ><a href="#method-i-undo">#undo</a>
    <li ><a href="#method-i-unix_line_discard">#unix_line_discard</a>
    <li ><a href="#method-i-unix_word_rubout">#unix_word_rubout</a>
    <li ><a href="#method-i-upcase_word">#upcase_word</a>
    <li ><a href="#method-i-update">#update</a>
    <li ><a href="#method-i-update_dialogs">#update_dialogs</a>
    <li ><a href="#method-i-update_each_dialog">#update_each_dialog</a>
    <li ><a href="#method-i-upper_space_height">#upper_space_height</a>
    <li ><a href="#method-i-vi_add">#vi_add</a>
    <li ><a href="#method-i-vi_add_at_eol">#vi_add_at_eol</a>
    <li ><a href="#method-i-vi_change_meta">#vi_change_meta</a>
    <li ><a href="#method-i-vi_change_meta_confirm">#vi_change_meta_confirm</a>
    <li ><a href="#method-i-vi_change_to_eol">#vi_change_to_eol</a>
    <li ><a href="#method-i-vi_command_mode">#vi_command_mode</a>
    <li ><a href="#method-i-vi_delete_meta">#vi_delete_meta</a>
    <li ><a href="#method-i-vi_delete_meta_confirm">#vi_delete_meta_confirm</a>
    <li ><a href="#method-i-vi_delete_prev_char">#vi_delete_prev_char</a>
    <li ><a href="#method-i-vi_editing_mode">#vi_editing_mode</a>
    <li ><a href="#method-i-vi_end_big_word">#vi_end_big_word</a>
    <li ><a href="#method-i-vi_end_of_transmission">#vi_end_of_transmission</a>
    <li ><a href="#method-i-vi_end_word">#vi_end_word</a>
    <li ><a href="#method-i-vi_eof_maybe">#vi_eof_maybe</a>
    <li ><a href="#method-i-vi_first_print">#vi_first_print</a>
    <li ><a href="#method-i-vi_histedit">#vi_histedit</a>
    <li ><a href="#method-i-vi_insert">#vi_insert</a>
    <li ><a href="#method-i-vi_insert_at_bol">#vi_insert_at_bol</a>
    <li ><a href="#method-i-vi_join_lines">#vi_join_lines</a>
    <li ><a href="#method-i-vi_kill_line_prev">#vi_kill_line_prev</a>
    <li ><a href="#method-i-vi_list_or_eof">#vi_list_or_eof</a>
    <li ><a href="#method-i-vi_movement_mode">#vi_movement_mode</a>
    <li ><a href="#method-i-vi_next_big_word">#vi_next_big_word</a>
    <li ><a href="#method-i-vi_next_char">#vi_next_char</a>
    <li ><a href="#method-i-vi_next_word">#vi_next_word</a>
    <li ><a href="#method-i-vi_paste_next">#vi_paste_next</a>
    <li ><a href="#method-i-vi_paste_prev">#vi_paste_prev</a>
    <li ><a href="#method-i-vi_prev_big_word">#vi_prev_big_word</a>
    <li ><a href="#method-i-vi_prev_char">#vi_prev_char</a>
    <li ><a href="#method-i-vi_prev_word">#vi_prev_word</a>
    <li ><a href="#method-i-vi_replace_char">#vi_replace_char</a>
    <li ><a href="#method-i-vi_search_next">#vi_search_next</a>
    <li ><a href="#method-i-vi_search_prev">#vi_search_prev</a>
    <li ><a href="#method-i-vi_to_column">#vi_to_column</a>
    <li ><a href="#method-i-vi_to_history_line">#vi_to_history_line</a>
    <li ><a href="#method-i-vi_to_next_char">#vi_to_next_char</a>
    <li ><a href="#method-i-vi_to_prev_char">#vi_to_prev_char</a>
    <li ><a href="#method-i-vi_yank">#vi_yank</a>
    <li ><a href="#method-i-vi_yank_confirm">#vi_yank_confirm</a>
    <li ><a href="#method-i-vi_zero">#vi_zero</a>
    <li ><a href="#method-i-whole_buffer">#whole_buffer</a>
    <li ><a href="#method-i-whole_lines">#whole_lines</a>
    <li ><a href="#method-i-with_cache">#with_cache</a>
    <li ><a href="#method-i-wrap_method_call">#wrap_method_call</a>
    <li ><a href="#method-i-wrapped_cursor_position">#wrapped_cursor_position</a>
    <li ><a href="#method-i-wrapped_prompt_and_input_lines">#wrapped_prompt_and_input_lines</a>
    <li ><a href="#method-i-yank">#yank</a>
    <li ><a href="#method-i-yank_pop">#yank_pop</a>
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Reline::LineEditor">
  <h1 id="class-Reline::LineEditor" class="class">
    class Reline::LineEditor
  </h1>

  <section class="description">
    
  </section>

  <section id="5Buntitled-5D" class="documentation-section">


    <section class="constants-list">
      <header>
        <h3>Constants</h3>
      </header>
      <dl>
        <dt id="CompletionJourneyState">CompletionJourneyState
        <dd>
        <dt id="DIALOG_DEFAULT_HEIGHT">DIALOG_DEFAULT_HEIGHT
        <dd>
        <dt id="MAX_PAST_LINES">MAX_PAST_LINES
        <dd>
        <dt id="MINIMUM_SCROLLBAR_HEIGHT">MINIMUM_SCROLLBAR_HEIGHT
        <dd>
        <dt id="RenderedScreen">RenderedScreen
        <dd>
        <dt id="VI_MOTIONS">VI_MOTIONS
        <dd>
      </dl>
    </section>

    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      <div id="attribute-i-auto_indent_proc" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">auto_indent_proc</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        </div>
      </div>
      <div id="attribute-i-byte_pointer" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">byte_pointer</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        <p>TODO: Use “private alias_method” idiom after drop Ruby 2.5.</p>
        </div>
      </div>
      <div id="attribute-i-completion_append_character" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">completion_append_character</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        </div>
      </div>
      <div id="attribute-i-completion_proc" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">completion_proc</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        </div>
      </div>
      <div id="attribute-i-confirm_multiline_termination_proc" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">confirm_multiline_termination_proc</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        </div>
      </div>
      <div id="attribute-i-dig_perfect_match_proc" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">dig_perfect_match_proc</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        </div>
      </div>
      <div id="attribute-i-output" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">output</span><span
            class="attribute-access-type">[W]</span>
        </div>

        <div class="method-description">
        
        </div>
      </div>
      <div id="attribute-i-output_modifier_proc" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">output_modifier_proc</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        </div>
      </div>
      <div id="attribute-i-prompt_proc" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">prompt_proc</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        </div>
      </div>
    </section>


     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

      <div id="method-c-new" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">new</span><span
              class="method-args">(config, encoding)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 74</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span>(<span class="ruby-identifier">config</span>, <span class="ruby-identifier">encoding</span>)
  <span class="ruby-ivar">@config</span> = <span class="ruby-identifier">config</span>
  <span class="ruby-ivar">@completion_append_character</span> = <span class="ruby-string">&#39;&#39;</span>
  <span class="ruby-ivar">@screen_size</span> = [<span class="ruby-value">0</span>, <span class="ruby-value">0</span>] <span class="ruby-comment"># Should be initialized with actual winsize in LineEditor#reset</span>
  <span class="ruby-identifier">reset_variables</span>(<span class="ruby-value">encoding:</span> <span class="ruby-identifier">encoding</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

    </section>

     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

      <div id="method-i-add_dialog_proc" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">add_dialog_proc</span><span
              class="method-args">(name, p, context = nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="add_dialog_proc-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 696</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">add_dialog_proc</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">p</span>, <span class="ruby-identifier">context</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">dialog</span> = <span class="ruby-constant">Dialog</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-ivar">@config</span>, <span class="ruby-constant">DialogProcScope</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>, <span class="ruby-ivar">@config</span>, <span class="ruby-identifier">p</span>, <span class="ruby-identifier">context</span>))
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">index</span> = <span class="ruby-ivar">@dialogs</span>.<span class="ruby-identifier">find_index</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">name</span> }
    <span class="ruby-ivar">@dialogs</span>[<span class="ruby-identifier">index</span>] = <span class="ruby-identifier">dialog</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@dialogs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">dialog</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-backward_char" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">backward_char</span><span
              class="method-args">(key, arg: 1)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-ed_prev_char">ed_prev_char</a>
        </div>
      </div>

      <div id="method-i-backward_delete_char" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">backward_delete_char</span><span
              class="method-args">(key, arg: 1)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-em_delete_prev_char">em_delete_prev_char</a>
        </div>
      </div>

      <div id="method-i-backward_kill_word" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">backward_kill_word</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-ed_delete_prev_word">ed_delete_prev_word</a>
        </div>
      </div>

      <div id="method-i-backward_word" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">backward_word</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-ed_prev_word">ed_prev_word</a>
        </div>
      </div>

      <div id="method-i-beginning_of_line" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">beginning_of_line</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-ed_move_to_beg">ed_move_to_beg</a>
        </div>
      </div>

      <div id="method-i-byte_pointer-3D" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">byte_pointer=</span><span
              class="method-args">(val)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="byte_pointer-3D-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1402</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">byte_pointer=</span>(<span class="ruby-identifier">val</span>)
  <span class="ruby-ivar">@byte_pointer</span> = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-calculate_overlay_levels" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">calculate_overlay_levels</span><span
              class="method-args">(overlay_levels)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="calculate_overlay_levels-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 396</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">calculate_overlay_levels</span>(<span class="ruby-identifier">overlay_levels</span>)
  <span class="ruby-identifier">levels</span> = []
  <span class="ruby-identifier">overlay_levels</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">x</span>, <span class="ruby-identifier">w</span>, <span class="ruby-identifier">l</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">levels</span>.<span class="ruby-identifier">fill</span>(<span class="ruby-identifier">l</span>, <span class="ruby-identifier">x</span>, <span class="ruby-identifier">w</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">levels</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-call_completion_proc" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">call_completion_proc</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="call_completion_proc-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1187</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">call_completion_proc</span>
  <span class="ruby-identifier">result</span> = <span class="ruby-identifier">retrieve_completion_block</span>(<span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">pre</span>, <span class="ruby-identifier">target</span>, <span class="ruby-identifier">post</span> = <span class="ruby-identifier">result</span>
  <span class="ruby-identifier">result</span> = <span class="ruby-identifier">call_completion_proc_with_checking_args</span>(<span class="ruby-identifier">pre</span>, <span class="ruby-identifier">target</span>, <span class="ruby-identifier">post</span>)
  <span class="ruby-constant">Reline</span>.<span class="ruby-identifier">core</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value">:@completion_quote_character</span>, <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">result</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-call_completion_proc_with_checking_args" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">call_completion_proc_with_checking_args</span><span
              class="method-args">(pre, target, post)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="call_completion_proc_with_checking_args-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1195</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">call_completion_proc_with_checking_args</span>(<span class="ruby-identifier">pre</span>, <span class="ruby-identifier">target</span>, <span class="ruby-identifier">post</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@completion_proc</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">target</span>
    <span class="ruby-identifier">argnum</span> = <span class="ruby-ivar">@completion_proc</span>.<span class="ruby-identifier">parameters</span>.<span class="ruby-identifier">inject</span>(<span class="ruby-value">0</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">result</span>, <span class="ruby-identifier">item</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">case</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">first</span>
      <span class="ruby-keyword">when</span> <span class="ruby-value">:req</span>, <span class="ruby-value">:opt</span>
        <span class="ruby-identifier">result</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
      <span class="ruby-keyword">when</span> <span class="ruby-value">:rest</span>
        <span class="ruby-keyword">break</span> <span class="ruby-value">3</span>
      <span class="ruby-keyword">end</span>
    }
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">argnum</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">1</span>
      <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@completion_proc</span>.(<span class="ruby-identifier">target</span>)
    <span class="ruby-keyword">when</span> <span class="ruby-value">2</span>
      <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@completion_proc</span>.(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">pre</span>)
    <span class="ruby-keyword">when</span> <span class="ruby-value">3</span><span class="ruby-operator">..</span><span class="ruby-constant">Float</span><span class="ruby-operator">::</span><span class="ruby-constant">INFINITY</span>
      <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@completion_proc</span>.(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">pre</span>, <span class="ruby-identifier">post</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">result</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-capitalize_word" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">capitalize_word</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-em_capitol_case">em_capitol_case</a>
        </div>
      </div>

      <div id="method-i-clear_dialogs" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">clear_dialogs</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="clear_dialogs-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 444</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">clear_dialogs</span>
  <span class="ruby-ivar">@dialogs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dialog</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">contents</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">trap_key</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-clear_rendered_lines" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">clear_rendered_lines</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="clear_rendered_lines-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 464</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">clear_rendered_lines</span>
  <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>.<span class="ruby-identifier">move_cursor_up</span> <span class="ruby-ivar">@rendered_screen</span>.<span class="ruby-identifier">cursor_y</span>
  <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>.<span class="ruby-identifier">move_cursor_column</span> <span class="ruby-value">0</span>

  <span class="ruby-identifier">num_lines</span> = <span class="ruby-ivar">@rendered_screen</span>.<span class="ruby-identifier">lines</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">num_lines</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">num_lines</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">1</span>

  <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>.<span class="ruby-identifier">move_cursor_down</span> <span class="ruby-identifier">num_lines</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
  (<span class="ruby-identifier">num_lines</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">times</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>.<span class="ruby-identifier">erase_after_cursor</span>
    <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>.<span class="ruby-identifier">move_cursor_up</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>.<span class="ruby-identifier">erase_after_cursor</span>
  <span class="ruby-ivar">@rendered_screen</span>.<span class="ruby-identifier">lines</span> = []
  <span class="ruby-ivar">@rendered_screen</span>.<span class="ruby-identifier">cursor_y</span> = <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-clear_screen" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">clear_screen</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-ed_clear_screen">ed_clear_screen</a>
        </div>
      </div>

      <div id="method-i-confirm_multiline_termination" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">confirm_multiline_termination</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="confirm_multiline_termination-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1341</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">confirm_multiline_termination</span>
  <span class="ruby-identifier">temp_buffer</span> = <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">dup</span>
  <span class="ruby-ivar">@confirm_multiline_termination_proc</span>.(<span class="ruby-identifier">temp_buffer</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n&quot;</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;\n&quot;</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-current_byte_pointer_cursor" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">current_byte_pointer_cursor</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="current_byte_pointer_cursor-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 302</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">current_byte_pointer_cursor</span>
  <span class="ruby-identifier">calculate_width</span>(<span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-value">0</span>, <span class="ruby-ivar">@byte_pointer</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-current_line" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">current_line</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="current_line-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1238</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">current_line</span>
  <span class="ruby-ivar">@buffer_of_lines</span>[<span class="ruby-ivar">@line_index</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-delete_char" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">delete_char</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-em_delete">em_delete</a>
        </div>
      </div>

      <div id="method-i-delete_char_or_list" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">delete_char_or_list</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-em_delete_or_list">em_delete_or_list</a>
        </div>
      </div>

      <div id="method-i-delete_text" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">delete_text</span><span
              class="method-args">(start = nil, length = nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="delete_text-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1368</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">delete_text</span>(<span class="ruby-identifier">start</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">length</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">start</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">length</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
      <span class="ruby-ivar">@buffer_of_lines</span>[<span class="ruby-ivar">@line_index</span>] = <span class="ruby-string">&#39;&#39;</span>
      <span class="ruby-ivar">@byte_pointer</span> = <span class="ruby-value">0</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@line_index</span> <span class="ruby-operator">==</span> (<span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>) <span class="ruby-keyword">and</span> <span class="ruby-ivar">@line_index</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
      <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">pop</span>
      <span class="ruby-ivar">@line_index</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
      <span class="ruby-ivar">@byte_pointer</span> = <span class="ruby-value">0</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@line_index</span> <span class="ruby-operator">&lt;</span> (<span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>)
      <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">delete_at</span>(<span class="ruby-ivar">@line_index</span>)
      <span class="ruby-ivar">@byte_pointer</span> = <span class="ruby-value">0</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">start</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword">and</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">length</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_line</span>
      <span class="ruby-identifier">before</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-value">0</span>, <span class="ruby-identifier">start</span>)
      <span class="ruby-identifier">after</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-identifier">start</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">length</span>, <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span>)
      <span class="ruby-identifier">set_current_line</span>(<span class="ruby-identifier">before</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">after</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">start</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Range</span>)
    <span class="ruby-identifier">range</span> = <span class="ruby-identifier">start</span>
    <span class="ruby-identifier">first</span> = <span class="ruby-identifier">range</span>.<span class="ruby-identifier">first</span>
    <span class="ruby-identifier">last</span> = <span class="ruby-identifier">range</span>.<span class="ruby-identifier">last</span>
    <span class="ruby-identifier">last</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">last</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span>
    <span class="ruby-identifier">last</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">last</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">first</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">first</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">range</span> = <span class="ruby-identifier">range</span>.<span class="ruby-identifier">exclude_end?</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">first</span><span class="ruby-operator">...</span><span class="ruby-identifier">last</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">first</span><span class="ruby-operator">..</span><span class="ruby-identifier">last</span>
    <span class="ruby-identifier">line</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytes</span>.<span class="ruby-identifier">reject</span>.<span class="ruby-identifier">with_index</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">c</span>, <span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">range</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">i</span>) }.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">chr</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">ASCII_8BIT</span>) }.<span class="ruby-identifier">join</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-ivar">@encoding</span>)
    <span class="ruby-identifier">set_current_line</span>(<span class="ruby-identifier">line</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">set_current_line</span>(<span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-value">0</span>, <span class="ruby-identifier">start</span>))
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-dialog_proc_scope_completion_journey_data" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">dialog_proc_scope_completion_journey_data</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="dialog_proc_scope_completion_journey_data-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 903</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">dialog_proc_scope_completion_journey_data</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@completion_journey_state</span>
  <span class="ruby-identifier">line_index</span> = <span class="ruby-ivar">@completion_journey_state</span>.<span class="ruby-identifier">line_index</span>
  <span class="ruby-identifier">pre_lines</span> = <span class="ruby-ivar">@buffer_of_lines</span>[<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-identifier">line_index</span>].<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;\n&quot;</span> }
  <span class="ruby-identifier">post_lines</span> = <span class="ruby-ivar">@buffer_of_lines</span>[(<span class="ruby-identifier">line_index</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)<span class="ruby-operator">..</span><span class="ruby-value">-1</span>].<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;\n&quot;</span> }
  <span class="ruby-constant">DialogProcScope</span><span class="ruby-operator">::</span><span class="ruby-constant">CompletionJourneyData</span>.<span class="ruby-identifier">new</span>(
    <span class="ruby-identifier">pre_lines</span>.<span class="ruby-identifier">join</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@completion_journey_state</span>.<span class="ruby-identifier">pre</span>,
    <span class="ruby-ivar">@completion_journey_state</span>.<span class="ruby-identifier">post</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">post_lines</span>.<span class="ruby-identifier">join</span>,
    <span class="ruby-ivar">@completion_journey_state</span>.<span class="ruby-identifier">list</span>,
    <span class="ruby-ivar">@completion_journey_state</span>.<span class="ruby-identifier">pointer</span>
  )
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-downcase_word" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">downcase_word</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-em_lower_case">em_lower_case</a>
        </div>
      </div>

      <div id="method-i-ed_digit" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">ed_digit</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-ed_insert">ed_insert</a>
        </div>
      </div>

      <div id="method-i-editing_mode" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">editing_mode</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="editing_mode-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 805</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">editing_mode</span>
  <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-end_of_line" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">end_of_line</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-ed_move_to_end">ed_move_to_end</a>
        </div>
      </div>

      <div id="method-i-eof-3F" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">eof?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="eof-3F-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 218</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">eof?</span>
  <span class="ruby-ivar">@eof</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-exchange_point_and_mark" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">exchange_point_and_mark</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-em_exchange_mark">em_exchange_mark</a>
        </div>
      </div>

      <div id="method-i-finalize" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">finalize</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="finalize-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 214</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">finalize</span>
  <span class="ruby-constant">Signal</span>.<span class="ruby-identifier">trap</span>(<span class="ruby-string">&#39;INT&#39;</span>, <span class="ruby-ivar">@old_trap</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-finish" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">finish</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="finish-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1418</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">finish</span>
  <span class="ruby-ivar">@finished</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">reset</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-finished-3F" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">finished?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="finished-3F-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1414</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">finished?</span>
  <span class="ruby-ivar">@finished</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-forward_char" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">forward_char</span><span
              class="method-args">(key, arg: 1)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-ed_next_char">ed_next_char</a>
        </div>
      </div>

      <div id="method-i-forward_search_history" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">forward_search_history</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-vi_search_next">vi_search_next</a>
        </div>
      </div>

      <div id="method-i-forward_word" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">forward_word</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-em_next_word">em_next_word</a>
        </div>
      </div>

      <div id="method-i-handle_signal" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">handle_signal</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="handle_signal-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 165</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">handle_signal</span>
  <span class="ruby-identifier">handle_interrupted</span>
  <span class="ruby-identifier">handle_resized</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-history_search_backward" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">history_search_backward</span><span
              class="method-args">(key, arg: 1)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-ed_search_prev_history">ed_search_prev_history</a>
        </div>
      </div>

      <div id="method-i-history_search_forward" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">history_search_forward</span><span
              class="method-args">(key, arg: 1)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-ed_search_next_history">ed_search_next_history</a>
        </div>
      </div>

      <div id="method-i-input_key" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">input_key</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="input_key-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1111</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">input_key</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-identifier">save_old_buffer</span>
  <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">reset_oneshot_key_bindings</span>
  <span class="ruby-ivar">@dialogs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dialog</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">char</span>.<span class="ruby-identifier">instance_of?</span>(<span class="ruby-constant">Symbol</span>) <span class="ruby-keyword">and</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">char</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">name</span>
      <span class="ruby-keyword">return</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">char</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">process_insert</span>(<span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@first_char</span>
      <span class="ruby-ivar">@eof</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">finish</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@first_char</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@completion_occurs</span> = <span class="ruby-keyword">false</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">char</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Symbol</span>)
    <span class="ruby-identifier">process_key</span>(<span class="ruby-identifier">key</span>.<span class="ruby-identifier">char</span>, <span class="ruby-identifier">key</span>.<span class="ruby-identifier">char</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">normal_char</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@completion_occurs</span>
    <span class="ruby-ivar">@completion_state</span> = <span class="ruby-constant">CompletionState</span><span class="ruby-operator">::</span><span class="ruby-constant">NORMAL</span>
    <span class="ruby-ivar">@completion_journey_state</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">push_past_lines</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@undoing</span>
  <span class="ruby-ivar">@undoing</span> = <span class="ruby-keyword">false</span>

  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@in_pasting</span>
    <span class="ruby-identifier">clear_dialogs</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">modified</span> = <span class="ruby-ivar">@old_buffer_of_lines</span> <span class="ruby-operator">!=</span> <span class="ruby-ivar">@buffer_of_lines</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@completion_occurs</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">modified</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@config</span>.<span class="ruby-identifier">disable_completion</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">autocompletion</span>
    <span class="ruby-comment"># Auto complete starts only when edited</span>
    <span class="ruby-identifier">process_insert</span>(<span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>)
    <span class="ruby-ivar">@completion_journey_state</span> = <span class="ruby-identifier">retrieve_completion_journey_state</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">modified</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-insert_pasted_text" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">insert_pasted_text</span><span
              class="method-args">(text)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="insert_pasted_text-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1346</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">insert_pasted_text</span>(<span class="ruby-identifier">text</span>)
  <span class="ruby-identifier">save_old_buffer</span>
  <span class="ruby-identifier">pre</span> = <span class="ruby-ivar">@buffer_of_lines</span>[<span class="ruby-ivar">@line_index</span>].<span class="ruby-identifier">byteslice</span>(<span class="ruby-value">0</span>, <span class="ruby-ivar">@byte_pointer</span>)
  <span class="ruby-identifier">post</span> = <span class="ruby-ivar">@buffer_of_lines</span>[<span class="ruby-ivar">@line_index</span>].<span class="ruby-identifier">byteslice</span>(<span class="ruby-ivar">@byte_pointer</span><span class="ruby-operator">..</span>)
  <span class="ruby-identifier">lines</span> = (<span class="ruby-identifier">pre</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r\n?/</span>, <span class="ruby-string">&quot;\n&quot;</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">post</span>).<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;\n&quot;</span>, <span class="ruby-value">-1</span>)
  <span class="ruby-identifier">lines</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39;&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-ivar">@buffer_of_lines</span>[<span class="ruby-ivar">@line_index</span>, <span class="ruby-value">1</span>] = <span class="ruby-identifier">lines</span>
  <span class="ruby-ivar">@line_index</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
  <span class="ruby-ivar">@byte_pointer</span> = <span class="ruby-ivar">@buffer_of_lines</span>[<span class="ruby-ivar">@line_index</span>].<span class="ruby-identifier">bytesize</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">bytesize</span>
  <span class="ruby-identifier">push_past_lines</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-insert_text" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">insert_text</span><span
              class="method-args">(text)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="insert_text-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1358</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">insert_text</span>(<span class="ruby-identifier">text</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@buffer_of_lines</span>[<span class="ruby-ivar">@line_index</span>].<span class="ruby-identifier">bytesize</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@byte_pointer</span>
    <span class="ruby-ivar">@buffer_of_lines</span>[<span class="ruby-ivar">@line_index</span>] <span class="ruby-operator">+=</span> <span class="ruby-identifier">text</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@buffer_of_lines</span>[<span class="ruby-ivar">@line_index</span>] = <span class="ruby-identifier">byteinsert</span>(<span class="ruby-ivar">@buffer_of_lines</span>[<span class="ruby-ivar">@line_index</span>], <span class="ruby-ivar">@byte_pointer</span>, <span class="ruby-identifier">text</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">bytesize</span>
  <span class="ruby-identifier">process_auto_indent</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-io_gate" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">io_gate</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="io_gate-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 81</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">io_gate</span>
  <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-kill_line" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">kill_line</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-ed_kill_line">ed_kill_line</a>
        </div>
      </div>

      <div id="method-i-kill_whole_line" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">kill_whole_line</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-em_kill_line">em_kill_line</a>
        </div>
      </div>

      <div id="method-i-kill_word" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">kill_word</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-em_delete_next_word">em_delete_next_word</a>
        </div>
      </div>

      <div id="method-i-line" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">line</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="line-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1234</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">line</span>()
  <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">eof?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-modified_lines" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">modified_lines</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="modified_lines-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 349</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">modified_lines</span>
  <span class="ruby-identifier">with_cache</span>(<span class="ruby-identifier">__method__</span>, <span class="ruby-identifier">whole_lines</span>, <span class="ruby-identifier">finished?</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">whole</span>, <span class="ruby-identifier">complete</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">modify_lines</span>(<span class="ruby-identifier">whole</span>, <span class="ruby-identifier">complete</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-multiline_off" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">multiline_off</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="multiline_off-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 271</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">multiline_off</span>
  <span class="ruby-ivar">@is_multiline</span> = <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-multiline_on" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">multiline_on</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="multiline_on-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 267</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">multiline_on</span>
  <span class="ruby-ivar">@is_multiline</span> = <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-next_history" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">next_history</span><span
              class="method-args">(key, arg: 1)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-ed_next_history">ed_next_history</a>
        </div>
      </div>

      <div id="method-i-previous_history" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">previous_history</span><span
              class="method-args">(key, arg: 1)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-ed_prev_history">ed_prev_history</a>
        </div>
      </div>

      <div id="method-i-print_nomultiline_prompt" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">print_nomultiline_prompt</span><span
              class="method-args">(prompt)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="print_nomultiline_prompt-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 490</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">print_nomultiline_prompt</span>(<span class="ruby-identifier">prompt</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">prompt</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@is_multiline</span>

  <span class="ruby-comment"># Readline&#39;s test `TestRelineAsReadline#test_readline` requires first output to be prompt, not cursor reset escape sequence.</span>
  <span class="ruby-ivar">@rendered_screen</span>.<span class="ruby-identifier">lines</span> = [[[<span class="ruby-value">0</span>, <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">calculate_width</span>(<span class="ruby-identifier">prompt</span>, <span class="ruby-keyword">true</span>), <span class="ruby-identifier">prompt</span>]]]
  <span class="ruby-ivar">@rendered_screen</span>.<span class="ruby-identifier">cursor_y</span> = <span class="ruby-value">0</span>
  <span class="ruby-ivar">@output</span>.<span class="ruby-identifier">write</span> <span class="ruby-identifier">prompt</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-prompt_list" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">prompt_list</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="prompt_list-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 355</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">prompt_list</span>
  <span class="ruby-identifier">with_cache</span>(<span class="ruby-identifier">__method__</span>, <span class="ruby-identifier">whole_lines</span>, <span class="ruby-identifier">check_mode_string</span>, <span class="ruby-ivar">@vi_arg</span>, <span class="ruby-ivar">@searching_prompt</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">lines</span>, <span class="ruby-identifier">mode_string</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">check_multiline_prompt</span>(<span class="ruby-identifier">lines</span>, <span class="ruby-identifier">mode_string</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-push_past_lines" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">push_past_lines</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="push_past_lines-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1163</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">push_past_lines</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@old_buffer_of_lines</span> <span class="ruby-operator">!=</span> <span class="ruby-ivar">@buffer_of_lines</span>
    <span class="ruby-ivar">@past_lines</span>.<span class="ruby-identifier">push</span>([<span class="ruby-ivar">@old_buffer_of_lines</span>, <span class="ruby-ivar">@old_byte_pointer</span>, <span class="ruby-ivar">@old_line_index</span>])
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">trim_past_lines</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-quoted_insert" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">quoted_insert</span><span
              class="method-args">(str, arg: 1)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-ed_quoted_insert">ed_quoted_insert</a>
        </div>
      </div>

      <div id="method-i-render_differential" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">render_differential</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="render_differential-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 499</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">render_differential</span>
  <span class="ruby-identifier">wrapped_cursor_x</span>, <span class="ruby-identifier">wrapped_cursor_y</span> = <span class="ruby-identifier">wrapped_cursor_position</span>

  <span class="ruby-identifier">rendered_lines</span> = <span class="ruby-ivar">@rendered_screen</span>.<span class="ruby-identifier">lines</span>
  <span class="ruby-identifier">new_lines</span> = <span class="ruby-identifier">wrapped_prompt_and_input_lines</span>.<span class="ruby-identifier">flatten</span>(<span class="ruby-value">1</span>)[<span class="ruby-identifier">screen_scroll_top</span>, <span class="ruby-identifier">screen_height</span>].<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">prompt</span>, <span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">prompt_width</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">calculate_width</span>(<span class="ruby-identifier">prompt</span>, <span class="ruby-keyword">true</span>)
    [[<span class="ruby-value">0</span>, <span class="ruby-identifier">prompt_width</span>, <span class="ruby-identifier">prompt</span>], [<span class="ruby-identifier">prompt_width</span>, <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">calculate_width</span>(<span class="ruby-identifier">line</span>, <span class="ruby-keyword">true</span>), <span class="ruby-identifier">line</span>]]
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@menu_info</span>
    <span class="ruby-ivar">@menu_info</span>.<span class="ruby-identifier">lines</span>(<span class="ruby-identifier">screen_width</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">item</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">new_lines</span> <span class="ruby-operator">&lt;&lt;</span> [[<span class="ruby-value">0</span>, <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">calculate_width</span>(<span class="ruby-identifier">item</span>), <span class="ruby-identifier">item</span>]]
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@menu_info</span> = <span class="ruby-keyword">nil</span> <span class="ruby-comment"># TODO: do not change state here</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@dialogs</span>.<span class="ruby-identifier">each_with_index</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dialog</span>, <span class="ruby-identifier">index</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">contents</span>

    <span class="ruby-identifier">x_range</span>, <span class="ruby-identifier">y_range</span> = <span class="ruby-identifier">dialog_range</span> <span class="ruby-identifier">dialog</span>, <span class="ruby-identifier">wrapped_cursor_y</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">screen_scroll_top</span>
    <span class="ruby-identifier">y_range</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">row</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">row</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">screen_height</span>
      <span class="ruby-identifier">dialog_rows</span> = <span class="ruby-identifier">new_lines</span>[<span class="ruby-identifier">row</span>] <span class="ruby-operator">||=</span> []
      <span class="ruby-comment"># index 0 is for prompt, index 1 is for line, index 2.. is for dialog</span>
      <span class="ruby-identifier">dialog_rows</span>[<span class="ruby-identifier">index</span> <span class="ruby-operator">+</span> <span class="ruby-value">2</span>] = [<span class="ruby-identifier">x_range</span>.<span class="ruby-identifier">begin</span>, <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">width</span>, <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">contents</span>[<span class="ruby-identifier">row</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">y_range</span>.<span class="ruby-identifier">begin</span>]]
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">cursor_y</span> = <span class="ruby-ivar">@rendered_screen</span>.<span class="ruby-identifier">cursor_y</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">new_lines</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">rendered_lines</span>
    <span class="ruby-comment"># Hide cursor while rendering to avoid cursor flickering.</span>
    <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>.<span class="ruby-identifier">hide_cursor</span>
    <span class="ruby-identifier">num_lines</span> = [[<span class="ruby-identifier">new_lines</span>.<span class="ruby-identifier">size</span>, <span class="ruby-identifier">rendered_lines</span>.<span class="ruby-identifier">size</span>].<span class="ruby-identifier">max</span>, <span class="ruby-identifier">screen_height</span>].<span class="ruby-identifier">min</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@rendered_screen</span>.<span class="ruby-identifier">base_y</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">num_lines</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">screen_height</span>
      <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>.<span class="ruby-identifier">scroll_down</span>(<span class="ruby-identifier">num_lines</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">cursor_y</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>)
      <span class="ruby-ivar">@rendered_screen</span>.<span class="ruby-identifier">base_y</span> = <span class="ruby-identifier">screen_height</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">num_lines</span>
      <span class="ruby-identifier">cursor_y</span> = <span class="ruby-identifier">num_lines</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">num_lines</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">rendered_line</span> = <span class="ruby-identifier">rendered_lines</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">||</span> []
      <span class="ruby-identifier">line_to_render</span> = <span class="ruby-identifier">new_lines</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">||</span> []
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">rendered_line</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">line_to_render</span>

      <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>.<span class="ruby-identifier">move_cursor_down</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">cursor_y</span>
      <span class="ruby-identifier">cursor_y</span> = <span class="ruby-identifier">i</span>
      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">rendered_lines</span>[<span class="ruby-identifier">i</span>]
        <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>.<span class="ruby-identifier">move_cursor_column</span> <span class="ruby-value">0</span>
        <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>.<span class="ruby-identifier">erase_after_cursor</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">render_line_differential</span>(<span class="ruby-identifier">rendered_line</span>, <span class="ruby-identifier">line_to_render</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@rendered_screen</span>.<span class="ruby-identifier">lines</span> = <span class="ruby-identifier">new_lines</span>
    <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>.<span class="ruby-identifier">show_cursor</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">y</span> = <span class="ruby-identifier">wrapped_cursor_y</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">screen_scroll_top</span>
  <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>.<span class="ruby-identifier">move_cursor_column</span> <span class="ruby-identifier">wrapped_cursor_x</span>
  <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>.<span class="ruby-identifier">move_cursor_down</span> <span class="ruby-identifier">y</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">cursor_y</span>
  <span class="ruby-ivar">@rendered_screen</span>.<span class="ruby-identifier">cursor_y</span> = <span class="ruby-identifier">y</span>
  <span class="ruby-identifier">new_lines</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">y</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-render_finished" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">render_finished</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="render_finished-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 459</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">render_finished</span>
  <span class="ruby-identifier">clear_rendered_lines</span>
  <span class="ruby-identifier">render_full_content</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-render_full_content" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">render_full_content</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="render_full_content-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 481</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">render_full_content</span>
  <span class="ruby-identifier">lines</span> = <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">size</span>.<span class="ruby-identifier">times</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">line</span> = <span class="ruby-identifier">prompt_list</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">modified_lines</span>[<span class="ruby-identifier">i</span>]
    <span class="ruby-identifier">wrapped_lines</span>, = <span class="ruby-identifier">split_by_width</span>(<span class="ruby-identifier">line</span>, <span class="ruby-identifier">screen_width</span>)
    <span class="ruby-identifier">wrapped_lines</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">?</span> <span class="ruby-node">&quot;#{line} &quot;</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">line</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@output</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">l</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{l}\r\n&quot;</span> }.<span class="ruby-identifier">join</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-render_line_differential" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">render_line_differential</span><span
              class="method-args">(old_items, new_items)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="render_line_differential-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 404</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">render_line_differential</span>(<span class="ruby-identifier">old_items</span>, <span class="ruby-identifier">new_items</span>)
  <span class="ruby-identifier">old_levels</span> = <span class="ruby-identifier">calculate_overlay_levels</span>(<span class="ruby-identifier">old_items</span>.<span class="ruby-identifier">zip</span>(<span class="ruby-identifier">new_items</span>).<span class="ruby-identifier">each_with_index</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span>((<span class="ruby-identifier">x</span>, <span class="ruby-identifier">w</span>, <span class="ruby-identifier">c</span>), (<span class="ruby-identifier">nx</span>, <span class="ruby-identifier">_nw</span>, <span class="ruby-identifier">nc</span>)), <span class="ruby-identifier">i</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">x</span>, <span class="ruby-identifier">w</span>, <span class="ruby-identifier">c</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">nc</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">x</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">nx</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">:</span> <span class="ruby-value">-1</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">x</span> }.<span class="ruby-identifier">compact</span>)
  <span class="ruby-identifier">new_levels</span> = <span class="ruby-identifier">calculate_overlay_levels</span>(<span class="ruby-identifier">new_items</span>.<span class="ruby-identifier">each_with_index</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span>(<span class="ruby-identifier">x</span>, <span class="ruby-identifier">w</span>), <span class="ruby-identifier">i</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">x</span>, <span class="ruby-identifier">w</span>, <span class="ruby-identifier">i</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">x</span> }.<span class="ruby-identifier">compact</span>).<span class="ruby-identifier">take</span>(<span class="ruby-identifier">screen_width</span>)
  <span class="ruby-identifier">base_x</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">new_levels</span>.<span class="ruby-identifier">zip</span>(<span class="ruby-identifier">old_levels</span>).<span class="ruby-identifier">chunk</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">n</span>, <span class="ruby-identifier">o</span><span class="ruby-operator">|</span> <span class="ruby-identifier">n</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">o</span> <span class="ruby-operator">?</span> <span class="ruby-value">:skip</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">n</span> <span class="ruby-operator">||</span> <span class="ruby-value">:blank</span> }.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">level</span>, <span class="ruby-identifier">chunk</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">width</span> = <span class="ruby-identifier">chunk</span>.<span class="ruby-identifier">size</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">level</span> <span class="ruby-operator">==</span> <span class="ruby-value">:skip</span>
      <span class="ruby-comment"># do nothing</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">level</span> <span class="ruby-operator">==</span> <span class="ruby-value">:blank</span>
      <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>.<span class="ruby-identifier">move_cursor_column</span> <span class="ruby-identifier">base_x</span>
      <span class="ruby-ivar">@output</span>.<span class="ruby-identifier">write</span> <span class="ruby-node">&quot;#{Reline::IOGate::RESET_COLOR}#{&#39; &#39; * width}&quot;</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">x</span>, <span class="ruby-identifier">w</span>, <span class="ruby-identifier">content</span> = <span class="ruby-identifier">new_items</span>[<span class="ruby-identifier">level</span>]
      <span class="ruby-identifier">cover_begin</span> = <span class="ruby-identifier">base_x</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">new_levels</span>[<span class="ruby-identifier">base_x</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">level</span>
      <span class="ruby-identifier">cover_end</span> = <span class="ruby-identifier">new_levels</span>[<span class="ruby-identifier">base_x</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">width</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">level</span>
      <span class="ruby-identifier">pos</span> = <span class="ruby-value">0</span>
      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">x</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">base_x</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">w</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">width</span>
        <span class="ruby-identifier">content</span>, <span class="ruby-identifier">pos</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">take_mbchar_range</span>(<span class="ruby-identifier">content</span>, <span class="ruby-identifier">base_x</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">x</span>, <span class="ruby-identifier">width</span>, <span class="ruby-value">cover_begin:</span> <span class="ruby-identifier">cover_begin</span>, <span class="ruby-value">cover_end:</span> <span class="ruby-identifier">cover_end</span>, <span class="ruby-value">padding:</span> <span class="ruby-keyword">true</span>)
      <span class="ruby-keyword">end</span>
      <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>.<span class="ruby-identifier">move_cursor_column</span> <span class="ruby-identifier">x</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">pos</span>
      <span class="ruby-ivar">@output</span>.<span class="ruby-identifier">write</span> <span class="ruby-node">&quot;#{Reline::IOGate::RESET_COLOR}#{content}#{Reline::IOGate::RESET_COLOR}&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">base_x</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">width</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">old_levels</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">new_levels</span>.<span class="ruby-identifier">size</span>
    <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>.<span class="ruby-identifier">move_cursor_column</span> <span class="ruby-identifier">new_levels</span>.<span class="ruby-identifier">size</span>
    <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>.<span class="ruby-identifier">erase_after_cursor</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-rerender" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">rerender</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="rerender-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 567</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">rerender</span>
  <span class="ruby-identifier">render_differential</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@in_pasting</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-reset" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">reset</span><span
              class="method-args">(prompt = &#39;&#39;, encoding:)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="reset-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 138</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">reset</span>(<span class="ruby-identifier">prompt</span> = <span class="ruby-string">&#39;&#39;</span>, <span class="ruby-value">encoding:</span>)
  <span class="ruby-ivar">@screen_size</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>.<span class="ruby-identifier">get_screen_size</span>
  <span class="ruby-identifier">reset_variables</span>(<span class="ruby-identifier">prompt</span>, <span class="ruby-value">encoding:</span> <span class="ruby-identifier">encoding</span>)
  <span class="ruby-ivar">@rendered_screen</span>.<span class="ruby-identifier">base_y</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>.<span class="ruby-identifier">cursor_pos</span>.<span class="ruby-identifier">y</span>
  <span class="ruby-keyword">if</span> <span class="ruby-constant">ENV</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-string">&#39;RELINE_ALT_SCROLLBAR&#39;</span>)
    <span class="ruby-ivar">@full_block</span> = <span class="ruby-string">&#39;::&#39;</span>
    <span class="ruby-ivar">@upper_half_block</span> = <span class="ruby-string">&quot;&#39;&#39;&quot;</span>
    <span class="ruby-ivar">@lower_half_block</span> = <span class="ruby-string">&#39;..&#39;</span>
    <span class="ruby-ivar">@block_elem_width</span> = <span class="ruby-value">2</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>.<span class="ruby-identifier">win?</span>
    <span class="ruby-ivar">@full_block</span> = <span class="ruby-string">&#39;█&#39;</span>
    <span class="ruby-ivar">@upper_half_block</span> = <span class="ruby-string">&#39;▀&#39;</span>
    <span class="ruby-ivar">@lower_half_block</span> = <span class="ruby-string">&#39;▄&#39;</span>
    <span class="ruby-ivar">@block_elem_width</span> = <span class="ruby-value">1</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@encoding</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UTF_8</span>
    <span class="ruby-ivar">@full_block</span> = <span class="ruby-string">&#39;█&#39;</span>
    <span class="ruby-ivar">@upper_half_block</span> = <span class="ruby-string">&#39;▀&#39;</span>
    <span class="ruby-ivar">@lower_half_block</span> = <span class="ruby-string">&#39;▄&#39;</span>
    <span class="ruby-ivar">@block_elem_width</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">calculate_width</span>(<span class="ruby-string">&#39;█&#39;</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@full_block</span> = <span class="ruby-string">&#39;::&#39;</span>
    <span class="ruby-ivar">@upper_half_block</span> = <span class="ruby-string">&quot;&#39;&#39;&quot;</span>
    <span class="ruby-ivar">@lower_half_block</span> = <span class="ruby-string">&#39;..&#39;</span>
    <span class="ruby-ivar">@block_elem_width</span> = <span class="ruby-value">2</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-reset_line" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">reset_line</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="reset_line-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 258</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">reset_line</span>
  <span class="ruby-ivar">@byte_pointer</span> = <span class="ruby-value">0</span>
  <span class="ruby-ivar">@buffer_of_lines</span> = [<span class="ruby-constant">String</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">encoding:</span> <span class="ruby-ivar">@encoding</span>)]
  <span class="ruby-ivar">@line_index</span> = <span class="ruby-value">0</span>
  <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-ivar">@line_backup_in_history</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@multibyte_buffer</span> = <span class="ruby-constant">String</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">encoding:</span> <span class="ruby-string">&#39;ASCII-8BIT&#39;</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-reset_variables" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">reset_variables</span><span
              class="method-args">(prompt = &#39;&#39;, encoding:)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="reset_variables-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 222</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">reset_variables</span>(<span class="ruby-identifier">prompt</span> = <span class="ruby-string">&#39;&#39;</span>, <span class="ruby-value">encoding:</span>)
  <span class="ruby-ivar">@prompt</span> = <span class="ruby-identifier">prompt</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\n&quot;</span>, <span class="ruby-string">&quot;\\n&quot;</span>)
  <span class="ruby-ivar">@mark_pointer</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@encoding</span> = <span class="ruby-identifier">encoding</span>
  <span class="ruby-ivar">@is_multiline</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@finished</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@history_pointer</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@kill_ring</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">KillRing</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@vi_clipboard</span> = <span class="ruby-string">&#39;&#39;</span>
  <span class="ruby-ivar">@vi_arg</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@waiting_proc</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@vi_waiting_operator</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@vi_waiting_operator_arg</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@completion_journey_state</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@completion_state</span> = <span class="ruby-constant">CompletionState</span><span class="ruby-operator">::</span><span class="ruby-constant">NORMAL</span>
  <span class="ruby-ivar">@perfect_matched</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@menu_info</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@searching_prompt</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@first_char</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-ivar">@just_cursor_moving</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@eof</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@continuous_insertion_buffer</span> = <span class="ruby-constant">String</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">encoding:</span> <span class="ruby-ivar">@encoding</span>)
  <span class="ruby-ivar">@scroll_partial_screen</span> = <span class="ruby-value">0</span>
  <span class="ruby-ivar">@drop_terminate_spaces</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@in_pasting</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@auto_indent_proc</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@dialogs</span> = []
  <span class="ruby-ivar">@interrupted</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@resized</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@cache</span> = {}
  <span class="ruby-ivar">@rendered_screen</span> = <span class="ruby-constant">RenderedScreen</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">base_y:</span> <span class="ruby-value">0</span>, <span class="ruby-value">lines:</span> [], <span class="ruby-value">cursor_y:</span> <span class="ruby-value">0</span>)
  <span class="ruby-ivar">@past_lines</span> = []
  <span class="ruby-ivar">@undoing</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">reset_line</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-rest_height" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">rest_height</span><span
              class="method-args">(wrapped_cursor_y)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="rest_height-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 563</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">rest_height</span>(<span class="ruby-identifier">wrapped_cursor_y</span>)
  <span class="ruby-identifier">screen_height</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">wrapped_cursor_y</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">screen_scroll_top</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@rendered_screen</span>.<span class="ruby-identifier">base_y</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-retrieve_completion_block" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">retrieve_completion_block</span><span
              class="method-args">(set_completion_quote_character = false)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="retrieve_completion_block-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1265</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">retrieve_completion_block</span>(<span class="ruby-identifier">set_completion_quote_character</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-constant">Reline</span>.<span class="ruby-identifier">completer_word_break_characters</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">word_break_regexp</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">word_break_regexp</span> = <span class="ruby-regexp">/\A[#{Regexp.escape(Reline.completer_word_break_characters)}]/</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-constant">Reline</span>.<span class="ruby-identifier">completer_quote_characters</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">quote_characters_regexp</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">quote_characters_regexp</span> = <span class="ruby-regexp">/\A[#{Regexp.escape(Reline.completer_quote_characters)}]/</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">before</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-value">0</span>, <span class="ruby-ivar">@byte_pointer</span>)
  <span class="ruby-identifier">rest</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">break_pointer</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">quote</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">closing_quote</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">escaped_quote</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">i</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">while</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;</span> <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">slice</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-identifier">i</span>, <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">i</span>)
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">slice</span>.<span class="ruby-identifier">valid_encoding?</span>
      <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
      <span class="ruby-keyword">next</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">quote</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">slice</span>.<span class="ruby-identifier">start_with?</span>(<span class="ruby-identifier">closing_quote</span>)
      <span class="ruby-identifier">quote</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
      <span class="ruby-identifier">rest</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">quote</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">slice</span>.<span class="ruby-identifier">start_with?</span>(<span class="ruby-identifier">escaped_quote</span>)
      <span class="ruby-comment"># skip</span>
      <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">2</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">quote_characters_regexp</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">slice</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">quote_characters_regexp</span> <span class="ruby-comment"># find new &quot;</span>
      <span class="ruby-identifier">rest</span> = <span class="ruby-node">$&#39;</span>
      <span class="ruby-identifier">quote</span> = <span class="ruby-node">$&amp;</span>
      <span class="ruby-identifier">closing_quote</span> = <span class="ruby-regexp">/(?!\\)#{Regexp.escape(quote)}/</span>
      <span class="ruby-identifier">escaped_quote</span> = <span class="ruby-regexp">/\\#{Regexp.escape(quote)}/</span>
      <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
      <span class="ruby-identifier">break_pointer</span> = <span class="ruby-identifier">i</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">word_break_regexp</span> <span class="ruby-keyword">and</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">quote</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">slice</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">word_break_regexp</span>
      <span class="ruby-identifier">rest</span> = <span class="ruby-node">$&#39;</span>
      <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
      <span class="ruby-identifier">before</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-identifier">i</span>, <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">i</span>)
      <span class="ruby-identifier">break_pointer</span> = <span class="ruby-identifier">i</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">postposing</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-ivar">@byte_pointer</span>, <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@byte_pointer</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">rest</span>
    <span class="ruby-identifier">preposing</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-value">0</span>, <span class="ruby-identifier">break_pointer</span>)
    <span class="ruby-identifier">target</span> = <span class="ruby-identifier">rest</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">set_completion_quote_character</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">quote</span>
      <span class="ruby-constant">Reline</span>.<span class="ruby-identifier">core</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value">:@completion_quote_character</span>, <span class="ruby-identifier">quote</span>)
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">postposing</span> <span class="ruby-operator">!~</span> <span class="ruby-regexp">/(?!\\)#{Regexp.escape(quote)}/</span> <span class="ruby-comment"># closing quote</span>
        <span class="ruby-identifier">insert_text</span>(<span class="ruby-identifier">quote</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">preposing</span> = <span class="ruby-string">&#39;&#39;</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">break_pointer</span>
      <span class="ruby-identifier">preposing</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-value">0</span>, <span class="ruby-identifier">break_pointer</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">preposing</span> = <span class="ruby-string">&#39;&#39;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">target</span> = <span class="ruby-identifier">before</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">lines</span> = <span class="ruby-identifier">whole_lines</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@line_index</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">preposing</span> = <span class="ruby-identifier">lines</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span>(<span class="ruby-ivar">@line_index</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>)].<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n&quot;</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;\n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">preposing</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> (<span class="ruby-identifier">lines</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>) <span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@line_index</span>
    <span class="ruby-identifier">postposing</span> = <span class="ruby-identifier">postposing</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;\n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">lines</span>[(<span class="ruby-ivar">@line_index</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)<span class="ruby-operator">..</span><span class="ruby-value">-1</span>].<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n&quot;</span>)
  <span class="ruby-keyword">end</span>
  [<span class="ruby-identifier">preposing</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-ivar">@encoding</span>), <span class="ruby-identifier">target</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-ivar">@encoding</span>), <span class="ruby-identifier">postposing</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-ivar">@encoding</span>)]
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-reverse_search_history" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">reverse_search_history</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-vi_search_prev">vi_search_prev</a>
        </div>
      </div>

      <div id="method-i-save_old_buffer" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">save_old_buffer</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="save_old_buffer-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1157</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">save_old_buffer</span>
  <span class="ruby-ivar">@old_buffer_of_lines</span> = <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">dup</span>
  <span class="ruby-ivar">@old_byte_pointer</span> = <span class="ruby-ivar">@byte_pointer</span>.<span class="ruby-identifier">dup</span>
  <span class="ruby-ivar">@old_line_index</span> = <span class="ruby-ivar">@line_index</span>.<span class="ruby-identifier">dup</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-screen_height" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">screen_height</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="screen_height-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 361</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">screen_height</span>
  <span class="ruby-ivar">@screen_size</span>.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-screen_scroll_top" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">screen_scroll_top</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="screen_scroll_top-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 369</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">screen_scroll_top</span>
  <span class="ruby-ivar">@scroll_partial_screen</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-screen_width" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">screen_width</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="screen_width-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 365</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">screen_width</span>
  <span class="ruby-ivar">@screen_size</span>.<span class="ruby-identifier">last</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-scroll_into_view" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">scroll_into_view</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="scroll_into_view-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1177</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">scroll_into_view</span>
  <span class="ruby-identifier">_wrapped_cursor_x</span>, <span class="ruby-identifier">wrapped_cursor_y</span> = <span class="ruby-identifier">wrapped_cursor_position</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">wrapped_cursor_y</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">screen_scroll_top</span>
    <span class="ruby-ivar">@scroll_partial_screen</span> = <span class="ruby-identifier">wrapped_cursor_y</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">wrapped_cursor_y</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">screen_scroll_top</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">screen_height</span>
    <span class="ruby-ivar">@scroll_partial_screen</span> = <span class="ruby-identifier">wrapped_cursor_y</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">screen_height</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-self_insert" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">self_insert</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-ed_insert">ed_insert</a>
        </div>
      </div>

      <div id="method-i-set_current_line" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">set_current_line</span><span
              class="method-args">(line, byte_pointer = nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="set_current_line-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1242</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">set_current_line</span>(<span class="ruby-identifier">line</span>, <span class="ruby-identifier">byte_pointer</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">cursor</span> = <span class="ruby-identifier">current_byte_pointer_cursor</span>
  <span class="ruby-ivar">@buffer_of_lines</span>[<span class="ruby-ivar">@line_index</span>] = <span class="ruby-identifier">line</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">byte_pointer</span>
    <span class="ruby-ivar">@byte_pointer</span> = <span class="ruby-identifier">byte_pointer</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">calculate_nearest_cursor</span>(<span class="ruby-identifier">cursor</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">process_auto_indent</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-set_current_lines" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">set_current_lines</span><span
              class="method-args">(lines, byte_pointer = nil, line_index = 0)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="set_current_lines-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1253</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">set_current_lines</span>(<span class="ruby-identifier">lines</span>, <span class="ruby-identifier">byte_pointer</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">line_index</span> = <span class="ruby-value">0</span>)
  <span class="ruby-identifier">cursor</span> = <span class="ruby-identifier">current_byte_pointer_cursor</span>
  <span class="ruby-ivar">@buffer_of_lines</span> = <span class="ruby-identifier">lines</span>
  <span class="ruby-ivar">@line_index</span> = <span class="ruby-identifier">line_index</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">byte_pointer</span>
    <span class="ruby-ivar">@byte_pointer</span> = <span class="ruby-identifier">byte_pointer</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">calculate_nearest_cursor</span>(<span class="ruby-identifier">cursor</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">process_auto_indent</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-set_mark" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">set_mark</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-em_set_mark">em_set_mark</a>
        </div>
      </div>

      <div id="method-i-set_pasting_state" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">set_pasting_state</span><span
              class="method-args">(in_pasting)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="set_pasting_state-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 85</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">set_pasting_state</span>(<span class="ruby-identifier">in_pasting</span>)
  <span class="ruby-comment"># While pasting, text to be inserted is stored to @continuous_insertion_buffer.</span>
  <span class="ruby-comment"># After pasting, this buffer should be force inserted.</span>
  <span class="ruby-identifier">process_insert</span>(<span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@in_pasting</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">in_pasting</span>
  <span class="ruby-ivar">@in_pasting</span> = <span class="ruby-identifier">in_pasting</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-set_signal_handlers" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">set_signal_handlers</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="set_signal_handlers-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 205</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">set_signal_handlers</span>
  <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>.<span class="ruby-identifier">set_winch_handler</span> <span class="ruby-keyword">do</span>
    <span class="ruby-ivar">@resized</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@old_trap</span> = <span class="ruby-constant">Signal</span>.<span class="ruby-identifier">trap</span>(<span class="ruby-string">&#39;INT&#39;</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-ivar">@interrupted</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-transpose_chars" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">transpose_chars</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-ed_transpose_chars">ed_transpose_chars</a>
        </div>
      </div>

      <div id="method-i-transpose_words" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">transpose_words</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-ed_transpose_words">ed_transpose_words</a>
        </div>
      </div>

      <div id="method-i-trim_past_lines" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">trim_past_lines</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="trim_past_lines-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1171</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">trim_past_lines</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@past_lines</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-constant">MAX_PAST_LINES</span>
    <span class="ruby-ivar">@past_lines</span>.<span class="ruby-identifier">shift</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-unix_line_discard" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">unix_line_discard</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-vi_kill_line_prev">vi_kill_line_prev</a>
        </div>
      </div>

      <div id="method-i-unix_word_rubout" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">unix_word_rubout</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-em_kill_region">em_kill_region</a>
        </div>
      </div>

      <div id="method-i-upcase_word" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">upcase_word</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-em_upper_case">em_upper_case</a>
        </div>
      </div>

      <div id="method-i-update" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">update</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="update-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1101</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">update</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-identifier">modified</span> = <span class="ruby-identifier">input_key</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@in_pasting</span>
    <span class="ruby-identifier">scroll_into_view</span>
    <span class="ruby-ivar">@just_cursor_moving</span> = <span class="ruby-operator">!</span><span class="ruby-identifier">modified</span>
    <span class="ruby-identifier">update_dialogs</span>(<span class="ruby-identifier">key</span>)
    <span class="ruby-ivar">@just_cursor_moving</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-update_dialogs" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">update_dialogs</span><span
              class="method-args">(key = nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="update_dialogs-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 451</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">update_dialogs</span>(<span class="ruby-identifier">key</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">wrapped_cursor_x</span>, <span class="ruby-identifier">wrapped_cursor_y</span> = <span class="ruby-identifier">wrapped_cursor_position</span>
  <span class="ruby-ivar">@dialogs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dialog</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">trap_key</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-identifier">update_each_dialog</span>(<span class="ruby-identifier">dialog</span>, <span class="ruby-identifier">wrapped_cursor_x</span>, <span class="ruby-identifier">wrapped_cursor_y</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">screen_scroll_top</span>, <span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-upper_space_height" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">upper_space_height</span><span
              class="method-args">(wrapped_cursor_y)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="upper_space_height-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 559</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">upper_space_height</span>(<span class="ruby-identifier">wrapped_cursor_y</span>)
  <span class="ruby-identifier">wrapped_cursor_y</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">screen_scroll_top</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_end_of_transmission" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_end_of_transmission</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-vi_list_or_eof">vi_list_or_eof</a>
        </div>
      </div>

      <div id="method-i-vi_eof_maybe" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_eof_maybe</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-vi_list_or_eof">vi_list_or_eof</a>
        </div>
      </div>

      <div id="method-i-vi_movement_mode" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_movement_mode</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-vi_command_mode">vi_command_mode</a>
        </div>
      </div>

      <div id="method-i-vi_zero" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_zero</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-ed_move_to_beg">ed_move_to_beg</a>
        </div>
      </div>

      <div id="method-i-whole_buffer" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">whole_buffer</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="whole_buffer-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1410</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">whole_buffer</span>
  <span class="ruby-identifier">whole_lines</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n&quot;</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-whole_lines" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">whole_lines</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="whole_lines-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1406</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">whole_lines</span>
  <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">dup</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-with_cache" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">with_cache</span><span
              class="method-args">(key, *deps) { |*deps, cached_deps, value| ... }</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="with_cache-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 341</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">with_cache</span>(<span class="ruby-identifier">key</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">deps</span>)
  <span class="ruby-identifier">cached_deps</span>, <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@cache</span>[<span class="ruby-identifier">key</span>]
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">cached_deps</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">deps</span>
    <span class="ruby-ivar">@cache</span>[<span class="ruby-identifier">key</span>] = [<span class="ruby-identifier">deps</span>, <span class="ruby-identifier">value</span> = <span class="ruby-keyword">yield</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">deps</span>, <span class="ruby-identifier">cached_deps</span>, <span class="ruby-identifier">value</span>)]
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">value</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-wrap_method_call" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">wrap_method_call</span><span
              class="method-args">(method_symbol, method_obj, key, with_operator = false)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="wrap_method_call-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 977</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">wrap_method_call</span>(<span class="ruby-identifier">method_symbol</span>, <span class="ruby-identifier">method_obj</span>, <span class="ruby-identifier">key</span>, <span class="ruby-identifier">with_operator</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode_is?</span>(<span class="ruby-value">:emacs</span>, <span class="ruby-value">:vi_insert</span>) <span class="ruby-keyword">and</span> <span class="ruby-ivar">@vi_waiting_operator</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">not_insertion</span> = <span class="ruby-identifier">method_symbol</span> <span class="ruby-operator">!=</span> <span class="ruby-value">:ed_insert</span>
    <span class="ruby-identifier">process_insert</span>(<span class="ruby-value">force:</span> <span class="ruby-identifier">not_insertion</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@vi_arg</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">argumentable?</span>(<span class="ruby-identifier">method_obj</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">with_operator</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">inclusive?</span>(<span class="ruby-identifier">method_obj</span>)
      <span class="ruby-identifier">method_obj</span>.(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-ivar">@vi_arg</span>, <span class="ruby-value">inclusive:</span> <span class="ruby-keyword">true</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">method_obj</span>.(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-ivar">@vi_arg</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">with_operator</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">inclusive?</span>(<span class="ruby-identifier">method_obj</span>)
      <span class="ruby-identifier">method_obj</span>.(<span class="ruby-identifier">key</span>, <span class="ruby-value">inclusive:</span> <span class="ruby-keyword">true</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">method_obj</span>.(<span class="ruby-identifier">key</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-wrapped_cursor_position" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">wrapped_cursor_position</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>Calculate cursor position in word wrapped content.</p>

          <div class="method-source-code" id="wrapped_cursor_position-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 435</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">wrapped_cursor_position</span>
  <span class="ruby-identifier">prompt_width</span> = <span class="ruby-identifier">calculate_width</span>(<span class="ruby-identifier">prompt_list</span>[<span class="ruby-ivar">@line_index</span>], <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">line_before_cursor</span> = <span class="ruby-identifier">whole_lines</span>[<span class="ruby-ivar">@line_index</span>].<span class="ruby-identifier">byteslice</span>(<span class="ruby-value">0</span>, <span class="ruby-ivar">@byte_pointer</span>)
  <span class="ruby-identifier">wrapped_line_before_cursor</span> = <span class="ruby-identifier">split_by_width</span>(<span class="ruby-string">&#39; &#39;</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">prompt_width</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">line_before_cursor</span>, <span class="ruby-identifier">screen_width</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">compact</span>
  <span class="ruby-identifier">wrapped_cursor_y</span> = <span class="ruby-identifier">wrapped_prompt_and_input_lines</span>[<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-ivar">@line_index</span>].<span class="ruby-identifier">sum</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:size</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">wrapped_line_before_cursor</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">wrapped_cursor_x</span> = <span class="ruby-identifier">calculate_width</span>(<span class="ruby-identifier">wrapped_line_before_cursor</span>.<span class="ruby-identifier">last</span>)
  [<span class="ruby-identifier">wrapped_cursor_x</span>, <span class="ruby-identifier">wrapped_cursor_y</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-wrapped_prompt_and_input_lines" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">wrapped_prompt_and_input_lines</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="wrapped_prompt_and_input_lines-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 373</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">wrapped_prompt_and_input_lines</span>
  <span class="ruby-identifier">with_cache</span>(<span class="ruby-identifier">__method__</span>, <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">size</span>, <span class="ruby-identifier">modified_lines</span>, <span class="ruby-identifier">prompt_list</span>, <span class="ruby-identifier">screen_width</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">n</span>, <span class="ruby-identifier">lines</span>, <span class="ruby-identifier">prompts</span>, <span class="ruby-identifier">width</span>, <span class="ruby-identifier">prev_cache_key</span>, <span class="ruby-identifier">cached_value</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">prev_n</span>, <span class="ruby-identifier">prev_lines</span>, <span class="ruby-identifier">prev_prompts</span>, <span class="ruby-identifier">prev_width</span> = <span class="ruby-identifier">prev_cache_key</span>
    <span class="ruby-identifier">cached_wraps</span> = {}
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">prev_width</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">width</span>
      <span class="ruby-identifier">prev_n</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">cached_wraps</span>[[<span class="ruby-identifier">prev_prompts</span>[<span class="ruby-identifier">i</span>], <span class="ruby-identifier">prev_lines</span>[<span class="ruby-identifier">i</span>]]] = <span class="ruby-identifier">cached_value</span>[<span class="ruby-identifier">i</span>]
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">n</span>.<span class="ruby-identifier">times</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">prompt</span> = <span class="ruby-identifier">prompts</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">||</span> <span class="ruby-string">&#39;&#39;</span>
      <span class="ruby-identifier">line</span> = <span class="ruby-identifier">lines</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">||</span> <span class="ruby-string">&#39;&#39;</span>
      <span class="ruby-keyword">if</span> (<span class="ruby-identifier">cached</span> = <span class="ruby-identifier">cached_wraps</span>[[<span class="ruby-identifier">prompt</span>, <span class="ruby-identifier">line</span>]])
        <span class="ruby-keyword">next</span> <span class="ruby-identifier">cached</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-operator">*</span><span class="ruby-identifier">wrapped_prompts</span>, <span class="ruby-identifier">code_line_prompt</span> = <span class="ruby-identifier">split_by_width</span>(<span class="ruby-identifier">prompt</span>, <span class="ruby-identifier">width</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">compact</span>
      <span class="ruby-identifier">wrapped_lines</span> = <span class="ruby-identifier">split_by_width</span>(<span class="ruby-identifier">line</span>, <span class="ruby-identifier">width</span>, <span class="ruby-value">offset:</span> <span class="ruby-identifier">calculate_width</span>(<span class="ruby-identifier">code_line_prompt</span>, <span class="ruby-keyword">true</span>)).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">compact</span>
      <span class="ruby-identifier">wrapped_prompts</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">p</span>, <span class="ruby-string">&#39;&#39;</span>] } <span class="ruby-operator">+</span> [[<span class="ruby-identifier">code_line_prompt</span>, <span class="ruby-identifier">wrapped_lines</span>.<span class="ruby-identifier">first</span>]] <span class="ruby-operator">+</span> <span class="ruby-identifier">wrapped_lines</span>.<span class="ruby-identifier">drop</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> [<span class="ruby-string">&#39;&#39;</span>, <span class="ruby-identifier">c</span>] }
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-yank" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">yank</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-em_yank">em_yank</a>
        </div>
      </div>

      <div id="method-i-yank_pop" class="method-detail method-alias">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">yank_pop</span><span
              class="method-args">(key)</span>
          </div>
        </div>

        <div class="method-description">
          

        </div>


        <div class="aliases">
          Alias for: <a href="LineEditor.html#method-i-em_yank_pop">em_yank_pop</a>
        </div>
      </div>

    </section>

     <section id="private-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Private Instance Methods</h3>
       </header>

      <div id="method-i-argumentable-3F" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">argumentable?</span><span
              class="method-args">(method_obj)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="argumentable-3F-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 967</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">argumentable?</span>(<span class="ruby-identifier">method_obj</span>)
  <span class="ruby-identifier">method_obj</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">method_obj</span>.<span class="ruby-identifier">parameters</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">param</span><span class="ruby-operator">|</span> <span class="ruby-identifier">param</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:key</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">param</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:arg</span> }
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-byteinsert" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">byteinsert</span><span
              class="method-args">(str, byte_pointer, other)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="byteinsert-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1429</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">byteinsert</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">byte_pointer</span>, <span class="ruby-identifier">other</span>)
  <span class="ruby-identifier">new_str</span> = <span class="ruby-identifier">str</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-value">0</span>, <span class="ruby-identifier">byte_pointer</span>)
  <span class="ruby-identifier">new_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">other</span>
  <span class="ruby-identifier">new_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-identifier">byte_pointer</span>, <span class="ruby-identifier">str</span>.<span class="ruby-identifier">bytesize</span>)
  <span class="ruby-identifier">new_str</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-byteslice-21" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">byteslice!</span><span
              class="method-args">(str, byte_pointer, size)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="byteslice-21-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1423</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">byteslice!</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">byte_pointer</span>, <span class="ruby-identifier">size</span>)
  <span class="ruby-identifier">new_str</span> = <span class="ruby-identifier">str</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-value">0</span>, <span class="ruby-identifier">byte_pointer</span>)
  <span class="ruby-identifier">new_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-identifier">byte_pointer</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">size</span>, <span class="ruby-identifier">str</span>.<span class="ruby-identifier">bytesize</span>)
  [<span class="ruby-identifier">new_str</span>, <span class="ruby-identifier">str</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-identifier">byte_pointer</span>, <span class="ruby-identifier">size</span>)]
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-calculate_nearest_cursor" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">calculate_nearest_cursor</span><span
              class="method-args">(cursor)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="calculate_nearest_cursor-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 306</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">calculate_nearest_cursor</span>(<span class="ruby-identifier">cursor</span>)
  <span class="ruby-identifier">line_to_calc</span> = <span class="ruby-identifier">current_line</span>
  <span class="ruby-identifier">new_cursor_max</span> = <span class="ruby-identifier">calculate_width</span>(<span class="ruby-identifier">line_to_calc</span>)
  <span class="ruby-identifier">new_cursor</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">new_byte_pointer</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">height</span> = <span class="ruby-value">1</span>
  <span class="ruby-identifier">max_width</span> = <span class="ruby-identifier">screen_width</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode_is?</span>(<span class="ruby-value">:vi_command</span>)
    <span class="ruby-identifier">last_byte_size</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">get_prev_mbchar_size</span>(<span class="ruby-identifier">line_to_calc</span>, <span class="ruby-identifier">line_to_calc</span>.<span class="ruby-identifier">bytesize</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">last_byte_size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">last_mbchar</span> = <span class="ruby-identifier">line_to_calc</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-identifier">line_to_calc</span>.<span class="ruby-identifier">bytesize</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">last_byte_size</span>, <span class="ruby-identifier">last_byte_size</span>)
      <span class="ruby-identifier">last_width</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">get_mbchar_width</span>(<span class="ruby-identifier">last_mbchar</span>)
      <span class="ruby-identifier">end_of_line_cursor</span> = <span class="ruby-identifier">new_cursor_max</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">last_width</span>
    <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">end_of_line_cursor</span> = <span class="ruby-identifier">new_cursor_max</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
  <span class="ruby-identifier">end_of_line_cursor</span> = <span class="ruby-identifier">new_cursor_max</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">line_to_calc</span>.<span class="ruby-identifier">grapheme_clusters</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">gc</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">mbchar</span> = <span class="ruby-identifier">gc</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UTF_8</span>)
    <span class="ruby-identifier">mbchar_width</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">get_mbchar_width</span>(<span class="ruby-identifier">mbchar</span>)
    <span class="ruby-identifier">now</span> = <span class="ruby-identifier">new_cursor</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">mbchar_width</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">now</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">end_of_line_cursor</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">now</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">cursor</span>
      <span class="ruby-keyword">break</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">new_cursor</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">mbchar_width</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">new_cursor</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">max_width</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">height</span>
      <span class="ruby-identifier">height</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">new_byte_pointer</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">gc</span>.<span class="ruby-identifier">bytesize</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@byte_pointer</span> = <span class="ruby-identifier">new_byte_pointer</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-calculate_width" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">calculate_width</span><span
              class="method-args">(str, allow_escape_code = false)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="calculate_width-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1436</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">calculate_width</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">allow_escape_code</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">calculate_width</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">allow_escape_code</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-check_mode_string" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">check_mode_string</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="check_mode_string-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 92</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">check_mode_string</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">show_mode_in_prompt</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode_is?</span>(<span class="ruby-value">:vi_command</span>)
      <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">vi_cmd_mode_string</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode_is?</span>(<span class="ruby-value">:vi_insert</span>)
      <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">vi_ins_mode_string</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode_is?</span>(<span class="ruby-value">:emacs</span>)
      <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">emacs_mode_string</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-string">&#39;?&#39;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-check_multiline_prompt" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">check_multiline_prompt</span><span
              class="method-args">(buffer, mode_string)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="check_multiline_prompt-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 106</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">check_multiline_prompt</span>(<span class="ruby-identifier">buffer</span>, <span class="ruby-identifier">mode_string</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@vi_arg</span>
    <span class="ruby-identifier">prompt</span> = <span class="ruby-node">&quot;(arg: #{@vi_arg}) &quot;</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@searching_prompt</span>
    <span class="ruby-identifier">prompt</span> = <span class="ruby-ivar">@searching_prompt</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">prompt</span> = <span class="ruby-ivar">@prompt</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@is_multiline</span>
    <span class="ruby-identifier">mode_string</span> = <span class="ruby-identifier">check_mode_string</span>
    <span class="ruby-identifier">prompt</span> = <span class="ruby-identifier">mode_string</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">prompt</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">mode_string</span>
    [<span class="ruby-identifier">prompt</span>] <span class="ruby-operator">+</span> [<span class="ruby-string">&#39;&#39;</span>] <span class="ruby-operator">*</span> (<span class="ruby-identifier">buffer</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>)
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@prompt_proc</span>
    <span class="ruby-identifier">prompt_list</span> = <span class="ruby-ivar">@prompt_proc</span>.(<span class="ruby-identifier">buffer</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">pr</span><span class="ruby-operator">|</span> <span class="ruby-identifier">pr</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\n&quot;</span>, <span class="ruby-string">&quot;\\n&quot;</span>) }
    <span class="ruby-identifier">prompt_list</span>.<span class="ruby-identifier">map!</span>{ <span class="ruby-identifier">prompt</span> } <span class="ruby-keyword">if</span> <span class="ruby-ivar">@vi_arg</span> <span class="ruby-keyword">or</span> <span class="ruby-ivar">@searching_prompt</span>
    <span class="ruby-identifier">prompt_list</span> = [<span class="ruby-identifier">prompt</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">prompt_list</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">prompt_list</span> = <span class="ruby-identifier">prompt_list</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">pr</span><span class="ruby-operator">|</span> <span class="ruby-identifier">mode_string</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">pr</span> } <span class="ruby-keyword">if</span> <span class="ruby-identifier">mode_string</span>
    <span class="ruby-identifier">prompt</span> = <span class="ruby-identifier">prompt_list</span>[<span class="ruby-ivar">@line_index</span>]
    <span class="ruby-identifier">prompt</span> = <span class="ruby-identifier">prompt_list</span>[<span class="ruby-value">0</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">prompt</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">prompt</span> = <span class="ruby-identifier">prompt_list</span>.<span class="ruby-identifier">last</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">prompt</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">buffer</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">prompt_list</span>.<span class="ruby-identifier">size</span>
      (<span class="ruby-identifier">buffer</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">prompt_list</span>.<span class="ruby-identifier">size</span>).<span class="ruby-identifier">times</span> <span class="ruby-keyword">do</span>
        <span class="ruby-identifier">prompt_list</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">prompt_list</span>.<span class="ruby-identifier">last</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">prompt_list</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">prompt</span> = <span class="ruby-identifier">mode_string</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">prompt</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">mode_string</span>
    [<span class="ruby-identifier">prompt</span>] <span class="ruby-operator">*</span> <span class="ruby-identifier">buffer</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-cleanup_waiting" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">cleanup_waiting</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="cleanup_waiting-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 997</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">cleanup_waiting</span>
  <span class="ruby-ivar">@waiting_proc</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@vi_waiting_operator</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@vi_waiting_operator_arg</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@searching_prompt</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@drop_terminate_spaces</span> = <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-complete" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">complete</span><span
              class="method-args">(_key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="complete-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1456</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">complete</span>(<span class="ruby-identifier">_key</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">disable_completion</span>

  <span class="ruby-identifier">process_insert</span>(<span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">autocompletion</span>
    <span class="ruby-ivar">@completion_state</span> = <span class="ruby-constant">CompletionState</span><span class="ruby-operator">::</span><span class="ruby-constant">NORMAL</span>
    <span class="ruby-ivar">@completion_occurs</span> = <span class="ruby-identifier">move_completed_list</span>(<span class="ruby-value">:down</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@completion_journey_state</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-identifier">result</span> = <span class="ruby-identifier">call_completion_proc</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
      <span class="ruby-ivar">@completion_occurs</span> = <span class="ruby-keyword">true</span>
      <span class="ruby-identifier">perform_completion</span>(<span class="ruby-identifier">result</span>, <span class="ruby-keyword">false</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-complete_internal_proc" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">complete_internal_proc</span><span
              class="method-args">(list, is_menu)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="complete_internal_proc-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 813</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">complete_internal_proc</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">is_menu</span>)
  <span class="ruby-identifier">preposing</span>, <span class="ruby-identifier">target</span>, <span class="ruby-identifier">postposing</span> = <span class="ruby-identifier">retrieve_completion_block</span>
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">list</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword">and</span> <span class="ruby-keyword">not</span> <span class="ruby-constant">Encoding</span>.<span class="ruby-identifier">compatible?</span>(<span class="ruby-identifier">target</span>.<span class="ruby-identifier">encoding</span>, <span class="ruby-identifier">i</span>.<span class="ruby-identifier">encoding</span>)
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">CompatibilityError</span>, <span class="ruby-node">&quot;#{target.encoding.name} is not compatible with #{i.encoding.name}&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">completion_ignore_case</span>
      <span class="ruby-identifier">i</span>&amp;.<span class="ruby-identifier">downcase</span>&amp;.<span class="ruby-identifier">start_with?</span>(<span class="ruby-identifier">target</span>.<span class="ruby-identifier">downcase</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">i</span>&amp;.<span class="ruby-identifier">start_with?</span>(<span class="ruby-identifier">target</span>)
    <span class="ruby-keyword">end</span>
  }.<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">is_menu</span>
    <span class="ruby-identifier">menu</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">list</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">completed</span> = <span class="ruby-identifier">list</span>.<span class="ruby-identifier">inject</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">memo</span>, <span class="ruby-identifier">item</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">memo_mbchars</span> = <span class="ruby-identifier">memo</span>.<span class="ruby-identifier">unicode_normalize</span>.<span class="ruby-identifier">grapheme_clusters</span>
      <span class="ruby-identifier">item_mbchars</span> = <span class="ruby-identifier">item</span>.<span class="ruby-identifier">unicode_normalize</span>.<span class="ruby-identifier">grapheme_clusters</span>
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">CompatibilityError</span>
      <span class="ruby-identifier">memo_mbchars</span> = <span class="ruby-identifier">memo</span>.<span class="ruby-identifier">grapheme_clusters</span>
      <span class="ruby-identifier">item_mbchars</span> = <span class="ruby-identifier">item</span>.<span class="ruby-identifier">grapheme_clusters</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">size</span> = [<span class="ruby-identifier">memo_mbchars</span>.<span class="ruby-identifier">size</span>, <span class="ruby-identifier">item_mbchars</span>.<span class="ruby-identifier">size</span>].<span class="ruby-identifier">min</span>
    <span class="ruby-identifier">result</span> = <span class="ruby-string">+&#39;&#39;</span>
    <span class="ruby-identifier">size</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">completion_ignore_case</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">memo_mbchars</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">casecmp?</span>(<span class="ruby-identifier">item_mbchars</span>[<span class="ruby-identifier">i</span>])
          <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">memo_mbchars</span>[<span class="ruby-identifier">i</span>]
        <span class="ruby-keyword">else</span>
          <span class="ruby-keyword">break</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">memo_mbchars</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">item_mbchars</span>[<span class="ruby-identifier">i</span>]
          <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">memo_mbchars</span>[<span class="ruby-identifier">i</span>]
        <span class="ruby-keyword">else</span>
          <span class="ruby-keyword">break</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">result</span>
  }
  [<span class="ruby-identifier">target</span>, <span class="ruby-identifier">preposing</span>, <span class="ruby-identifier">completed</span>, <span class="ruby-identifier">postposing</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-completion_journey_move" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">completion_journey_move</span><span
              class="method-args">(direction)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="completion_journey_move-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1473</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">completion_journey_move</span>(<span class="ruby-identifier">direction</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">disable_completion</span>

  <span class="ruby-identifier">process_insert</span>(<span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>)
  <span class="ruby-ivar">@completion_state</span> = <span class="ruby-constant">CompletionState</span><span class="ruby-operator">::</span><span class="ruby-constant">NORMAL</span>
  <span class="ruby-ivar">@completion_occurs</span> = <span class="ruby-identifier">move_completed_list</span>(<span class="ruby-identifier">direction</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-completion_journey_up" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">completion_journey_up</span><span
              class="method-args">(_key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="completion_journey_up-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1489</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">completion_journey_up</span>(<span class="ruby-identifier">_key</span>)
  <span class="ruby-identifier">completion_journey_move</span>(<span class="ruby-value">:up</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">autocompletion</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-copy_for_vi" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">copy_for_vi</span><span
              class="method-args">(text)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="copy_for_vi-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2103</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">copy_for_vi</span>(<span class="ruby-identifier">text</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode_is?</span>(<span class="ruby-value">:vi_insert</span>) <span class="ruby-keyword">or</span> <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode_is?</span>(<span class="ruby-value">:vi_command</span>)
    <span class="ruby-ivar">@vi_clipboard</span> = <span class="ruby-identifier">text</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-dialog_range" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">dialog_range</span><span
              class="method-args">(dialog, dialog_y)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="dialog_range-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 707</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">dialog_range</span>(<span class="ruby-identifier">dialog</span>, <span class="ruby-identifier">dialog_y</span>)
  <span class="ruby-identifier">x_range</span> = <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">column</span><span class="ruby-operator">...</span><span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">column</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">width</span>
  <span class="ruby-identifier">y_range</span> = <span class="ruby-identifier">dialog_y</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">vertical_offset</span><span class="ruby-operator">...</span><span class="ruby-identifier">dialog_y</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">vertical_offset</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">contents</span>.<span class="ruby-identifier">size</span>
  [<span class="ruby-identifier">x_range</span>, <span class="ruby-identifier">y_range</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-ed_argument_digit" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">ed_argument_digit</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="ed_argument_digit-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2353</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ed_argument_digit</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@vi_arg</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">chr</span>.<span class="ruby-identifier">to_i</span>.<span class="ruby-identifier">zero?</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">anybits?</span>(<span class="ruby-value">0b10000000</span>)
        <span class="ruby-identifier">unescaped_key</span> = <span class="ruby-identifier">key</span> <span class="ruby-operator">^</span> <span class="ruby-value">0b10000000</span>
        <span class="ruby-keyword">unless</span> <span class="ruby-identifier">unescaped_key</span>.<span class="ruby-identifier">chr</span>.<span class="ruby-identifier">to_i</span>.<span class="ruby-identifier">zero?</span>
          <span class="ruby-ivar">@vi_arg</span> = <span class="ruby-identifier">unescaped_key</span>.<span class="ruby-identifier">chr</span>.<span class="ruby-identifier">to_i</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-ivar">@vi_arg</span> = <span class="ruby-identifier">key</span>.<span class="ruby-identifier">chr</span>.<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@vi_arg</span> = <span class="ruby-ivar">@vi_arg</span> <span class="ruby-operator">*</span> <span class="ruby-value">10</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">chr</span>.<span class="ruby-identifier">to_i</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-ed_clear_screen" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">ed_clear_screen</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="ed_clear_screen-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1982</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ed_clear_screen</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>.<span class="ruby-identifier">clear_screen</span>
  <span class="ruby-ivar">@screen_size</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>.<span class="ruby-identifier">get_screen_size</span>
  <span class="ruby-ivar">@rendered_screen</span>.<span class="ruby-identifier">lines</span> = []
  <span class="ruby-ivar">@rendered_screen</span>.<span class="ruby-identifier">base_y</span> = <span class="ruby-value">0</span>
  <span class="ruby-ivar">@rendered_screen</span>.<span class="ruby-identifier">cursor_y</span> = <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-clear_screen">clear_screen</a>
        </div>

      </div>

      <div id="method-i-ed_delete_next_char" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">ed_delete_next_char</span><span
              class="method-args">(key, arg: 1)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="ed_delete_next_char-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2299</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ed_delete_next_char</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-value">1</span>)
  <span class="ruby-identifier">byte_size</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">get_next_mbchar_size</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">byte_size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">line</span>, <span class="ruby-identifier">mbchar</span> = <span class="ruby-identifier">byteslice!</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>, <span class="ruby-identifier">byte_size</span>)
    <span class="ruby-identifier">copy_for_vi</span>(<span class="ruby-identifier">mbchar</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">byte_size</span>
      <span class="ruby-identifier">byte_size</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">get_prev_mbchar_size</span>(<span class="ruby-identifier">line</span>, <span class="ruby-ivar">@byte_pointer</span>)
      <span class="ruby-identifier">set_current_line</span>(<span class="ruby-identifier">line</span>, <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">byte_size</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">set_current_line</span>(<span class="ruby-identifier">line</span>, <span class="ruby-ivar">@byte_pointer</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">arg</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">ed_delete_next_char</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-identifier">arg</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">arg</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-ed_delete_prev_char" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">ed_delete_prev_char</span><span
              class="method-args">(key, arg: 1)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="ed_delete_prev_char-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2214</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ed_delete_prev_char</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-value">1</span>)
  <span class="ruby-identifier">deleted</span> = <span class="ruby-string">+&#39;&#39;</span>
  <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">byte_size</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">get_prev_mbchar_size</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>)
      <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">byte_size</span>
      <span class="ruby-identifier">line</span>, <span class="ruby-identifier">mbchar</span> = <span class="ruby-identifier">byteslice!</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>, <span class="ruby-identifier">byte_size</span>)
      <span class="ruby-identifier">set_current_line</span>(<span class="ruby-identifier">line</span>)
      <span class="ruby-identifier">deleted</span>.<span class="ruby-identifier">prepend</span>(<span class="ruby-identifier">mbchar</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">copy_for_vi</span>(<span class="ruby-identifier">deleted</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-ed_delete_prev_word" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">ed_delete_prev_word</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="ed_delete_prev_word-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2017</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ed_delete_prev_word</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">byte_size</span>, <span class="ruby-identifier">_</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">em_backward_word</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>)
    <span class="ruby-identifier">line</span>, <span class="ruby-identifier">word</span> = <span class="ruby-identifier">byteslice!</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">byte_size</span>, <span class="ruby-identifier">byte_size</span>)
    <span class="ruby-identifier">set_current_line</span>(<span class="ruby-identifier">line</span>, <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">byte_size</span>)
    <span class="ruby-ivar">@kill_ring</span>.<span class="ruby-identifier">append</span>(<span class="ruby-identifier">word</span>, <span class="ruby-keyword">true</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-backward_kill_word">backward_kill_word</a>
        </div>

      </div>

      <div id="method-i-ed_insert" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">ed_insert</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <dl class="rdoc-list note-list"><dt>Editline
<dd>
<p><code>ed-insert</code> (vi input: almost all; emacs: printable characters) In insert mode, insert the input character left of the cursor position. In replace mode, overwrite the character at the cursor and move the cursor to the right by one character position. Accept an argument to do this repeatedly. It is an error if the input character is the NUL character (<code>Ctrl-@</code>). Failure to enlarge the edit buffer also results in an error.</p>
</dd><dt>Editline
<dd>
<p><code>ed-digit</code> (emacs: 0 to 9) If in argument input mode, append the input digit to the argument being read. Otherwise, call <code>ed-insert</code>. It is an error if the input character is not a digit or if the existing argument is already greater than a million.</p>
</dd><dt>GNU <a href="../Readline.html"><code>Readline</code></a>
<dd>
<p><code>self-insert</code> (a, b, A, 1, !, …) Insert yourself.</p>
</dd></dl>

          <div class="method-source-code" id="ed_insert-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1516</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ed_insert</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">instance_of?</span>(<span class="ruby-constant">String</span>)
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">key</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UTF_8</span>)
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UndefinedConversionError</span>
      <span class="ruby-keyword">return</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">str</span> = <span class="ruby-identifier">key</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">key</span>.<span class="ruby-identifier">chr</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UTF_8</span>)
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UndefinedConversionError</span>
      <span class="ruby-keyword">return</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">str</span> = <span class="ruby-identifier">key</span>.<span class="ruby-identifier">chr</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@in_pasting</span>
    <span class="ruby-ivar">@continuous_insertion_buffer</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">str</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-keyword">not</span> <span class="ruby-ivar">@continuous_insertion_buffer</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">process_insert</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">insert_text</span>(<span class="ruby-identifier">str</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-ed_digit">ed_digit</a>, <a href="LineEditor.html#method-i-self_insert">self_insert</a>
        </div>

      </div>

      <div id="method-i-ed_kill_line" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">ed_kill_line</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <dl class="rdoc-list note-list"><dt>Editline
<dd>
<p><code>ed-kill-line</code> (vi command: <code>D</code>, <code>Ctrl-K</code>; emacs: <code>Ctrl-K</code>, <code>Ctrl-U</code>) + Kill from the cursor to the end of the line.</p>
</dd><dt>GNU <a href="../Readline.html"><code>Readline</code></a>
<dd>
<p><code>kill-line</code> (<code>C-k</code>) Kill the text from point to the end of the line. With a negative numeric argument, kill backward from the cursor to the beginning of the current line.</p>
</dd></dl>

          <div class="method-source-code" id="ed_kill_line-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1895</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ed_kill_line</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span> <span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@byte_pointer</span>
    <span class="ruby-identifier">line</span>, <span class="ruby-identifier">deleted</span> = <span class="ruby-identifier">byteslice!</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>, <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@byte_pointer</span>)
    <span class="ruby-identifier">set_current_line</span>(<span class="ruby-identifier">line</span>, <span class="ruby-identifier">line</span>.<span class="ruby-identifier">bytesize</span>)
    <span class="ruby-ivar">@kill_ring</span>.<span class="ruby-identifier">append</span>(<span class="ruby-identifier">deleted</span>)
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span> <span class="ruby-keyword">and</span> <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@line_index</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
    <span class="ruby-identifier">set_current_line</span>(<span class="ruby-identifier">current_line</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">delete_at</span>(<span class="ruby-ivar">@line_index</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>), <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-kill_line">kill_line</a>
        </div>

      </div>

      <div id="method-i-ed_move_to_beg" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">ed_move_to_beg</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="ed_move_to_beg-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1590</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ed_move_to_beg</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-ivar">@byte_pointer</span> = <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-beginning_of_line">beginning_of_line</a>, <a href="LineEditor.html#method-i-vi_zero">vi_zero</a>
        </div>

      </div>

      <div id="method-i-ed_move_to_end" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">ed_move_to_end</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="ed_move_to_end-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1596</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ed_move_to_end</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-ivar">@byte_pointer</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-end_of_line">end_of_line</a>
        </div>

      </div>

      <div id="method-i-ed_newline" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">ed_newline</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="ed_newline-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1845</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ed_newline</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-identifier">process_insert</span>(<span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@is_multiline</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode_is?</span>(<span class="ruby-value">:vi_command</span>)
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@line_index</span> <span class="ruby-operator">&lt;</span> (<span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>)
        <span class="ruby-identifier">ed_next_history</span>(<span class="ruby-identifier">key</span>) <span class="ruby-comment"># means cursor down</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-comment"># should check confirm_multiline_termination to finish?</span>
        <span class="ruby-identifier">finish</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@line_index</span> <span class="ruby-operator">==</span> (<span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>)
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">confirm_multiline_termination</span>
          <span class="ruby-identifier">finish</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">key_newline</span>(<span class="ruby-identifier">key</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-comment"># should check confirm_multiline_termination to finish?</span>
        <span class="ruby-ivar">@line_index</span> = <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-ivar">@byte_pointer</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span>
        <span class="ruby-identifier">finish</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">finish</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-ed_next_char" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">ed_next_char</span><span
              class="method-args">(key, arg: 1)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="ed_next_char-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1560</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ed_next_char</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-value">1</span>)
  <span class="ruby-identifier">byte_size</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">get_next_mbchar_size</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>)
  <span class="ruby-keyword">if</span> (<span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span>)
    <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">byte_size</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode_is?</span>(<span class="ruby-value">:emacs</span>) <span class="ruby-keyword">and</span> <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span> <span class="ruby-keyword">and</span> <span class="ruby-ivar">@line_index</span> <span class="ruby-operator">&lt;</span> <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
    <span class="ruby-ivar">@byte_pointer</span> = <span class="ruby-value">0</span>
    <span class="ruby-ivar">@line_index</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">arg</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">ed_next_char</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-identifier">arg</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">arg</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-forward_char">forward_char</a>
        </div>

      </div>

      <div id="method-i-ed_next_history" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">ed_next_history</span><span
              class="method-args">(key, arg: 1)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="ed_next_history-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1828</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ed_next_history</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-value">1</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@line_index</span> <span class="ruby-operator">&lt;</span> (<span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>)
    <span class="ruby-identifier">cursor</span> = <span class="ruby-identifier">current_byte_pointer_cursor</span>
    <span class="ruby-ivar">@line_index</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
    <span class="ruby-identifier">calculate_nearest_cursor</span>(<span class="ruby-identifier">cursor</span>)
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">move_history</span>(
    (<span class="ruby-ivar">@history_pointer</span> <span class="ruby-operator">||</span> <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">HISTORY</span>.<span class="ruby-identifier">size</span>) <span class="ruby-operator">+</span> <span class="ruby-value">1</span>,
    <span class="ruby-value">line:</span> <span class="ruby-value">:start</span>,
    <span class="ruby-value">cursor:</span> <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode_is?</span>(<span class="ruby-value">:vi_command</span>) <span class="ruby-operator">?</span> <span class="ruby-value">:start</span> <span class="ruby-operator">:</span> <span class="ruby-value">:end</span>,
  )
  <span class="ruby-identifier">arg</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">ed_next_history</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-identifier">arg</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">arg</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-next_history">next_history</a>
        </div>

      </div>

      <div id="method-i-ed_prev_char" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">ed_prev_char</span><span
              class="method-args">(key, arg: 1)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="ed_prev_char-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1573</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ed_prev_char</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-value">1</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">byte_size</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">get_prev_mbchar_size</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>)
    <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">byte_size</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode_is?</span>(<span class="ruby-value">:emacs</span>) <span class="ruby-keyword">and</span> <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-keyword">and</span> <span class="ruby-ivar">@line_index</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-ivar">@line_index</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
    <span class="ruby-ivar">@byte_pointer</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">arg</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">ed_prev_char</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-identifier">arg</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">arg</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-backward_char">backward_char</a>
        </div>

      </div>

      <div id="method-i-ed_prev_history" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">ed_prev_history</span><span
              class="method-args">(key, arg: 1)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="ed_prev_history-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1811</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ed_prev_history</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-value">1</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@line_index</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">cursor</span> = <span class="ruby-identifier">current_byte_pointer_cursor</span>
    <span class="ruby-ivar">@line_index</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
    <span class="ruby-identifier">calculate_nearest_cursor</span>(<span class="ruby-identifier">cursor</span>)
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">move_history</span>(
    (<span class="ruby-ivar">@history_pointer</span> <span class="ruby-operator">||</span> <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">HISTORY</span>.<span class="ruby-identifier">size</span>) <span class="ruby-operator">-</span> <span class="ruby-value">1</span>,
    <span class="ruby-value">line:</span> <span class="ruby-value">:end</span>,
    <span class="ruby-value">cursor:</span> <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode_is?</span>(<span class="ruby-value">:vi_command</span>) <span class="ruby-operator">?</span> <span class="ruby-value">:start</span> <span class="ruby-operator">:</span> <span class="ruby-value">:end</span>,
  )
  <span class="ruby-identifier">arg</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">ed_prev_history</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-identifier">arg</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">arg</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-previous_history">previous_history</a>
        </div>

      </div>

      <div id="method-i-ed_prev_word" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">ed_prev_word</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="ed_prev_word-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1999</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ed_prev_word</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">byte_size</span>, <span class="ruby-identifier">_</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">em_backward_word</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>)
    <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">byte_size</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-backward_word">backward_word</a>
        </div>

      </div>

      <div id="method-i-ed_quoted_insert" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">ed_quoted_insert</span><span
              class="method-args">(str, arg: 1)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="ed_quoted_insert-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1544</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ed_quoted_insert</span>(<span class="ruby-identifier">str</span>, <span class="ruby-value">arg:</span> <span class="ruby-value">1</span>)
  <span class="ruby-ivar">@waiting_proc</span> = <span class="ruby-identifier">proc</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword">do</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">key</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;\C-j&quot;</span>.<span class="ruby-identifier">ord</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">key</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;\C-m&quot;</span>.<span class="ruby-identifier">ord</span>
        <span class="ruby-identifier">key_newline</span>(<span class="ruby-identifier">key</span>)
      <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">key</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-comment"># Ignore NUL.</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">ed_insert</span>(<span class="ruby-identifier">key</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@waiting_proc</span> = <span class="ruby-keyword">nil</span>
  }
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-quoted_insert">quoted_insert</a>
        </div>

      </div>

      <div id="method-i-ed_search_next_history" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">ed_search_next_history</span><span
              class="method-args">(key, arg: 1)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="ed_search_next_history-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1775</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ed_search_next_history</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-value">1</span>)
  <span class="ruby-identifier">substr</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-value">0</span>, <span class="ruby-ivar">@byte_pointer</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@history_pointer</span>.<span class="ruby-identifier">nil?</span>

  <span class="ruby-identifier">history_range</span> = <span class="ruby-ivar">@history_pointer</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span><span class="ruby-operator">...</span><span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">HISTORY</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">h_pointer</span>, <span class="ruby-identifier">line_index</span> = <span class="ruby-identifier">search_history</span>(<span class="ruby-identifier">substr</span>, <span class="ruby-identifier">history_range</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">h_pointer</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword">and</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">substr</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">move_history</span>(<span class="ruby-identifier">h_pointer</span>, <span class="ruby-value">line:</span> <span class="ruby-identifier">line_index</span> <span class="ruby-operator">||</span> <span class="ruby-value">:start</span>, <span class="ruby-value">cursor:</span> <span class="ruby-ivar">@byte_pointer</span>)
  <span class="ruby-identifier">arg</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">ed_search_next_history</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-identifier">arg</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">arg</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-history_search_forward">history_search_forward</a>
        </div>

      </div>

      <div id="method-i-ed_search_prev_history" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">ed_search_prev_history</span><span
              class="method-args">(key, arg: 1)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="ed_search_prev_history-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1761</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ed_search_prev_history</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-value">1</span>)
  <span class="ruby-identifier">substr</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-value">0</span>, <span class="ruby-ivar">@byte_pointer</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@history_pointer</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@history_pointer</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">substr</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">history_range</span> = <span class="ruby-value">0</span><span class="ruby-operator">...</span>(<span class="ruby-ivar">@history_pointer</span> <span class="ruby-operator">||</span> <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">HISTORY</span>.<span class="ruby-identifier">size</span>)
  <span class="ruby-identifier">h_pointer</span>, <span class="ruby-identifier">line_index</span> = <span class="ruby-identifier">search_history</span>(<span class="ruby-identifier">substr</span>, <span class="ruby-identifier">history_range</span>.<span class="ruby-identifier">reverse_each</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">h_pointer</span>
  <span class="ruby-identifier">move_history</span>(<span class="ruby-identifier">h_pointer</span>, <span class="ruby-value">line:</span> <span class="ruby-identifier">line_index</span> <span class="ruby-operator">||</span> <span class="ruby-value">:start</span>, <span class="ruby-value">cursor:</span> <span class="ruby-ivar">@byte_pointer</span>)
  <span class="ruby-identifier">arg</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">ed_search_prev_history</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-identifier">arg</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">arg</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-history_search_backward">history_search_backward</a>
        </div>

      </div>

      <div id="method-i-ed_transpose_chars" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">ed_transpose_chars</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="ed_transpose_chars-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2027</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ed_transpose_chars</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span>
      <span class="ruby-identifier">byte_size</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">get_next_mbchar_size</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>)
      <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">byte_size</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">back1_byte_size</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">get_prev_mbchar_size</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>)
    <span class="ruby-keyword">if</span> (<span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">back1_byte_size</span>) <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">back2_byte_size</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">get_prev_mbchar_size</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">back1_byte_size</span>)
      <span class="ruby-identifier">back2_pointer</span> = <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">back1_byte_size</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">back2_byte_size</span>
      <span class="ruby-identifier">line</span>, <span class="ruby-identifier">back2_mbchar</span> = <span class="ruby-identifier">byteslice!</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-identifier">back2_pointer</span>, <span class="ruby-identifier">back2_byte_size</span>)
      <span class="ruby-identifier">set_current_line</span>(<span class="ruby-identifier">byteinsert</span>(<span class="ruby-identifier">line</span>, <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">back2_byte_size</span>, <span class="ruby-identifier">back2_mbchar</span>))
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-transpose_chars">transpose_chars</a>
        </div>

      </div>

      <div id="method-i-ed_transpose_words" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">ed_transpose_words</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="ed_transpose_words-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2044</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ed_transpose_words</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-identifier">left_word_start</span>, <span class="ruby-identifier">middle_start</span>, <span class="ruby-identifier">right_word_start</span>, <span class="ruby-identifier">after_start</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">ed_transpose_words</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>)
  <span class="ruby-identifier">before</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-value">0</span>, <span class="ruby-identifier">left_word_start</span>)
  <span class="ruby-identifier">left_word</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-identifier">left_word_start</span>, <span class="ruby-identifier">middle_start</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">left_word_start</span>)
  <span class="ruby-identifier">middle</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-identifier">middle_start</span>, <span class="ruby-identifier">right_word_start</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">middle_start</span>)
  <span class="ruby-identifier">right_word</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-identifier">right_word_start</span>, <span class="ruby-identifier">after_start</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">right_word_start</span>)
  <span class="ruby-identifier">after</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-identifier">after_start</span>, <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">after_start</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">left_word</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">right_word</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">from_head_to_left_word</span> = <span class="ruby-identifier">before</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">right_word</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">middle</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">left_word</span>
  <span class="ruby-identifier">set_current_line</span>(<span class="ruby-identifier">from_head_to_left_word</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">after</span>, <span class="ruby-identifier">from_head_to_left_word</span>.<span class="ruby-identifier">bytesize</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-transpose_words">transpose_words</a>
        </div>

      </div>

      <div id="method-i-ed_unassigned" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">ed_unassigned</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <dl class="rdoc-list note-list"><dt>Editline
<dd>
<p><code>ed-unassigned</code> This  editor command always results in an error.</p>
</dd><dt>GNU <a href="../Readline.html"><code>Readline</code></a>
<dd>
<p>There is no corresponding macro.</p>
</dd></dl>

          <div class="method-source-code" id="ed_unassigned-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1495</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ed_unassigned</span>(<span class="ruby-identifier">key</span>) <span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-em_capitol_case" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">em_capitol_case</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="em_capitol_case-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2057</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">em_capitol_case</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span> <span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@byte_pointer</span>
    <span class="ruby-identifier">byte_size</span>, <span class="ruby-identifier">_</span>, <span class="ruby-identifier">new_str</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">em_forward_word_with_capitalization</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>)
    <span class="ruby-identifier">before</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-value">0</span>, <span class="ruby-ivar">@byte_pointer</span>)
    <span class="ruby-identifier">after</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>((<span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">byte_size</span>)<span class="ruby-operator">..</span><span class="ruby-value">-1</span>)
    <span class="ruby-identifier">set_current_line</span>(<span class="ruby-identifier">before</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">new_str</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">after</span>, <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">new_str</span>.<span class="ruby-identifier">bytesize</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-capitalize_word">capitalize_word</a>
        </div>

      </div>

      <div id="method-i-em_delete" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">em_delete</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="em_delete-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1939</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">em_delete</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword">and</span> <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">key</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;\C-d&quot;</span>.<span class="ruby-identifier">ord</span>
    <span class="ruby-ivar">@eof</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-identifier">finish</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span>
    <span class="ruby-identifier">splitted_last</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-ivar">@byte_pointer</span>, <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span>)
    <span class="ruby-identifier">mbchar</span> = <span class="ruby-identifier">splitted_last</span>.<span class="ruby-identifier">grapheme_clusters</span>.<span class="ruby-identifier">first</span>
    <span class="ruby-identifier">line</span>, = <span class="ruby-identifier">byteslice!</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>, <span class="ruby-identifier">mbchar</span>.<span class="ruby-identifier">bytesize</span>)
    <span class="ruby-identifier">set_current_line</span>(<span class="ruby-identifier">line</span>)
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span> <span class="ruby-keyword">and</span> <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@line_index</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
    <span class="ruby-identifier">set_current_line</span>(<span class="ruby-identifier">current_line</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">delete_at</span>(<span class="ruby-ivar">@line_index</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>), <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-delete_char">delete_char</a>
        </div>

      </div>

      <div id="method-i-em_delete_next_word" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">em_delete_next_word</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="em_delete_next_word-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2007</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">em_delete_next_word</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span> <span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@byte_pointer</span>
    <span class="ruby-identifier">byte_size</span>, <span class="ruby-identifier">_</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">em_forward_word</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>)
    <span class="ruby-identifier">line</span>, <span class="ruby-identifier">word</span> = <span class="ruby-identifier">byteslice!</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>, <span class="ruby-identifier">byte_size</span>)
    <span class="ruby-identifier">set_current_line</span>(<span class="ruby-identifier">line</span>)
    <span class="ruby-ivar">@kill_ring</span>.<span class="ruby-identifier">append</span>(<span class="ruby-identifier">word</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-kill_word">kill_word</a>
        </div>

      </div>

      <div id="method-i-em_delete_or_list" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">em_delete_or_list</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="em_delete_or_list-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1954</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">em_delete_or_list</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword">or</span> <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span>
    <span class="ruby-identifier">em_delete</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">elsif</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@config</span>.<span class="ruby-identifier">autocompletion</span> <span class="ruby-comment"># show completed list</span>
    <span class="ruby-identifier">result</span> = <span class="ruby-identifier">call_completion_proc</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
      <span class="ruby-identifier">perform_completion</span>(<span class="ruby-identifier">result</span>, <span class="ruby-keyword">true</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-delete_char_or_list">delete_char_or_list</a>
        </div>

      </div>

      <div id="method-i-em_delete_prev_char" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">em_delete_prev_char</span><span
              class="method-args">(key, arg: 1)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="em_delete_prev_char-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1874</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">em_delete_prev_char</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-value">1</span>)
  <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-keyword">and</span> <span class="ruby-ivar">@line_index</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
      <span class="ruby-ivar">@byte_pointer</span> = <span class="ruby-ivar">@buffer_of_lines</span>[<span class="ruby-ivar">@line_index</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>].<span class="ruby-identifier">bytesize</span>
      <span class="ruby-ivar">@buffer_of_lines</span>[<span class="ruby-ivar">@line_index</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>] <span class="ruby-operator">+=</span> <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">delete_at</span>(<span class="ruby-ivar">@line_index</span>)
      <span class="ruby-ivar">@line_index</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">byte_size</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">get_prev_mbchar_size</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>)
      <span class="ruby-identifier">line</span>, = <span class="ruby-identifier">byteslice!</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">byte_size</span>, <span class="ruby-identifier">byte_size</span>)
      <span class="ruby-identifier">set_current_line</span>(<span class="ruby-identifier">line</span>, <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">byte_size</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">process_auto_indent</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-backward_delete_char">backward_delete_char</a>
        </div>

      </div>

      <div id="method-i-em_exchange_mark" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">em_exchange_mark</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="em_exchange_mark-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2515</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">em_exchange_mark</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@mark_pointer</span>
  <span class="ruby-identifier">new_pointer</span> = [<span class="ruby-ivar">@byte_pointer</span>, <span class="ruby-ivar">@line_index</span>]
  <span class="ruby-ivar">@byte_pointer</span>, <span class="ruby-ivar">@line_index</span> = <span class="ruby-ivar">@mark_pointer</span>
  <span class="ruby-ivar">@mark_pointer</span> = <span class="ruby-identifier">new_pointer</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-exchange_point_and_mark">exchange_point_and_mark</a>
        </div>

      </div>

      <div id="method-i-em_kill_line" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">em_kill_line</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <dl class="rdoc-list note-list"><dt>Editline
<dd>
<p><code>em-kill-line</code> (not bound) Delete the entire contents of the edit buffer and save it to the cut buffer. <code>vi-kill-line-prev</code></p>
</dd><dt>GNU <a href="../Readline.html"><code>Readline</code></a>
<dd>
<p><code>kill-whole-line</code> (not bound) Kill all characters on the current line, no matter where point is.</p>
</dd></dl>

          <div class="method-source-code" id="em_kill_line-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1931</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">em_kill_line</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-ivar">@kill_ring</span>.<span class="ruby-identifier">append</span>(<span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">dup</span>, <span class="ruby-keyword">true</span>)
    <span class="ruby-identifier">set_current_line</span>(<span class="ruby-string">&#39;&#39;</span>, <span class="ruby-value">0</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-kill_whole_line">kill_whole_line</a>
        </div>

      </div>

      <div id="method-i-em_kill_region" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">em_kill_region</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="em_kill_region-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2093</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">em_kill_region</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">byte_size</span>, <span class="ruby-identifier">_</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">em_big_backward_word</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>)
    <span class="ruby-identifier">line</span>, <span class="ruby-identifier">deleted</span> = <span class="ruby-identifier">byteslice!</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">byte_size</span>, <span class="ruby-identifier">byte_size</span>)
    <span class="ruby-identifier">set_current_line</span>(<span class="ruby-identifier">line</span>, <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">byte_size</span>)
    <span class="ruby-ivar">@kill_ring</span>.<span class="ruby-identifier">append</span>(<span class="ruby-identifier">deleted</span>, <span class="ruby-keyword">true</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-unix_word_rubout">unix_word_rubout</a>
        </div>

      </div>

      <div id="method-i-em_lower_case" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">em_lower_case</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="em_lower_case-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2067</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">em_lower_case</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span> <span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@byte_pointer</span>
    <span class="ruby-identifier">byte_size</span>, = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">em_forward_word</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>)
    <span class="ruby-identifier">part</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-ivar">@byte_pointer</span>, <span class="ruby-identifier">byte_size</span>).<span class="ruby-identifier">grapheme_clusters</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">mbchar</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">mbchar</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/[A-Z]/</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">mbchar</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">mbchar</span>
    }.<span class="ruby-identifier">join</span>
    <span class="ruby-identifier">rest</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>((<span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">byte_size</span>)<span class="ruby-operator">..</span><span class="ruby-value">-1</span>)
    <span class="ruby-identifier">line</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-value">0</span>, <span class="ruby-ivar">@byte_pointer</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">part</span>
    <span class="ruby-identifier">set_current_line</span>(<span class="ruby-identifier">line</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">rest</span>, <span class="ruby-identifier">line</span>.<span class="ruby-identifier">bytesize</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-downcase_word">downcase_word</a>
        </div>

      </div>

      <div id="method-i-em_next_word" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">em_next_word</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="em_next_word-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1991</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">em_next_word</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span> <span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@byte_pointer</span>
    <span class="ruby-identifier">byte_size</span>, <span class="ruby-identifier">_</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">em_forward_word</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>)
    <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">byte_size</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-forward_word">forward_word</a>
        </div>

      </div>

      <div id="method-i-em_set_mark" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">em_set_mark</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="em_set_mark-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2510</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">em_set_mark</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-ivar">@mark_pointer</span> = [<span class="ruby-ivar">@byte_pointer</span>, <span class="ruby-ivar">@line_index</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-set_mark">set_mark</a>
        </div>

      </div>

      <div id="method-i-em_upper_case" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">em_upper_case</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="em_upper_case-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2080</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">em_upper_case</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span> <span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@byte_pointer</span>
    <span class="ruby-identifier">byte_size</span>, = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">em_forward_word</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>)
    <span class="ruby-identifier">part</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-ivar">@byte_pointer</span>, <span class="ruby-identifier">byte_size</span>).<span class="ruby-identifier">grapheme_clusters</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">mbchar</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">mbchar</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/[a-z]/</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">mbchar</span>.<span class="ruby-identifier">upcase</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">mbchar</span>
    }.<span class="ruby-identifier">join</span>
    <span class="ruby-identifier">rest</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>((<span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">byte_size</span>)<span class="ruby-operator">..</span><span class="ruby-value">-1</span>)
    <span class="ruby-identifier">line</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-value">0</span>, <span class="ruby-ivar">@byte_pointer</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">part</span>
    <span class="ruby-identifier">set_current_line</span>(<span class="ruby-identifier">line</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">rest</span>, <span class="ruby-identifier">line</span>.<span class="ruby-identifier">bytesize</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-upcase_word">upcase_word</a>
        </div>

      </div>

      <div id="method-i-em_yank" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">em_yank</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="em_yank-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1966</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">em_yank</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-identifier">yanked</span> = <span class="ruby-ivar">@kill_ring</span>.<span class="ruby-identifier">yank</span>
  <span class="ruby-identifier">insert_text</span>(<span class="ruby-identifier">yanked</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">yanked</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-yank">yank</a>
        </div>

      </div>

      <div id="method-i-em_yank_pop" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">em_yank_pop</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="em_yank_pop-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1972</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">em_yank_pop</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-identifier">yanked</span>, <span class="ruby-identifier">prev_yank</span> = <span class="ruby-ivar">@kill_ring</span>.<span class="ruby-identifier">yank_pop</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">yanked</span>
    <span class="ruby-identifier">line</span>, = <span class="ruby-identifier">byteslice!</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">prev_yank</span>.<span class="ruby-identifier">bytesize</span>, <span class="ruby-identifier">prev_yank</span>.<span class="ruby-identifier">bytesize</span>)
    <span class="ruby-identifier">set_current_line</span>(<span class="ruby-identifier">line</span>, <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">prev_yank</span>.<span class="ruby-identifier">bytesize</span>)
    <span class="ruby-identifier">insert_text</span>(<span class="ruby-identifier">yanked</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-yank_pop">yank_pop</a>
        </div>

      </div>

      <div id="method-i-emacs_editing_mode" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">emacs_editing_mode</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="emacs_editing_mode-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2523</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">emacs_editing_mode</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode</span> = <span class="ruby-value">:emacs</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-generate_searcher" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">generate_searcher</span><span
              class="method-args">(search_key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="generate_searcher-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1601</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">generate_searcher</span>(<span class="ruby-identifier">search_key</span>)
  <span class="ruby-identifier">search_word</span> = <span class="ruby-constant">String</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">encoding:</span> <span class="ruby-ivar">@encoding</span>)
  <span class="ruby-identifier">multibyte_buf</span> = <span class="ruby-constant">String</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">encoding:</span> <span class="ruby-string">&#39;ASCII-8BIT&#39;</span>)
  <span class="ruby-identifier">hit_pointer</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">lambda</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">search_again</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">key</span>
    <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;\C-h&quot;</span>.<span class="ruby-identifier">ord</span>, <span class="ruby-string">&quot;\C-?&quot;</span>.<span class="ruby-identifier">ord</span>
      <span class="ruby-identifier">grapheme_clusters</span> = <span class="ruby-identifier">search_word</span>.<span class="ruby-identifier">grapheme_clusters</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">grapheme_clusters</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">grapheme_clusters</span>.<span class="ruby-identifier">pop</span>
        <span class="ruby-identifier">search_word</span> = <span class="ruby-identifier">grapheme_clusters</span>.<span class="ruby-identifier">join</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;\C-r&quot;</span>.<span class="ruby-identifier">ord</span>, <span class="ruby-string">&quot;\C-s&quot;</span>.<span class="ruby-identifier">ord</span>
      <span class="ruby-identifier">search_again</span> = <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">search_key</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">key</span>
      <span class="ruby-identifier">search_key</span> = <span class="ruby-identifier">key</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">multibyte_buf</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">key</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">multibyte_buf</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-ivar">@encoding</span>).<span class="ruby-identifier">valid_encoding?</span>
        <span class="ruby-identifier">search_word</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">multibyte_buf</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-ivar">@encoding</span>)
        <span class="ruby-identifier">multibyte_buf</span>.<span class="ruby-identifier">clear</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">hit</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">if</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">search_word</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword">and</span> <span class="ruby-ivar">@line_backup_in_history</span>&amp;.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">search_word</span>)
      <span class="ruby-identifier">hit_pointer</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">HISTORY</span>.<span class="ruby-identifier">size</span>
      <span class="ruby-identifier">hit</span> = <span class="ruby-ivar">@line_backup_in_history</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">search_again</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">search_word</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword">and</span> <span class="ruby-constant">Reline</span>.<span class="ruby-identifier">last_incremental_search</span>
          <span class="ruby-identifier">search_word</span> = <span class="ruby-constant">Reline</span>.<span class="ruby-identifier">last_incremental_search</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@history_pointer</span>
          <span class="ruby-keyword">case</span> <span class="ruby-identifier">search_key</span>
          <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;\C-r&quot;</span>.<span class="ruby-identifier">ord</span>
            <span class="ruby-identifier">history_pointer_base</span> = <span class="ruby-value">0</span>
            <span class="ruby-identifier">history</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">HISTORY</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span>(<span class="ruby-ivar">@history_pointer</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>)]
          <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;\C-s&quot;</span>.<span class="ruby-identifier">ord</span>
            <span class="ruby-identifier">history_pointer_base</span> = <span class="ruby-ivar">@history_pointer</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
            <span class="ruby-identifier">history</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">HISTORY</span>[(<span class="ruby-ivar">@history_pointer</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)<span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">history_pointer_base</span> = <span class="ruby-value">0</span>
          <span class="ruby-identifier">history</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">HISTORY</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@history_pointer</span>
        <span class="ruby-keyword">case</span> <span class="ruby-identifier">search_key</span>
        <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;\C-r&quot;</span>.<span class="ruby-identifier">ord</span>
          <span class="ruby-identifier">history_pointer_base</span> = <span class="ruby-value">0</span>
          <span class="ruby-identifier">history</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">HISTORY</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-ivar">@history_pointer</span>]
        <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;\C-s&quot;</span>.<span class="ruby-identifier">ord</span>
          <span class="ruby-identifier">history_pointer_base</span> = <span class="ruby-ivar">@history_pointer</span>
          <span class="ruby-identifier">history</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">HISTORY</span>[<span class="ruby-ivar">@history_pointer</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">history_pointer_base</span> = <span class="ruby-value">0</span>
        <span class="ruby-identifier">history</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">HISTORY</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">case</span> <span class="ruby-identifier">search_key</span>
      <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;\C-r&quot;</span>.<span class="ruby-identifier">ord</span>
        <span class="ruby-identifier">hit_index</span> = <span class="ruby-identifier">history</span>.<span class="ruby-identifier">rindex</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">item</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">item</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">search_word</span>)
        }
      <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;\C-s&quot;</span>.<span class="ruby-identifier">ord</span>
        <span class="ruby-identifier">hit_index</span> = <span class="ruby-identifier">history</span>.<span class="ruby-identifier">index</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">item</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">item</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">search_word</span>)
        }
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">hit_index</span>
        <span class="ruby-identifier">hit_pointer</span> = <span class="ruby-identifier">history_pointer_base</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">hit_index</span>
        <span class="ruby-identifier">hit</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">HISTORY</span>[<span class="ruby-identifier">hit_pointer</span>]
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">search_key</span>
    <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;\C-r&quot;</span>.<span class="ruby-identifier">ord</span>
      <span class="ruby-identifier">prompt_name</span> = <span class="ruby-string">&#39;reverse-i-search&#39;</span>
    <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;\C-s&quot;</span>.<span class="ruby-identifier">ord</span>
      <span class="ruby-identifier">prompt_name</span> = <span class="ruby-string">&#39;i-search&#39;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">prompt_name</span> = <span class="ruby-node">&quot;failed #{prompt_name}&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">hit</span>
    [<span class="ruby-identifier">search_word</span>, <span class="ruby-identifier">prompt_name</span>, <span class="ruby-identifier">hit_pointer</span>]
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-handle_interrupted" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">handle_interrupted</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="handle_interrupted-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 183</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">handle_interrupted</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@interrupted</span>

  <span class="ruby-ivar">@interrupted</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">clear_dialogs</span>
  <span class="ruby-identifier">scrolldown</span> = <span class="ruby-identifier">render_differential</span>
  <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>.<span class="ruby-identifier">scroll_down</span> <span class="ruby-identifier">scrolldown</span>
  <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>.<span class="ruby-identifier">move_cursor_column</span> <span class="ruby-value">0</span>
  <span class="ruby-ivar">@rendered_screen</span>.<span class="ruby-identifier">lines</span> = []
  <span class="ruby-ivar">@rendered_screen</span>.<span class="ruby-identifier">cursor_y</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">case</span> <span class="ruby-ivar">@old_trap</span>
  <span class="ruby-keyword">when</span> <span class="ruby-string">&#39;DEFAULT&#39;</span>, <span class="ruby-string">&#39;SYSTEM_DEFAULT&#39;</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">Interrupt</span>
  <span class="ruby-keyword">when</span> <span class="ruby-string">&#39;IGNORE&#39;</span>
    <span class="ruby-comment"># Do nothing</span>
  <span class="ruby-keyword">when</span> <span class="ruby-string">&#39;EXIT&#39;</span>
    <span class="ruby-identifier">exit</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@old_trap</span>.<span class="ruby-identifier">call</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@old_trap</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:call</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-handle_resized" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">handle_resized</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="handle_resized-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 170</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">handle_resized</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@resized</span>

  <span class="ruby-ivar">@screen_size</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>.<span class="ruby-identifier">get_screen_size</span>
  <span class="ruby-ivar">@resized</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">scroll_into_view</span>
  <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>.<span class="ruby-identifier">move_cursor_up</span> <span class="ruby-ivar">@rendered_screen</span>.<span class="ruby-identifier">cursor_y</span>
  <span class="ruby-ivar">@rendered_screen</span>.<span class="ruby-identifier">base_y</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">IOGate</span>.<span class="ruby-identifier">cursor_pos</span>.<span class="ruby-identifier">y</span>
  <span class="ruby-ivar">@rendered_screen</span>.<span class="ruby-identifier">lines</span> = []
  <span class="ruby-ivar">@rendered_screen</span>.<span class="ruby-identifier">cursor_y</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">render_differential</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-inclusive-3F" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">inclusive?</span><span
              class="method-args">(method_obj)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="inclusive-3F-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 971</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">inclusive?</span>(<span class="ruby-identifier">method_obj</span>)
  <span class="ruby-comment"># If a motion method with the keyword argument &quot;inclusive&quot; follows the</span>
  <span class="ruby-comment"># operator, it must contain the character at the cursor position.</span>
  <span class="ruby-identifier">method_obj</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">method_obj</span>.<span class="ruby-identifier">parameters</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">param</span><span class="ruby-operator">|</span> <span class="ruby-identifier">param</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:key</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">param</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:inclusive</span> }
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-incremental_search_history" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">incremental_search_history</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="incremental_search_history-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1685</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">incremental_search_history</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@history_pointer</span>
    <span class="ruby-ivar">@line_backup_in_history</span> = <span class="ruby-identifier">whole_buffer</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">searcher</span> = <span class="ruby-identifier">generate_searcher</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-ivar">@searching_prompt</span> = <span class="ruby-string">&quot;(reverse-i-search)`&#39;: &quot;</span>
  <span class="ruby-identifier">termination_keys</span> = [<span class="ruby-string">&quot;\C-j&quot;</span>.<span class="ruby-identifier">ord</span>]
  <span class="ruby-identifier">termination_keys</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-ivar">@config</span>.<span class="ruby-identifier">isearch_terminators</span>&amp;.<span class="ruby-identifier">chars</span>&amp;.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:ord</span>)) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">isearch_terminators</span>
  <span class="ruby-ivar">@waiting_proc</span> = <span class="ruby-operator">-&gt;</span>(<span class="ruby-identifier">k</span>) {
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">k</span>
    <span class="ruby-keyword">when</span> <span class="ruby-operator">*</span><span class="ruby-identifier">termination_keys</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@history_pointer</span>
        <span class="ruby-identifier">buffer</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">HISTORY</span>[<span class="ruby-ivar">@history_pointer</span>]
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">buffer</span> = <span class="ruby-ivar">@line_backup_in_history</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-ivar">@buffer_of_lines</span> = <span class="ruby-identifier">buffer</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;\n&quot;</span>)
      <span class="ruby-ivar">@buffer_of_lines</span> = [<span class="ruby-constant">String</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">encoding:</span> <span class="ruby-ivar">@encoding</span>)] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-ivar">@line_index</span> = <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
      <span class="ruby-ivar">@searching_prompt</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-ivar">@waiting_proc</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-ivar">@byte_pointer</span> = <span class="ruby-value">0</span>
    <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;\C-g&quot;</span>.<span class="ruby-identifier">ord</span>
      <span class="ruby-ivar">@buffer_of_lines</span> = <span class="ruby-ivar">@line_backup_in_history</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;\n&quot;</span>)
      <span class="ruby-ivar">@buffer_of_lines</span> = [<span class="ruby-constant">String</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">encoding:</span> <span class="ruby-ivar">@encoding</span>)] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-ivar">@line_index</span> = <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
      <span class="ruby-identifier">move_history</span>(<span class="ruby-keyword">nil</span>, <span class="ruby-value">line:</span> <span class="ruby-value">:end</span>, <span class="ruby-value">cursor:</span> <span class="ruby-value">:end</span>, <span class="ruby-value">save_buffer:</span> <span class="ruby-keyword">false</span>)
      <span class="ruby-ivar">@searching_prompt</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-ivar">@waiting_proc</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-ivar">@byte_pointer</span> = <span class="ruby-value">0</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">chr</span> = <span class="ruby-identifier">k</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">chr</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">ASCII_8BIT</span>)
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">chr</span>.<span class="ruby-identifier">match?</span>(<span class="ruby-regexp">/[[:print:]]/</span>) <span class="ruby-keyword">or</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;\C-h&quot;</span>.<span class="ruby-identifier">ord</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;\C-?&quot;</span>.<span class="ruby-identifier">ord</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;\C-r&quot;</span>.<span class="ruby-identifier">ord</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;\C-s&quot;</span>.<span class="ruby-identifier">ord</span>
        <span class="ruby-identifier">search_word</span>, <span class="ruby-identifier">prompt_name</span>, <span class="ruby-identifier">hit_pointer</span> = <span class="ruby-identifier">searcher</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">k</span>)
        <span class="ruby-constant">Reline</span>.<span class="ruby-identifier">last_incremental_search</span> = <span class="ruby-identifier">search_word</span>
        <span class="ruby-ivar">@searching_prompt</span> = <span class="ruby-string">&quot;(%s)`%s&#39;&quot;</span> <span class="ruby-operator">%</span> [<span class="ruby-identifier">prompt_name</span>, <span class="ruby-identifier">search_word</span>]
        <span class="ruby-ivar">@searching_prompt</span> <span class="ruby-operator">+=</span> <span class="ruby-string">&#39;: &#39;</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@is_multiline</span>
        <span class="ruby-identifier">move_history</span>(<span class="ruby-identifier">hit_pointer</span>, <span class="ruby-value">line:</span> <span class="ruby-value">:end</span>, <span class="ruby-value">cursor:</span> <span class="ruby-value">:end</span>, <span class="ruby-value">save_buffer:</span> <span class="ruby-keyword">false</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">hit_pointer</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@history_pointer</span>
          <span class="ruby-identifier">line</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">HISTORY</span>[<span class="ruby-ivar">@history_pointer</span>]
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">line</span> = <span class="ruby-ivar">@line_backup_in_history</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-ivar">@line_backup_in_history</span> = <span class="ruby-identifier">whole_buffer</span>
        <span class="ruby-ivar">@buffer_of_lines</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;\n&quot;</span>)
        <span class="ruby-ivar">@buffer_of_lines</span> = [<span class="ruby-constant">String</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">encoding:</span> <span class="ruby-ivar">@encoding</span>)] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">empty?</span>
        <span class="ruby-ivar">@line_index</span> = <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-ivar">@searching_prompt</span> = <span class="ruby-keyword">nil</span>
        <span class="ruby-ivar">@waiting_proc</span> = <span class="ruby-keyword">nil</span>
        <span class="ruby-ivar">@byte_pointer</span> = <span class="ruby-value">0</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  }
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-insert_new_line" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">insert_new_line</span><span
              class="method-args">(cursor_line, next_line)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="insert_new_line-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 275</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">insert_new_line</span>(<span class="ruby-identifier">cursor_line</span>, <span class="ruby-identifier">next_line</span>)
  <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">insert</span>(<span class="ruby-ivar">@line_index</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-constant">String</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">next_line</span>, <span class="ruby-value">encoding:</span> <span class="ruby-ivar">@encoding</span>))
  <span class="ruby-ivar">@buffer_of_lines</span>[<span class="ruby-ivar">@line_index</span>] = <span class="ruby-identifier">cursor_line</span>
  <span class="ruby-ivar">@line_index</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-ivar">@byte_pointer</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@auto_indent_proc</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@in_pasting</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">next_line</span>.<span class="ruby-identifier">empty?</span>
      (
        <span class="ruby-comment"># For compatibility, use this calculation instead of just `process_auto_indent @line_index - 1, cursor_dependent: false`</span>
        <span class="ruby-identifier">indent1</span> = <span class="ruby-ivar">@auto_indent_proc</span>.(<span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">take</span>(<span class="ruby-ivar">@line_index</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">push</span>(<span class="ruby-string">&#39;&#39;</span>), <span class="ruby-ivar">@line_index</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-value">0</span>, <span class="ruby-keyword">true</span>)
        <span class="ruby-identifier">indent2</span> = <span class="ruby-ivar">@auto_indent_proc</span>.(<span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">take</span>(<span class="ruby-ivar">@line_index</span>), <span class="ruby-ivar">@line_index</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@buffer_of_lines</span>[<span class="ruby-ivar">@line_index</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>].<span class="ruby-identifier">bytesize</span>, <span class="ruby-keyword">false</span>)
        <span class="ruby-identifier">indent</span> = <span class="ruby-identifier">indent2</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">indent1</span>
        <span class="ruby-ivar">@buffer_of_lines</span>[<span class="ruby-ivar">@line_index</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>] = <span class="ruby-string">&#39; &#39;</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">indent</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@buffer_of_lines</span>[<span class="ruby-ivar">@line_index</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>].<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\A\s*/</span>, <span class="ruby-string">&#39;&#39;</span>)
      )
      <span class="ruby-identifier">process_auto_indent</span> <span class="ruby-ivar">@line_index</span>, <span class="ruby-value">add_newline:</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">process_auto_indent</span> <span class="ruby-ivar">@line_index</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-value">cursor_dependent:</span> <span class="ruby-keyword">false</span>
      <span class="ruby-identifier">process_auto_indent</span> <span class="ruby-ivar">@line_index</span>, <span class="ruby-value">add_newline:</span> <span class="ruby-keyword">true</span> <span class="ruby-comment"># Need for compatibility</span>
      <span class="ruby-identifier">process_auto_indent</span> <span class="ruby-ivar">@line_index</span>, <span class="ruby-value">cursor_dependent:</span> <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-key_delete" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">key_delete</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="key_delete-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1440</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">key_delete</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode_is?</span>(<span class="ruby-value">:vi_insert</span>)
    <span class="ruby-identifier">ed_delete_next_char</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode_is?</span>(<span class="ruby-value">:emacs</span>)
    <span class="ruby-identifier">em_delete</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-key_newline" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">key_newline</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="key_newline-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1448</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">key_newline</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@is_multiline</span>
    <span class="ruby-identifier">next_line</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-ivar">@byte_pointer</span>, <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@byte_pointer</span>)
    <span class="ruby-identifier">cursor_line</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-value">0</span>, <span class="ruby-ivar">@byte_pointer</span>)
    <span class="ruby-identifier">insert_new_line</span>(<span class="ruby-identifier">cursor_line</span>, <span class="ruby-identifier">next_line</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-menu" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">menu</span><span
              class="method-args">(_target, list)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="menu-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 809</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">menu</span>(<span class="ruby-identifier">_target</span>, <span class="ruby-identifier">list</span>)
  <span class="ruby-ivar">@menu_info</span> = <span class="ruby-constant">MenuInfo</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">list</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-menu_complete" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">menu_complete</span><span
              class="method-args">(_key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="menu_complete-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1481</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">menu_complete</span>(<span class="ruby-identifier">_key</span>)
  <span class="ruby-identifier">completion_journey_move</span>(<span class="ruby-value">:down</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-menu_complete_backward" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">menu_complete_backward</span><span
              class="method-args">(_key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="menu_complete_backward-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1485</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">menu_complete_backward</span>(<span class="ruby-identifier">_key</span>)
  <span class="ruby-identifier">completion_journey_move</span>(<span class="ruby-value">:up</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-modify_lines" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">modify_lines</span><span
              class="method-args">(before, complete)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="modify_lines-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 797</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">modify_lines</span>(<span class="ruby-identifier">before</span>, <span class="ruby-identifier">complete</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">after</span> = <span class="ruby-ivar">@output_modifier_proc</span>&amp;.<span class="ruby-identifier">call</span>(<span class="ruby-node">&quot;#{before.join(&quot;\n&quot;)}\n&quot;</span>, <span class="ruby-value">complete:</span> <span class="ruby-identifier">complete</span>)
    <span class="ruby-identifier">after</span>.<span class="ruby-identifier">lines</span>(<span class="ruby-string">&quot;\n&quot;</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">l</span><span class="ruby-operator">|</span> <span class="ruby-identifier">l</span>.<span class="ruby-identifier">chomp</span>(<span class="ruby-string">&#39;&#39;</span>) }
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">before</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">l</span><span class="ruby-operator">|</span> <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">escape_for_print</span>(<span class="ruby-identifier">l</span>) }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-move_completed_list" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">move_completed_list</span><span
              class="method-args">(direction)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="move_completed_list-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 916</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">move_completed_list</span>(<span class="ruby-identifier">direction</span>)
  <span class="ruby-ivar">@completion_journey_state</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">retrieve_completion_journey_state</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@completion_journey_state</span>

  <span class="ruby-keyword">if</span> (<span class="ruby-identifier">delta</span> = { <span class="ruby-value">up:</span> <span class="ruby-value">-1</span>, <span class="ruby-value">down:</span> <span class="ruby-value">+1</span> }[<span class="ruby-identifier">direction</span>])
    <span class="ruby-ivar">@completion_journey_state</span>.<span class="ruby-identifier">pointer</span> = (<span class="ruby-ivar">@completion_journey_state</span>.<span class="ruby-identifier">pointer</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">delta</span>) <span class="ruby-operator">%</span> <span class="ruby-ivar">@completion_journey_state</span>.<span class="ruby-identifier">list</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">completed</span> = <span class="ruby-ivar">@completion_journey_state</span>.<span class="ruby-identifier">list</span>[<span class="ruby-ivar">@completion_journey_state</span>.<span class="ruby-identifier">pointer</span>]
  <span class="ruby-identifier">set_current_line</span>(<span class="ruby-ivar">@completion_journey_state</span>.<span class="ruby-identifier">pre</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">completed</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@completion_journey_state</span>.<span class="ruby-identifier">post</span>, <span class="ruby-ivar">@completion_journey_state</span>.<span class="ruby-identifier">pre</span>.<span class="ruby-identifier">bytesize</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">completed</span>.<span class="ruby-identifier">bytesize</span>)
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-move_history" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">move_history</span><span
              class="method-args">(history_pointer, line:, cursor:, save_buffer: true)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="move_history-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1789</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">move_history</span>(<span class="ruby-identifier">history_pointer</span>, <span class="ruby-value">line:</span>, <span class="ruby-value">cursor:</span>, <span class="ruby-value">save_buffer:</span> <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">history_pointer</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">HISTORY</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">history_pointer</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">history_pointer</span> <span class="ruby-operator">&gt;</span> <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">HISTORY</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">old_history_pointer</span> = <span class="ruby-ivar">@history_pointer</span> <span class="ruby-operator">||</span> <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">HISTORY</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">old_history_pointer</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">HISTORY</span>.<span class="ruby-identifier">size</span>
    <span class="ruby-ivar">@line_backup_in_history</span> = <span class="ruby-identifier">save_buffer</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">whole_buffer</span> <span class="ruby-operator">:</span> <span class="ruby-string">&#39;&#39;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">HISTORY</span>[<span class="ruby-identifier">old_history_pointer</span>] = <span class="ruby-identifier">whole_buffer</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">save_buffer</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">history_pointer</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">HISTORY</span>.<span class="ruby-identifier">size</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-ivar">@line_backup_in_history</span>
    <span class="ruby-ivar">@history_pointer</span> = <span class="ruby-ivar">@line_backup_in_history</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">buf</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">HISTORY</span>[<span class="ruby-identifier">history_pointer</span>]
    <span class="ruby-ivar">@history_pointer</span> = <span class="ruby-identifier">history_pointer</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@buffer_of_lines</span> = <span class="ruby-identifier">buf</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;\n&quot;</span>)
  <span class="ruby-ivar">@buffer_of_lines</span> = [<span class="ruby-constant">String</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">encoding:</span> <span class="ruby-ivar">@encoding</span>)] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-ivar">@line_index</span> = <span class="ruby-identifier">line</span> <span class="ruby-operator">==</span> <span class="ruby-value">:start</span> <span class="ruby-operator">?</span> <span class="ruby-value">0</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">==</span> <span class="ruby-value">:end</span> <span class="ruby-operator">?</span> <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">line</span>
  <span class="ruby-ivar">@byte_pointer</span> = <span class="ruby-identifier">cursor</span> <span class="ruby-operator">==</span> <span class="ruby-value">:start</span> <span class="ruby-operator">?</span> <span class="ruby-value">0</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">cursor</span> <span class="ruby-operator">==</span> <span class="ruby-value">:end</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">cursor</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-normal_char" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">normal_char</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="normal_char-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1069</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">normal_char</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-ivar">@multibyte_buffer</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">combined_char</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@multibyte_buffer</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@multibyte_buffer</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-ivar">@encoding</span>).<span class="ruby-identifier">valid_encoding?</span>
      <span class="ruby-identifier">process_key</span>(<span class="ruby-ivar">@multibyte_buffer</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-ivar">@encoding</span>), <span class="ruby-keyword">nil</span>)
      <span class="ruby-ivar">@multibyte_buffer</span>.<span class="ruby-identifier">clear</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># invalid</span>
      <span class="ruby-keyword">return</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span> <span class="ruby-comment"># single byte</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">char</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">128</span> <span class="ruby-comment"># maybe, first byte of multi byte</span>
    <span class="ruby-identifier">method_symbol</span> = <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode</span>.<span class="ruby-identifier">get_method</span>(<span class="ruby-identifier">key</span>.<span class="ruby-identifier">combined_char</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">with_meta</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">method_symbol</span> <span class="ruby-operator">==</span> <span class="ruby-value">:ed_unassigned</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode_is?</span>(<span class="ruby-value">:vi_command</span>, <span class="ruby-value">:vi_insert</span>)
        <span class="ruby-comment"># split ESC + key in vi mode</span>
        <span class="ruby-identifier">method_symbol</span> = <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode</span>.<span class="ruby-identifier">get_method</span>(<span class="ruby-string">&quot;\e&quot;</span>.<span class="ruby-identifier">ord</span>)
        <span class="ruby-identifier">process_key</span>(<span class="ruby-string">&quot;\e&quot;</span>.<span class="ruby-identifier">ord</span>, <span class="ruby-identifier">method_symbol</span>)
        <span class="ruby-identifier">method_symbol</span> = <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode</span>.<span class="ruby-identifier">get_method</span>(<span class="ruby-identifier">key</span>.<span class="ruby-identifier">char</span>)
        <span class="ruby-identifier">process_key</span>(<span class="ruby-identifier">key</span>.<span class="ruby-identifier">char</span>, <span class="ruby-identifier">method_symbol</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">process_key</span>(<span class="ruby-identifier">key</span>.<span class="ruby-identifier">combined_char</span>, <span class="ruby-identifier">method_symbol</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@multibyte_buffer</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode_is?</span>(<span class="ruby-value">:vi_command</span>) <span class="ruby-keyword">and</span> <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-keyword">and</span> <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span>
    <span class="ruby-identifier">byte_size</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">get_prev_mbchar_size</span>(<span class="ruby-ivar">@buffer_of_lines</span>[<span class="ruby-ivar">@line_index</span>], <span class="ruby-ivar">@byte_pointer</span>)
    <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">byte_size</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-perform_completion" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">perform_completion</span><span
              class="method-args">(list, just_show_list)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="perform_completion-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 859</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">perform_completion</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">just_show_list</span>)
  <span class="ruby-keyword">case</span> <span class="ruby-ivar">@completion_state</span>
  <span class="ruby-keyword">when</span> <span class="ruby-constant">CompletionState</span><span class="ruby-operator">::</span><span class="ruby-constant">NORMAL</span>
    <span class="ruby-ivar">@completion_state</span> = <span class="ruby-constant">CompletionState</span><span class="ruby-operator">::</span><span class="ruby-constant">COMPLETION</span>
  <span class="ruby-keyword">when</span> <span class="ruby-constant">CompletionState</span><span class="ruby-operator">::</span><span class="ruby-constant">PERFECT_MATCH</span>
    <span class="ruby-ivar">@dig_perfect_match_proc</span>&amp;.(<span class="ruby-ivar">@perfect_matched</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">just_show_list</span>
    <span class="ruby-identifier">is_menu</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@completion_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">CompletionState</span><span class="ruby-operator">::</span><span class="ruby-constant">MENU</span>
    <span class="ruby-identifier">is_menu</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@completion_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">CompletionState</span><span class="ruby-operator">::</span><span class="ruby-constant">MENU_WITH_PERFECT_MATCH</span>
    <span class="ruby-identifier">is_menu</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">is_menu</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">result</span> = <span class="ruby-identifier">complete_internal_proc</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">is_menu</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@completion_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">CompletionState</span><span class="ruby-operator">::</span><span class="ruby-constant">MENU_WITH_PERFECT_MATCH</span>
    <span class="ruby-ivar">@completion_state</span> = <span class="ruby-constant">CompletionState</span><span class="ruby-operator">::</span><span class="ruby-constant">PERFECT_MATCH</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-identifier">target</span>, <span class="ruby-identifier">preposing</span>, <span class="ruby-identifier">completed</span>, <span class="ruby-identifier">postposing</span> = <span class="ruby-identifier">result</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">completed</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">target</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">completed</span> <span class="ruby-keyword">and</span> (<span class="ruby-ivar">@completion_state</span> <span class="ruby-operator">==</span> <span class="ruby-constant">CompletionState</span><span class="ruby-operator">::</span><span class="ruby-constant">COMPLETION</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">list</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">completed</span>)
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">list</span>.<span class="ruby-identifier">one?</span>
        <span class="ruby-ivar">@completion_state</span> = <span class="ruby-constant">CompletionState</span><span class="ruby-operator">::</span><span class="ruby-constant">PERFECT_MATCH</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-ivar">@completion_state</span> = <span class="ruby-constant">CompletionState</span><span class="ruby-operator">::</span><span class="ruby-constant">MENU_WITH_PERFECT_MATCH</span>
        <span class="ruby-identifier">perform_completion</span>(<span class="ruby-identifier">list</span>, <span class="ruby-keyword">true</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">show_all_if_ambiguous</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-ivar">@perfect_matched</span> = <span class="ruby-identifier">completed</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-ivar">@completion_state</span> = <span class="ruby-constant">CompletionState</span><span class="ruby-operator">::</span><span class="ruby-constant">MENU</span>
      <span class="ruby-identifier">perform_completion</span>(<span class="ruby-identifier">list</span>, <span class="ruby-keyword">true</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">show_all_if_ambiguous</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">just_show_list</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">target</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">completed</span>
      <span class="ruby-ivar">@buffer_of_lines</span>[<span class="ruby-ivar">@line_index</span>] = (<span class="ruby-identifier">preposing</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">completed</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">completion_append_character</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">postposing</span>).<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;\n&quot;</span>)[<span class="ruby-ivar">@line_index</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">String</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">encoding:</span> <span class="ruby-ivar">@encoding</span>)
      <span class="ruby-identifier">line_to_pointer</span> = (<span class="ruby-identifier">preposing</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">completed</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">completion_append_character</span>.<span class="ruby-identifier">to_s</span>).<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;\n&quot;</span>)[<span class="ruby-ivar">@line_index</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">String</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">encoding:</span> <span class="ruby-ivar">@encoding</span>)
      <span class="ruby-ivar">@byte_pointer</span> = <span class="ruby-identifier">line_to_pointer</span>.<span class="ruby-identifier">bytesize</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-process_auto_indent" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">process_auto_indent</span><span
              class="method-args">(line_index = @line_index, cursor_dependent: true, add_newline: false)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="process_auto_indent-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1217</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">process_auto_indent</span>(<span class="ruby-identifier">line_index</span> = <span class="ruby-ivar">@line_index</span>, <span class="ruby-value">cursor_dependent:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">add_newline:</span> <span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@in_pasting</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@auto_indent_proc</span>

  <span class="ruby-identifier">line</span> = <span class="ruby-ivar">@buffer_of_lines</span>[<span class="ruby-identifier">line_index</span>]
  <span class="ruby-identifier">byte_pointer</span> = <span class="ruby-identifier">cursor_dependent</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@line_index</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">line_index</span> <span class="ruby-operator">?</span> <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">bytesize</span>
  <span class="ruby-identifier">new_indent</span> = <span class="ruby-ivar">@auto_indent_proc</span>.(<span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">take</span>(<span class="ruby-identifier">line_index</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">push</span>(<span class="ruby-string">&#39;&#39;</span>), <span class="ruby-identifier">line_index</span>, <span class="ruby-identifier">byte_pointer</span>, <span class="ruby-identifier">add_newline</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">new_indent</span>

  <span class="ruby-identifier">new_line</span> = <span class="ruby-string">&#39; &#39;</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">new_indent</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">lstrip</span>
  <span class="ruby-ivar">@buffer_of_lines</span>[<span class="ruby-identifier">line_index</span>] = <span class="ruby-identifier">new_line</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@line_index</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">line_index</span>
    <span class="ruby-identifier">indent_diff</span> = <span class="ruby-identifier">new_line</span>.<span class="ruby-identifier">bytesize</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">bytesize</span>
    <span class="ruby-ivar">@byte_pointer</span> = [<span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">indent_diff</span>, <span class="ruby-value">0</span>].<span class="ruby-identifier">max</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-process_insert" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">process_insert</span><span
              class="method-args">(force: false)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="process_insert-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1497</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">process_insert</span>(<span class="ruby-value">force:</span> <span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@continuous_insertion_buffer</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword">or</span> (<span class="ruby-ivar">@in_pasting</span> <span class="ruby-keyword">and</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">force</span>)
  <span class="ruby-identifier">insert_text</span>(<span class="ruby-ivar">@continuous_insertion_buffer</span>)
  <span class="ruby-ivar">@continuous_insertion_buffer</span>.<span class="ruby-identifier">clear</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-process_key" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">process_key</span><span
              class="method-args">(key, method_symbol)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="process_key-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1005</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">process_key</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">method_symbol</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Symbol</span>)
    <span class="ruby-identifier">cleanup_waiting</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@waiting_proc</span>
    <span class="ruby-identifier">old_byte_pointer</span> = <span class="ruby-ivar">@byte_pointer</span>
    <span class="ruby-ivar">@waiting_proc</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">key</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@vi_waiting_operator</span>
      <span class="ruby-identifier">byte_pointer_diff</span> = <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">old_byte_pointer</span>
      <span class="ruby-ivar">@byte_pointer</span> = <span class="ruby-identifier">old_byte_pointer</span>
      <span class="ruby-identifier">method_obj</span> = <span class="ruby-identifier">method</span>(<span class="ruby-ivar">@vi_waiting_operator</span>)
      <span class="ruby-identifier">wrap_method_call</span>(<span class="ruby-ivar">@vi_waiting_operator</span>, <span class="ruby-identifier">method_obj</span>, <span class="ruby-identifier">byte_pointer_diff</span>)
      <span class="ruby-identifier">cleanup_waiting</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@kill_ring</span>.<span class="ruby-identifier">process</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">method_symbol</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">method_symbol</span>, <span class="ruby-keyword">true</span>)
    <span class="ruby-identifier">method_obj</span> = <span class="ruby-identifier">method</span>(<span class="ruby-identifier">method_symbol</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">method_symbol</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Symbol</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@vi_arg</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">argumentable?</span>(<span class="ruby-identifier">method_obj</span>)
      <span class="ruby-identifier">run_for_operators</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">method_symbol</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">with_operator</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">wrap_method_call</span>(<span class="ruby-identifier">method_symbol</span>, <span class="ruby-identifier">method_obj</span>, <span class="ruby-identifier">key</span>, <span class="ruby-identifier">with_operator</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">wrap_method_call</span>(<span class="ruby-identifier">method_symbol</span>, <span class="ruby-identifier">method_obj</span>, <span class="ruby-identifier">key</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">method_obj</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@kill_ring</span>.<span class="ruby-identifier">process</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@vi_arg</span>
      <span class="ruby-ivar">@vi_arg</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@vi_arg</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">chr</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/[0-9]/</span>
      <span class="ruby-identifier">ed_argument_digit</span>(<span class="ruby-identifier">key</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">argumentable?</span>(<span class="ruby-identifier">method_obj</span>)
        <span class="ruby-identifier">run_for_operators</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">method_symbol</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">with_operator</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">wrap_method_call</span>(<span class="ruby-identifier">method_symbol</span>, <span class="ruby-identifier">method_obj</span>, <span class="ruby-identifier">key</span>, <span class="ruby-identifier">with_operator</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">method_obj</span>
        <span class="ruby-identifier">wrap_method_call</span>(<span class="ruby-identifier">method_symbol</span>, <span class="ruby-identifier">method_obj</span>, <span class="ruby-identifier">key</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">ed_insert</span>(<span class="ruby-identifier">key</span>) <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode_is?</span>(<span class="ruby-value">:vi_command</span>)
      <span class="ruby-keyword">end</span>
      <span class="ruby-ivar">@kill_ring</span>.<span class="ruby-identifier">process</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@vi_arg</span>
        <span class="ruby-ivar">@vi_arg</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">method_obj</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">method_symbol</span> <span class="ruby-operator">==</span> <span class="ruby-value">:ed_argument_digit</span>
      <span class="ruby-identifier">wrap_method_call</span>(<span class="ruby-identifier">method_symbol</span>, <span class="ruby-identifier">method_obj</span>, <span class="ruby-identifier">key</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">run_for_operators</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">method_symbol</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">with_operator</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">wrap_method_call</span>(<span class="ruby-identifier">method_symbol</span>, <span class="ruby-identifier">method_obj</span>, <span class="ruby-identifier">key</span>, <span class="ruby-identifier">with_operator</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@kill_ring</span>.<span class="ruby-identifier">process</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">ed_insert</span>(<span class="ruby-identifier">key</span>) <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode_is?</span>(<span class="ruby-value">:vi_command</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-retrieve_completion_journey_state" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">retrieve_completion_journey_state</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="retrieve_completion_journey_state-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 928</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">retrieve_completion_journey_state</span>
  <span class="ruby-identifier">preposing</span>, <span class="ruby-identifier">target</span>, <span class="ruby-identifier">postposing</span> = <span class="ruby-identifier">retrieve_completion_block</span>
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">call_completion_proc</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">list</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)

  <span class="ruby-identifier">candidates</span> = <span class="ruby-identifier">list</span>.<span class="ruby-identifier">select</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">item</span><span class="ruby-operator">|</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">start_with?</span>(<span class="ruby-identifier">target</span>) }
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">candidates</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">pre</span> = <span class="ruby-identifier">preposing</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;\n&quot;</span>, <span class="ruby-value">-1</span>).<span class="ruby-identifier">last</span> <span class="ruby-operator">||</span> <span class="ruby-string">&#39;&#39;</span>
  <span class="ruby-identifier">post</span> = <span class="ruby-identifier">postposing</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;\n&quot;</span>, <span class="ruby-value">-1</span>).<span class="ruby-identifier">first</span> <span class="ruby-operator">||</span> <span class="ruby-string">&#39;&#39;</span>
  <span class="ruby-constant">CompletionJourneyState</span>.<span class="ruby-identifier">new</span>(
    <span class="ruby-ivar">@line_index</span>, <span class="ruby-identifier">pre</span>, <span class="ruby-identifier">target</span>, <span class="ruby-identifier">post</span>, [<span class="ruby-identifier">target</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">candidates</span>, <span class="ruby-value">0</span>
  )
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-run_for_operators" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">run_for_operators</span><span
              class="method-args">(key, method_symbol, &amp;block)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="run_for_operators-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 943</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">run_for_operators</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">method_symbol</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@vi_waiting_operator</span>
    <span class="ruby-keyword">if</span> <span class="ruby-constant">VI_MOTIONS</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">method_symbol</span>)
      <span class="ruby-identifier">old_byte_pointer</span> = <span class="ruby-ivar">@byte_pointer</span>
      <span class="ruby-ivar">@vi_arg</span> = (<span class="ruby-ivar">@vi_arg</span> <span class="ruby-operator">||</span> <span class="ruby-value">1</span>) <span class="ruby-operator">*</span> <span class="ruby-ivar">@vi_waiting_operator_arg</span>
      <span class="ruby-identifier">block</span>.(<span class="ruby-keyword">true</span>)
      <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@waiting_proc</span>
        <span class="ruby-identifier">byte_pointer_diff</span> = <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">old_byte_pointer</span>
        <span class="ruby-ivar">@byte_pointer</span> = <span class="ruby-identifier">old_byte_pointer</span>
        <span class="ruby-identifier">method_obj</span> = <span class="ruby-identifier">method</span>(<span class="ruby-ivar">@vi_waiting_operator</span>)
        <span class="ruby-identifier">wrap_method_call</span>(<span class="ruby-ivar">@vi_waiting_operator</span>, <span class="ruby-identifier">method_obj</span>, <span class="ruby-identifier">byte_pointer_diff</span>)
        <span class="ruby-identifier">cleanup_waiting</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># Ignores operator when not motion is given.</span>
      <span class="ruby-identifier">block</span>.(<span class="ruby-keyword">false</span>)
      <span class="ruby-identifier">cleanup_waiting</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@vi_arg</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">block</span>.(<span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-search_history" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">search_history</span><span
              class="method-args">(prefix, pointer_range)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="search_history-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1751</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">search_history</span>(<span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">pointer_range</span>)
  <span class="ruby-identifier">pointer_range</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pointer</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">lines</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">HISTORY</span>[<span class="ruby-identifier">pointer</span>].<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;\n&quot;</span>)
    <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">each_with_index</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span>, <span class="ruby-identifier">index</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">return</span> [<span class="ruby-identifier">pointer</span>, <span class="ruby-identifier">index</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">start_with?</span>(<span class="ruby-identifier">prefix</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-search_next_char" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">search_next_char</span><span
              class="method-args">(key, arg, need_prev_char: false, inclusive: false)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="search_next_char-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2411</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">search_next_char</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">arg</span>, <span class="ruby-value">need_prev_char:</span> <span class="ruby-keyword">false</span>, <span class="ruby-value">inclusive:</span> <span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">instance_of?</span>(<span class="ruby-constant">String</span>)
    <span class="ruby-identifier">inputed_char</span> = <span class="ruby-identifier">key</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">inputed_char</span> = <span class="ruby-identifier">key</span>.<span class="ruby-identifier">chr</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">prev_total</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">total</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">found</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-ivar">@byte_pointer</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>).<span class="ruby-identifier">grapheme_clusters</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">mbchar</span><span class="ruby-operator">|</span>
    <span class="ruby-comment"># total has [byte_size, cursor]</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">total</span>
      <span class="ruby-comment"># skip cursor point</span>
      <span class="ruby-identifier">width</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">get_mbchar_width</span>(<span class="ruby-identifier">mbchar</span>)
      <span class="ruby-identifier">total</span> = [<span class="ruby-identifier">mbchar</span>.<span class="ruby-identifier">bytesize</span>, <span class="ruby-identifier">width</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">inputed_char</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">mbchar</span>
        <span class="ruby-identifier">arg</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">zero?</span>
          <span class="ruby-identifier">found</span> = <span class="ruby-keyword">true</span>
          <span class="ruby-keyword">break</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">width</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">get_mbchar_width</span>(<span class="ruby-identifier">mbchar</span>)
      <span class="ruby-identifier">prev_total</span> = <span class="ruby-identifier">total</span>
      <span class="ruby-identifier">total</span> = [<span class="ruby-identifier">total</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">mbchar</span>.<span class="ruby-identifier">bytesize</span>, <span class="ruby-identifier">total</span>.<span class="ruby-identifier">last</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">width</span>]
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">need_prev_char</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">found</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">total</span>
    <span class="ruby-identifier">byte_size</span>, <span class="ruby-identifier">_</span> = <span class="ruby-identifier">total</span>
    <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">byte_size</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">need_prev_char</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">found</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">prev_total</span>
    <span class="ruby-identifier">byte_size</span>, <span class="ruby-identifier">_</span> = <span class="ruby-identifier">prev_total</span>
    <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">byte_size</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">inclusive</span>
    <span class="ruby-identifier">byte_size</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">get_next_mbchar_size</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">byte_size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
      <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">byte_size</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@waiting_proc</span> = <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-search_prev_char" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">search_prev_char</span><span
              class="method-args">(key, arg, need_next_char = false)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="search_prev_char-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2463</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">search_prev_char</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">arg</span>, <span class="ruby-identifier">need_next_char</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">instance_of?</span>(<span class="ruby-constant">String</span>)
    <span class="ruby-identifier">inputed_char</span> = <span class="ruby-identifier">key</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">inputed_char</span> = <span class="ruby-identifier">key</span>.<span class="ruby-identifier">chr</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">prev_total</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">total</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">found</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-ivar">@byte_pointer</span>).<span class="ruby-identifier">grapheme_clusters</span>.<span class="ruby-identifier">reverse_each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">mbchar</span><span class="ruby-operator">|</span>
    <span class="ruby-comment"># total has [byte_size, cursor]</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">total</span>
      <span class="ruby-comment"># skip cursor point</span>
      <span class="ruby-identifier">width</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">get_mbchar_width</span>(<span class="ruby-identifier">mbchar</span>)
      <span class="ruby-identifier">total</span> = [<span class="ruby-identifier">mbchar</span>.<span class="ruby-identifier">bytesize</span>, <span class="ruby-identifier">width</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">inputed_char</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">mbchar</span>
        <span class="ruby-identifier">arg</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">zero?</span>
          <span class="ruby-identifier">found</span> = <span class="ruby-keyword">true</span>
          <span class="ruby-keyword">break</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">width</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">get_mbchar_width</span>(<span class="ruby-identifier">mbchar</span>)
      <span class="ruby-identifier">prev_total</span> = <span class="ruby-identifier">total</span>
      <span class="ruby-identifier">total</span> = [<span class="ruby-identifier">total</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">mbchar</span>.<span class="ruby-identifier">bytesize</span>, <span class="ruby-identifier">total</span>.<span class="ruby-identifier">last</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">width</span>]
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">need_next_char</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">found</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">total</span>
    <span class="ruby-identifier">byte_size</span>, <span class="ruby-identifier">_</span> = <span class="ruby-identifier">total</span>
    <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">byte_size</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">need_next_char</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">found</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">prev_total</span>
    <span class="ruby-identifier">byte_size</span>, <span class="ruby-identifier">_</span> = <span class="ruby-identifier">prev_total</span>
    <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">byte_size</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@waiting_proc</span> = <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-split_by_width" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">split_by_width</span><span
              class="method-args">(str, max_width, offset: 0)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="split_by_width-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 298</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">split_by_width</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">max_width</span>, <span class="ruby-value">offset:</span> <span class="ruby-value">0</span>)
  <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">split_by_width</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">max_width</span>, <span class="ruby-ivar">@encoding</span>, <span class="ruby-value">offset:</span> <span class="ruby-identifier">offset</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-undo" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">undo</span><span
              class="method-args">(_key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="undo-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2531</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">undo</span>(<span class="ruby-identifier">_key</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@past_lines</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-ivar">@undoing</span> = <span class="ruby-keyword">true</span>

  <span class="ruby-identifier">target_lines</span>, <span class="ruby-identifier">target_cursor_x</span>, <span class="ruby-identifier">target_cursor_y</span> = <span class="ruby-ivar">@past_lines</span>.<span class="ruby-identifier">last</span>
  <span class="ruby-identifier">set_current_lines</span>(<span class="ruby-identifier">target_lines</span>, <span class="ruby-identifier">target_cursor_x</span>, <span class="ruby-identifier">target_cursor_y</span>)

  <span class="ruby-ivar">@past_lines</span>.<span class="ruby-identifier">pop</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-update_each_dialog" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">update_each_dialog</span><span
              class="method-args">(dialog, cursor_column, cursor_row, key = nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="update_each_dialog-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 713</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">update_each_dialog</span>(<span class="ruby-identifier">dialog</span>, <span class="ruby-identifier">cursor_column</span>, <span class="ruby-identifier">cursor_row</span>, <span class="ruby-identifier">key</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">set_cursor_pos</span>(<span class="ruby-identifier">cursor_column</span>, <span class="ruby-identifier">cursor_row</span>)
  <span class="ruby-identifier">dialog_render_info</span> = <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">dialog_render_info</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">dialog_render_info</span>.<span class="ruby-identifier">contents</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">dialog_render_info</span>.<span class="ruby-identifier">contents</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">contents</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">trap_key</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">contents</span> = <span class="ruby-identifier">dialog_render_info</span>.<span class="ruby-identifier">contents</span>
  <span class="ruby-identifier">pointer</span> = <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">pointer</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">dialog_render_info</span>.<span class="ruby-identifier">width</span>
    <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">width</span> = <span class="ruby-identifier">dialog_render_info</span>.<span class="ruby-identifier">width</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">width</span> = <span class="ruby-identifier">contents</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">l</span><span class="ruby-operator">|</span> <span class="ruby-identifier">calculate_width</span>(<span class="ruby-identifier">l</span>, <span class="ruby-keyword">true</span>) }.<span class="ruby-identifier">max</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">height</span> = <span class="ruby-identifier">dialog_render_info</span>.<span class="ruby-identifier">height</span> <span class="ruby-operator">||</span> <span class="ruby-constant">DIALOG_DEFAULT_HEIGHT</span>
  <span class="ruby-identifier">height</span> = <span class="ruby-identifier">contents</span>.<span class="ruby-identifier">size</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">contents</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">height</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">contents</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">height</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">pointer</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">pointer</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">scroll_top</span> = <span class="ruby-value">0</span>
      <span class="ruby-keyword">elsif</span> (<span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">pointer</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">scroll_top</span>) <span class="ruby-operator">&gt;=</span> (<span class="ruby-identifier">height</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>)
        <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">scroll_top</span> = <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">pointer</span> <span class="ruby-operator">-</span> (<span class="ruby-identifier">height</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>)
      <span class="ruby-keyword">elsif</span> (<span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">pointer</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">scroll_top</span>) <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">scroll_top</span> = <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">pointer</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">pointer</span> = <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">pointer</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">scroll_top</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">scroll_top</span> = <span class="ruby-value">0</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">contents</span> = <span class="ruby-identifier">contents</span>[<span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">scroll_top</span>, <span class="ruby-identifier">height</span>]
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">dialog_render_info</span>.<span class="ruby-identifier">scrollbar</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">dialog_render_info</span>.<span class="ruby-identifier">contents</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">height</span>
    <span class="ruby-identifier">bar_max_height</span> = <span class="ruby-identifier">height</span> <span class="ruby-operator">*</span> <span class="ruby-value">2</span>
    <span class="ruby-identifier">moving_distance</span> = (<span class="ruby-identifier">dialog_render_info</span>.<span class="ruby-identifier">contents</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">height</span>) <span class="ruby-operator">*</span> <span class="ruby-value">2</span>
    <span class="ruby-identifier">position_ratio</span> = <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">scroll_top</span>.<span class="ruby-identifier">zero?</span> <span class="ruby-operator">?</span> <span class="ruby-value">0.0</span> <span class="ruby-operator">:</span> ((<span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">scroll_top</span> <span class="ruby-operator">*</span> <span class="ruby-value">2</span>).<span class="ruby-identifier">to_f</span> <span class="ruby-operator">/</span> <span class="ruby-identifier">moving_distance</span>)
    <span class="ruby-identifier">bar_height</span> = (<span class="ruby-identifier">bar_max_height</span> <span class="ruby-operator">*</span> ((<span class="ruby-identifier">contents</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">*</span> <span class="ruby-value">2</span>).<span class="ruby-identifier">to_f</span> <span class="ruby-operator">/</span> (<span class="ruby-identifier">dialog_render_info</span>.<span class="ruby-identifier">contents</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">*</span> <span class="ruby-value">2</span>))).<span class="ruby-identifier">floor</span>.<span class="ruby-identifier">to_i</span>
    <span class="ruby-identifier">bar_height</span> = <span class="ruby-constant">MINIMUM_SCROLLBAR_HEIGHT</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">bar_height</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">MINIMUM_SCROLLBAR_HEIGHT</span>
    <span class="ruby-identifier">scrollbar_pos</span> = ((<span class="ruby-identifier">bar_max_height</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">bar_height</span>) <span class="ruby-operator">*</span> <span class="ruby-identifier">position_ratio</span>).<span class="ruby-identifier">floor</span>.<span class="ruby-identifier">to_i</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">scrollbar_pos</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">column</span> = <span class="ruby-identifier">dialog_render_info</span>.<span class="ruby-identifier">pos</span>.<span class="ruby-identifier">x</span>
  <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">width</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@block_elem_width</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">scrollbar_pos</span>
  <span class="ruby-identifier">diff</span> = (<span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">column</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">width</span>) <span class="ruby-operator">-</span> <span class="ruby-identifier">screen_width</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">diff</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">column</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">diff</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">rest_height</span>(<span class="ruby-identifier">screen_scroll_top</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">cursor_row</span>) <span class="ruby-operator">-</span> <span class="ruby-identifier">dialog_render_info</span>.<span class="ruby-identifier">pos</span>.<span class="ruby-identifier">y</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">height</span>
    <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">vertical_offset</span> = <span class="ruby-identifier">dialog_render_info</span>.<span class="ruby-identifier">pos</span>.<span class="ruby-identifier">y</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">cursor_row</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">height</span>
    <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">vertical_offset</span> = <span class="ruby-identifier">dialog_render_info</span>.<span class="ruby-identifier">pos</span>.<span class="ruby-identifier">y</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">height</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">vertical_offset</span> = <span class="ruby-identifier">dialog_render_info</span>.<span class="ruby-identifier">pos</span>.<span class="ruby-identifier">y</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">column</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">column</span> = <span class="ruby-value">0</span>
    <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">width</span> = <span class="ruby-identifier">screen_width</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">face</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Face</span>[<span class="ruby-identifier">dialog_render_info</span>.<span class="ruby-identifier">face</span> <span class="ruby-operator">||</span> <span class="ruby-value">:default</span>]
  <span class="ruby-identifier">scrollbar_sgr</span> = <span class="ruby-identifier">face</span>[<span class="ruby-value">:scrollbar</span>]
  <span class="ruby-identifier">default_sgr</span> = <span class="ruby-identifier">face</span>[<span class="ruby-value">:default</span>]
  <span class="ruby-identifier">enhanced_sgr</span> = <span class="ruby-identifier">face</span>[<span class="ruby-value">:enhanced</span>]
  <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">contents</span> = <span class="ruby-identifier">contents</span>.<span class="ruby-identifier">map</span>.<span class="ruby-identifier">with_index</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">item</span>, <span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">line_sgr</span> = <span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pointer</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">enhanced_sgr</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">default_sgr</span>
    <span class="ruby-identifier">str_width</span> = <span class="ruby-identifier">dialog</span>.<span class="ruby-identifier">width</span> <span class="ruby-operator">-</span> (<span class="ruby-identifier">scrollbar_pos</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">?</span> <span class="ruby-value">0</span> <span class="ruby-operator">:</span> <span class="ruby-ivar">@block_elem_width</span>)
    <span class="ruby-identifier">str</span>, = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">take_mbchar_range</span>(<span class="ruby-identifier">item</span>, <span class="ruby-value">0</span>, <span class="ruby-identifier">str_width</span>, <span class="ruby-value">padding:</span> <span class="ruby-keyword">true</span>)
    <span class="ruby-identifier">colored_content</span> = <span class="ruby-node">&quot;#{line_sgr}#{str}&quot;</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">scrollbar_pos</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">scrollbar_pos</span> <span class="ruby-operator">&lt;=</span> (<span class="ruby-identifier">i</span> <span class="ruby-operator">*</span> <span class="ruby-value">2</span>) <span class="ruby-keyword">and</span> (<span class="ruby-identifier">i</span> <span class="ruby-operator">*</span> <span class="ruby-value">2</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>) <span class="ruby-operator">&lt;</span> (<span class="ruby-identifier">scrollbar_pos</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">bar_height</span>)
        <span class="ruby-identifier">colored_content</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">scrollbar_sgr</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@full_block</span>
      <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">scrollbar_pos</span> <span class="ruby-operator">&lt;=</span> (<span class="ruby-identifier">i</span> <span class="ruby-operator">*</span> <span class="ruby-value">2</span>) <span class="ruby-keyword">and</span> (<span class="ruby-identifier">i</span> <span class="ruby-operator">*</span> <span class="ruby-value">2</span>) <span class="ruby-operator">&lt;</span> (<span class="ruby-identifier">scrollbar_pos</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">bar_height</span>)
        <span class="ruby-identifier">colored_content</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">scrollbar_sgr</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@upper_half_block</span>
      <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">scrollbar_pos</span> <span class="ruby-operator">&lt;=</span> (<span class="ruby-identifier">i</span> <span class="ruby-operator">*</span> <span class="ruby-value">2</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>) <span class="ruby-keyword">and</span> (<span class="ruby-identifier">i</span> <span class="ruby-operator">*</span> <span class="ruby-value">2</span>) <span class="ruby-operator">&lt;</span> (<span class="ruby-identifier">scrollbar_pos</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">bar_height</span>)
        <span class="ruby-identifier">colored_content</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">scrollbar_sgr</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@lower_half_block</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">colored_content</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">scrollbar_sgr</span> <span class="ruby-operator">+</span> <span class="ruby-string">&#39; &#39;</span> <span class="ruby-operator">*</span> <span class="ruby-ivar">@block_elem_width</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">colored_content</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_add" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_add</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_add-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2113</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_add</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode</span> = <span class="ruby-value">:vi_insert</span>
  <span class="ruby-identifier">ed_next_char</span>(<span class="ruby-identifier">key</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_add_at_eol" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_add_at_eol</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_add_at_eol-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2209</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_add_at_eol</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-identifier">ed_move_to_end</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode</span> = <span class="ruby-value">:vi_insert</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_change_meta" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_change_meta</span><span
              class="method-args">(key, arg: nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_change_meta-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2228</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_change_meta</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@vi_waiting_operator</span>
    <span class="ruby-identifier">set_current_line</span>(<span class="ruby-string">&#39;&#39;</span>, <span class="ruby-value">0</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@vi_waiting_operator</span> <span class="ruby-operator">==</span> <span class="ruby-value">:vi_change_meta_confirm</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-ivar">@vi_waiting_operator</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-ivar">@vi_waiting_operator_arg</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@drop_terminate_spaces</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-ivar">@vi_waiting_operator</span> = <span class="ruby-value">:vi_change_meta_confirm</span>
    <span class="ruby-ivar">@vi_waiting_operator_arg</span> = <span class="ruby-identifier">arg</span> <span class="ruby-operator">||</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_change_meta_confirm" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_change_meta_confirm</span><span
              class="method-args">(byte_pointer_diff)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_change_meta_confirm-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2240</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_change_meta_confirm</span>(<span class="ruby-identifier">byte_pointer_diff</span>)
  <span class="ruby-identifier">vi_delete_meta_confirm</span>(<span class="ruby-identifier">byte_pointer_diff</span>)
  <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode</span> = <span class="ruby-value">:vi_insert</span>
  <span class="ruby-ivar">@drop_terminate_spaces</span> = <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_change_to_eol" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_change_to_eol</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <dl class="rdoc-list note-list"><dt>Editline
<dd>
<p><code>vi_change_to_eol</code> (vi command: <code>C</code>) + Kill and change from the cursor to the end of the line.</p>
</dd></dl>

          <div class="method-source-code" id="vi_change_to_eol-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1907</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_change_to_eol</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-identifier">ed_kill_line</span>(<span class="ruby-identifier">key</span>)

  <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode</span> = <span class="ruby-value">:vi_insert</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_command_mode" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_command_mode</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_command_mode-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2118</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_command_mode</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-identifier">ed_prev_char</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode</span> = <span class="ruby-value">:vi_command</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-vi_movement_mode">vi_movement_mode</a>
        </div>

      </div>

      <div id="method-i-vi_delete_meta" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_delete_meta</span><span
              class="method-args">(key, arg: nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_delete_meta-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2246</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_delete_meta</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@vi_waiting_operator</span>
    <span class="ruby-identifier">set_current_line</span>(<span class="ruby-string">&#39;&#39;</span>, <span class="ruby-value">0</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@vi_waiting_operator</span> <span class="ruby-operator">==</span> <span class="ruby-value">:vi_delete_meta_confirm</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-ivar">@vi_waiting_operator</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-ivar">@vi_waiting_operator_arg</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@vi_waiting_operator</span> = <span class="ruby-value">:vi_delete_meta_confirm</span>
    <span class="ruby-ivar">@vi_waiting_operator_arg</span> = <span class="ruby-identifier">arg</span> <span class="ruby-operator">||</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_delete_meta_confirm" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_delete_meta_confirm</span><span
              class="method-args">(byte_pointer_diff)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_delete_meta_confirm-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2257</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_delete_meta_confirm</span>(<span class="ruby-identifier">byte_pointer_diff</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">byte_pointer_diff</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">line</span>, <span class="ruby-identifier">cut</span> = <span class="ruby-identifier">byteslice!</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>, <span class="ruby-identifier">byte_pointer_diff</span>)
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">byte_pointer_diff</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">line</span>, <span class="ruby-identifier">cut</span> = <span class="ruby-identifier">byteslice!</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">byte_pointer_diff</span>, <span class="ruby-operator">-</span><span class="ruby-identifier">byte_pointer_diff</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">copy_for_vi</span>(<span class="ruby-identifier">cut</span>)
  <span class="ruby-identifier">set_current_line</span>(<span class="ruby-identifier">line</span> <span class="ruby-operator">||</span> <span class="ruby-string">&#39;&#39;</span>, <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">byte_pointer_diff</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">byte_pointer_diff</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_delete_prev_char" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_delete_prev_char</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_delete_prev_char-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2190</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_delete_prev_char</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-keyword">and</span> <span class="ruby-ivar">@line_index</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-ivar">@byte_pointer</span> = <span class="ruby-ivar">@buffer_of_lines</span>[<span class="ruby-ivar">@line_index</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>].<span class="ruby-identifier">bytesize</span>
    <span class="ruby-ivar">@buffer_of_lines</span>[<span class="ruby-ivar">@line_index</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>] <span class="ruby-operator">+=</span> <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">delete_at</span>(<span class="ruby-ivar">@line_index</span>)
    <span class="ruby-ivar">@line_index</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
    <span class="ruby-identifier">process_auto_indent</span> <span class="ruby-value">cursor_dependent:</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">byte_size</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">get_prev_mbchar_size</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>)
    <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">byte_size</span>
    <span class="ruby-identifier">line</span>, <span class="ruby-identifier">_</span> = <span class="ruby-identifier">byteslice!</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>, <span class="ruby-identifier">byte_size</span>)
    <span class="ruby-identifier">set_current_line</span>(<span class="ruby-identifier">line</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_editing_mode" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_editing_mode</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_editing_mode-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2527</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_editing_mode</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode</span> = <span class="ruby-value">:vi_insert</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_end_big_word" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_end_big_word</span><span
              class="method-args">(key, arg: 1, inclusive: false)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_end_big_word-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2175</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_end_big_word</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-value">1</span>, <span class="ruby-value">inclusive:</span> <span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span> <span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@byte_pointer</span>
    <span class="ruby-identifier">byte_size</span>, <span class="ruby-identifier">_</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">vi_big_forward_end_word</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>)
    <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">byte_size</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">arg</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">inclusive</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">zero?</span>
    <span class="ruby-identifier">byte_size</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">get_next_mbchar_size</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">byte_size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
      <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">byte_size</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">vi_end_big_word</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-identifier">arg</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">arg</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_end_word" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_end_word</span><span
              class="method-args">(key, arg: 1, inclusive: false)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_end_word-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2142</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_end_word</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-value">1</span>, <span class="ruby-value">inclusive:</span> <span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span> <span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@byte_pointer</span>
    <span class="ruby-identifier">byte_size</span>, <span class="ruby-identifier">_</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">vi_forward_end_word</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>)
    <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">byte_size</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">arg</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">inclusive</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">zero?</span>
    <span class="ruby-identifier">byte_size</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">get_next_mbchar_size</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">byte_size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
      <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">byte_size</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">vi_end_word</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-identifier">arg</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">arg</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_first_print" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_first_print</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_first_print-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1586</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_first_print</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-ivar">@byte_pointer</span>, = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">vi_first_print</span>(<span class="ruby-identifier">current_line</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_histedit" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_histedit</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_histedit-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2322</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_histedit</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-identifier">path</span> = <span class="ruby-constant">Tempfile</span>.<span class="ruby-identifier">open</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">fp</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">fp</span>.<span class="ruby-identifier">write</span> <span class="ruby-identifier">whole_lines</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n&quot;</span>)
    <span class="ruby-identifier">fp</span>.<span class="ruby-identifier">path</span>
  }
  <span class="ruby-identifier">system</span>(<span class="ruby-node">&quot;#{ENV[&#39;EDITOR&#39;]} #{path}&quot;</span>)
  <span class="ruby-ivar">@buffer_of_lines</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;\n&quot;</span>)
  <span class="ruby-ivar">@buffer_of_lines</span> = [<span class="ruby-constant">String</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">encoding:</span> <span class="ruby-ivar">@encoding</span>)] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-ivar">@line_index</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">finish</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_insert" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_insert</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_insert-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2109</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_insert</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode</span> = <span class="ruby-value">:vi_insert</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_insert_at_bol" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_insert_at_bol</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_insert_at_bol-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2204</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_insert_at_bol</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-identifier">ed_move_to_beg</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">editing_mode</span> = <span class="ruby-value">:vi_insert</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_join_lines" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_join_lines</span><span
              class="method-args">(key, arg: 1)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_join_lines-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2501</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_join_lines</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-value">1</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@line_index</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
    <span class="ruby-identifier">next_line</span> = <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">delete_at</span>(<span class="ruby-ivar">@line_index</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">lstrip</span>
    <span class="ruby-identifier">set_current_line</span>(<span class="ruby-identifier">current_line</span> <span class="ruby-operator">+</span> <span class="ruby-string">&#39; &#39;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">next_line</span>, <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">arg</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">vi_join_lines</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-identifier">arg</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">arg</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_kill_line_prev" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_kill_line_prev</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <dl class="rdoc-list note-list"><dt>Editline
<dd>
<p><code>vi-kill-line-prev</code> (vi: <code>Ctrl-U</code>) Delete the string from the beginning  of the edit buffer to the cursor and save it to the cut buffer.</p>
</dd><dt>GNU <a href="../Readline.html"><code>Readline</code></a>
<dd>
<p><code>unix-line-discard</code> (<code>C-u</code>) Kill backward from the cursor to the beginning of the current line.</p>
</dd></dl>

          <div class="method-source-code" id="vi_kill_line_prev-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1918</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_kill_line_prev</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">line</span>, <span class="ruby-identifier">deleted</span> = <span class="ruby-identifier">byteslice!</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-value">0</span>, <span class="ruby-ivar">@byte_pointer</span>)
    <span class="ruby-identifier">set_current_line</span>(<span class="ruby-identifier">line</span>, <span class="ruby-value">0</span>)
    <span class="ruby-ivar">@kill_ring</span>.<span class="ruby-identifier">append</span>(<span class="ruby-identifier">deleted</span>, <span class="ruby-keyword">true</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-unix_line_discard">unix_line_discard</a>
        </div>

      </div>

      <div id="method-i-vi_list_or_eof" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_list_or_eof</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_list_or_eof-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2287</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_list_or_eof</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword">and</span> <span class="ruby-ivar">@buffer_of_lines</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
    <span class="ruby-identifier">set_current_line</span>(<span class="ruby-string">&#39;&#39;</span>, <span class="ruby-value">0</span>)
    <span class="ruby-ivar">@eof</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-identifier">finish</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">ed_newline</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-vi_end_of_transmission">vi_end_of_transmission</a>, <a href="LineEditor.html#method-i-vi_eof_maybe">vi_eof_maybe</a>
        </div>

      </div>

      <div id="method-i-vi_next_big_word" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_next_big_word</span><span
              class="method-args">(key, arg: 1)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_next_big_word-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2157</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_next_big_word</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-value">1</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span> <span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@byte_pointer</span>
    <span class="ruby-identifier">byte_size</span>, <span class="ruby-identifier">_</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">vi_big_forward_word</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>)
    <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">byte_size</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">arg</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">vi_next_big_word</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-identifier">arg</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">arg</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_next_char" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_next_char</span><span
              class="method-args">(key, arg: 1, inclusive: false)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_next_char-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2403</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_next_char</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-value">1</span>, <span class="ruby-value">inclusive:</span> <span class="ruby-keyword">false</span>)
  <span class="ruby-ivar">@waiting_proc</span> = <span class="ruby-operator">-&gt;</span>(<span class="ruby-identifier">key_for_proc</span>) { <span class="ruby-identifier">search_next_char</span>(<span class="ruby-identifier">key_for_proc</span>, <span class="ruby-identifier">arg</span>, <span class="ruby-value">inclusive:</span> <span class="ruby-identifier">inclusive</span>) }
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_next_word" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_next_word</span><span
              class="method-args">(key, arg: 1)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_next_word-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2124</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_next_word</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-value">1</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span> <span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@byte_pointer</span>
    <span class="ruby-identifier">byte_size</span>, <span class="ruby-identifier">_</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">vi_forward_word</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>, <span class="ruby-ivar">@drop_terminate_spaces</span>)
    <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">byte_size</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">arg</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">vi_next_word</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-identifier">arg</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">arg</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_paste_next" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_paste_next</span><span
              class="method-args">(key, arg: 1)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_paste_next-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2343</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_paste_next</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-value">1</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@vi_clipboard</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">byte_size</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">get_next_mbchar_size</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>)
    <span class="ruby-identifier">line</span> = <span class="ruby-identifier">byteinsert</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">byte_size</span>, <span class="ruby-ivar">@vi_clipboard</span>)
    <span class="ruby-identifier">set_current_line</span>(<span class="ruby-identifier">line</span>, <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@vi_clipboard</span>.<span class="ruby-identifier">bytesize</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">arg</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">vi_paste_next</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-identifier">arg</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">arg</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_paste_prev" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_paste_prev</span><span
              class="method-args">(key, arg: 1)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_paste_prev-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2334</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_paste_prev</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-value">1</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@vi_clipboard</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">cursor_point</span> = <span class="ruby-ivar">@vi_clipboard</span>.<span class="ruby-identifier">grapheme_clusters</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">-2</span>].<span class="ruby-identifier">join</span>
    <span class="ruby-identifier">set_current_line</span>(<span class="ruby-identifier">byteinsert</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>, <span class="ruby-ivar">@vi_clipboard</span>), <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">cursor_point</span>.<span class="ruby-identifier">bytesize</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">arg</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">vi_paste_prev</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-identifier">arg</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">arg</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_prev_big_word" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_prev_big_word</span><span
              class="method-args">(key, arg: 1)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_prev_big_word-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2166</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_prev_big_word</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-value">1</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">byte_size</span>, <span class="ruby-identifier">_</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">vi_big_backward_word</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>)
    <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">byte_size</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">arg</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">vi_prev_big_word</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-identifier">arg</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">arg</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_prev_char" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_prev_char</span><span
              class="method-args">(key, arg: 1)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_prev_char-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2455</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_prev_char</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-value">1</span>)
  <span class="ruby-ivar">@waiting_proc</span> = <span class="ruby-operator">-&gt;</span>(<span class="ruby-identifier">key_for_proc</span>) { <span class="ruby-identifier">search_prev_char</span>(<span class="ruby-identifier">key_for_proc</span>, <span class="ruby-identifier">arg</span>) }
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_prev_word" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_prev_word</span><span
              class="method-args">(key, arg: 1)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_prev_word-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2133</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_prev_word</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-value">1</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">byte_size</span>, <span class="ruby-identifier">_</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">vi_backward_word</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>)
    <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">byte_size</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">arg</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">vi_prev_word</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-identifier">arg</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">arg</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_replace_char" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_replace_char</span><span
              class="method-args">(key, arg: 1)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_replace_char-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2379</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_replace_char</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-value">1</span>)
  <span class="ruby-ivar">@waiting_proc</span> = <span class="ruby-operator">-&gt;</span>(<span class="ruby-identifier">k</span>) {
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">arg</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
      <span class="ruby-identifier">byte_size</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">get_next_mbchar_size</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span>)
      <span class="ruby-identifier">before</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-value">0</span>, <span class="ruby-ivar">@byte_pointer</span>)
      <span class="ruby-identifier">remaining_point</span> = <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">byte_size</span>
      <span class="ruby-identifier">after</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-identifier">remaining_point</span>, <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">remaining_point</span>)
      <span class="ruby-identifier">set_current_line</span>(<span class="ruby-identifier">before</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">chr</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">after</span>)
      <span class="ruby-ivar">@waiting_proc</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">arg</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
      <span class="ruby-identifier">byte_size</span> = <span class="ruby-value">0</span>
      <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword">do</span>
        <span class="ruby-identifier">byte_size</span> <span class="ruby-operator">+=</span> <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">get_next_mbchar_size</span>(<span class="ruby-identifier">current_line</span>, <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">byte_size</span>)
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">before</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-value">0</span>, <span class="ruby-ivar">@byte_pointer</span>)
      <span class="ruby-identifier">remaining_point</span> = <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">byte_size</span>
      <span class="ruby-identifier">after</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-identifier">remaining_point</span>, <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">bytesize</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">remaining_point</span>)
      <span class="ruby-identifier">replaced</span> = <span class="ruby-identifier">k</span>.<span class="ruby-identifier">chr</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">arg</span>
      <span class="ruby-identifier">set_current_line</span>(<span class="ruby-identifier">before</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">replaced</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">after</span>, <span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">replaced</span>.<span class="ruby-identifier">bytesize</span>)
      <span class="ruby-ivar">@waiting_proc</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
  }
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_search_next" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_search_next</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_search_next-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1746</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_search_next</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-identifier">incremental_search_history</span>(<span class="ruby-identifier">key</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-forward_search_history">forward_search_history</a>
        </div>

      </div>

      <div id="method-i-vi_search_prev" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_search_prev</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_search_prev-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 1741</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_search_prev</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-identifier">incremental_search_history</span>(<span class="ruby-identifier">key</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>

        <div class="aliases">
          Also aliased as: <a href="LineEditor.html#method-i-reverse_search_history">reverse_search_history</a>
        </div>

      </div>

      <div id="method-i-vi_to_column" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_to_column</span><span
              class="method-args">(key, arg: 0)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_to_column-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2370</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_to_column</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-value">0</span>)
  <span class="ruby-comment"># Implementing behavior of vi, not Readline&#39;s vi-mode.</span>
  <span class="ruby-ivar">@byte_pointer</span>, = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">grapheme_clusters</span>.<span class="ruby-identifier">inject</span>([<span class="ruby-value">0</span>, <span class="ruby-value">0</span>]) { <span class="ruby-operator">|</span>(<span class="ruby-identifier">total_byte_size</span>, <span class="ruby-identifier">total_width</span>), <span class="ruby-identifier">gc</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">mbchar_width</span> = <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">Unicode</span>.<span class="ruby-identifier">get_mbchar_width</span>(<span class="ruby-identifier">gc</span>)
    <span class="ruby-keyword">break</span> [<span class="ruby-identifier">total_byte_size</span>, <span class="ruby-identifier">total_width</span>] <span class="ruby-keyword">if</span> (<span class="ruby-identifier">total_width</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">mbchar_width</span>) <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">arg</span>
    [<span class="ruby-identifier">total_byte_size</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">gc</span>.<span class="ruby-identifier">bytesize</span>, <span class="ruby-identifier">total_width</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">mbchar_width</span>]
  }
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_to_history_line" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_to_history_line</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_to_history_line-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2315</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_to_history_line</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-constant">Reline</span><span class="ruby-operator">::</span><span class="ruby-constant">HISTORY</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">move_history</span>(<span class="ruby-value">0</span>, <span class="ruby-value">line:</span> <span class="ruby-value">:start</span>, <span class="ruby-value">cursor:</span> <span class="ruby-value">:start</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_to_next_char" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_to_next_char</span><span
              class="method-args">(key, arg: 1, inclusive: false)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_to_next_char-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2407</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_to_next_char</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-value">1</span>, <span class="ruby-value">inclusive:</span> <span class="ruby-keyword">false</span>)
  <span class="ruby-ivar">@waiting_proc</span> = <span class="ruby-operator">-&gt;</span>(<span class="ruby-identifier">key_for_proc</span>) { <span class="ruby-identifier">search_next_char</span>(<span class="ruby-identifier">key_for_proc</span>, <span class="ruby-identifier">arg</span>, <span class="ruby-value">need_prev_char:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">inclusive:</span> <span class="ruby-identifier">inclusive</span>) }
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_to_prev_char" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_to_prev_char</span><span
              class="method-args">(key, arg: 1)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_to_prev_char-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2459</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_to_prev_char</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-value">1</span>)
  <span class="ruby-ivar">@waiting_proc</span> = <span class="ruby-operator">-&gt;</span>(<span class="ruby-identifier">key_for_proc</span>) { <span class="ruby-identifier">search_prev_char</span>(<span class="ruby-identifier">key_for_proc</span>, <span class="ruby-identifier">arg</span>, <span class="ruby-keyword">true</span>) }
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_yank" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_yank</span><span
              class="method-args">(key, arg: nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_yank-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2267</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_yank</span>(<span class="ruby-identifier">key</span>, <span class="ruby-value">arg:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@vi_waiting_operator</span>
    <span class="ruby-identifier">copy_for_vi</span>(<span class="ruby-identifier">current_line</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@vi_waiting_operator</span> <span class="ruby-operator">==</span> <span class="ruby-value">:vi_yank_confirm</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-ivar">@vi_waiting_operator</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-ivar">@vi_waiting_operator_arg</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@vi_waiting_operator</span> = <span class="ruby-value">:vi_yank_confirm</span>
    <span class="ruby-ivar">@vi_waiting_operator_arg</span> = <span class="ruby-identifier">arg</span> <span class="ruby-operator">||</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-vi_yank_confirm" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">vi_yank_confirm</span><span
              class="method-args">(byte_pointer_diff)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="vi_yank_confirm-source">
            <pre><span class="ruby-comment"># File lib/reline/line_editor.rb, line 2278</span>
        <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vi_yank_confirm</span>(<span class="ruby-identifier">byte_pointer_diff</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">byte_pointer_diff</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">cut</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-ivar">@byte_pointer</span>, <span class="ruby-identifier">byte_pointer_diff</span>)
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">byte_pointer_diff</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">cut</span> = <span class="ruby-identifier">current_line</span>.<span class="ruby-identifier">byteslice</span>(<span class="ruby-ivar">@byte_pointer</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">byte_pointer_diff</span>, <span class="ruby-operator">-</span><span class="ruby-identifier">byte_pointer_diff</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">copy_for_vi</span>(<span class="ruby-identifier">cut</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

    </section>

  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.6.3.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

